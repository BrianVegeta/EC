webpackJsonp([31],{1439:function(e,t,n){"use strict";function r(e,t,n,r,a,i,l){return function(u,s){return new Promise(function(p,h){var y=s(),v=y.auth,m=v.currentUser,b=Date.now(),g=n.length>0?n[0]:null,x=n.length>1?n[1]:null,_=n.length>2?n[2]:null;u(d(b,"accept"));(0,o.asyncXhrAuthedPost)("/ajax/send_sue_request.json",{cid:e,pid:t,img1:g,img2:x,img3:_,targetstage:r,reason:a,targetuid:i,type:l,uid:m.uid},s(),!0).then(function(){u(c(b)),p()}).catch(function(){u(f("失敗")),h("失敗")})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.resetAction=void 0,t.sendSueReport=r;var o=n(8),a=function(e){return"SUE.ACTION."+e},i=a("LOCK"),l=a("REJECT"),u=a("FAILED"),s=a("RESET"),c=function(e){return{type:l,requestId:e}},f=function(e){return{type:u,errMsg:e}},d=function(e,t){return{type:i,requestId:e,actionName:t}},p=(t.resetAction=function(){return{type:s}},{lock:!1,curAction:"",requestId:0,success:!1,isErr:!1,errMsg:""});t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments[1];if(t.type===u)return Object.assign({},e,{lock:!1,isErr:!0,errMsg:"正在發送請求中...請勿動作"});if(!0===e.lock&&0!==t.requestId&&t.requestId!==e.requestId)return Object.assign({},e,{isErr:!0,errMsg:"正在發送請求中...請勿動作"});switch(t.type){case i:return Object.assign({},e,{lock:!0,isErr:!1,success:!1,errMsg:"",requestId:t.requestId,curAction:t.actionName});case l:return Object.assign({},e,{lock:!1,success:!0});case s:return p;default:return e}}},1440:function(e,t,n){"use strict";function r(e){return function(t,n){t(s()),(0,o.asyncXhrAuthedPost)("/ajax/get_order.json",{cid:e},n()).then(function(e){t(c(e))})}}Object.defineProperty(t,"__esModule",{value:!0}),t.reset=void 0,t.fetchOrder=r;var o=n(8),a=function(e){return"SUE.DETAIL."+e},i=a("FETCHING"),l=a("FETCHED"),u=a("RESET"),s=function(){return{type:i}},c=function(e){return{type:l,result:e}},f=(t.reset=function(){return{type:u}},{isFetching:!1,record:null});t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments[1];switch(t.type){case i:return Object.assign({},e,{isFetching:!0});case l:return Object.assign({},e,{isFetching:!1,record:t.result});case u:return f;default:return e}}},1441:function(e,t,n){"use strict";function r(e,t,n){return function(r){var o=(0,i.base64ToBlobData)(t);r(v(e,URL.createObjectURL(o)));var u=new FormData;u.append(l,o),(0,a.asyncXhrPutImage)("/ajax/images/sue_picture/"+n+".json",u).then(function(t){(0,i.asyncS3ToBlob)(t).then(function(n){return r(v(e,n,t))})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.processRawCovers=t.asyncUploadBlobCover=t.asyncUploadCover=t.reset=t.updatedCover=t.updatingCover=t.deleteCover=t.changeOrders=t.createCover=t.REDUCER_KEY=void 0,t.uploadCover=r;var o=n(28),a=n(8),i=n(53),l="croppedImage",u=t.REDUCER_KEY="sueGallery",s=function(e){return"PUBLISH.COVERS."+e},c=s("CREATE_COVER"),f=s("DELETE_COVER"),d=s("UPDATING_COVER"),p=s("UPDATED_COVER"),h=s("CHANGE_ORDERS"),y=s("RESET"),v=(t.createCover=function(e,t){return{type:c,blob:e,cidNo:t}},t.changeOrders=function(e){return{type:h,covers:e}},t.deleteCover=function(e){return{type:f,key:e}},t.updatingCover=function(e,t){return{type:d,blob:t,key:e}},t.updatedCover=function(e,t,n){return{type:p,blob:t,s3:n,key:e}}),m=(t.reset=function(){return{type:y}},t.asyncUploadCover=function(e,t,n){return function(r){return new Promise(function(o,u){var s=(0,i.base64ToBlobData)(t);r(v(e,URL.createObjectURL(s)));var c=new FormData;c.append(l,s),(0,a.asyncXhrPutImage)("/ajax/images/sue_picture/"+n+".json",c).then(function(t){(0,i.asyncS3ToBlob)(t).then(function(n){o(t),r(v(e,n,t))})}).catch(function(e){return u(e)})})}}),b=t.asyncUploadBlobCover=function(e,t,n){return function(r){return new Promise(function(o){(0,i.asyncContainBlobTobase64)(t).then(function(t){r(m(e,t,n)).then(function(e){return o(e)}).catch(function(e){return console.log(e)})})})}},g=(t.processRawCovers=function(){return function(e,t){return new Promise(function(n){var r=t()[u],o=r.filter(function(e){return!e.isStored}),a=o.map(function(t){return e(b(t.key,t.blob,t.cidNo))});Promise.all(a).then(function(e){return n(e)}).catch(function(e){return console.log(e)})})}},{cidNo:null,key:"?",blob:null,s3:null,isUploading:!1,isStored:!1}),x=[];t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments[1];switch(t.type){case c:return e.concat(Object.assign({},g,{key:"KEY_"+Date.now().toString(),blob:t.blob,cidNo:t.cidNo}));case f:return(0,o.List)(e).delete((0,o.List)(e).findIndex(function(e){return e.key===t.key})).toJS();case d:return(0,o.List)(e).update((0,o.List)(e).findIndex(function(e){return e.key===t.key}),function(e){return Object.assign({},e,{isUploading:!0,isStored:!1,blob:t.blob})}).toJS();case p:return(0,o.List)(e).update((0,o.List)(e).findIndex(function(e){return e.key===t.key}),function(e){return Object.assign({},e,{isUploading:!1,isStored:!0,blob:t.blob,s3:t.s3})}).toJS();case h:return t.covers;case y:return x;default:return e}}},1532:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),o=n(23),a=n(2),i=n(1439),l=n(1440),u=n(1441),s=n(2234),c=function(e){return e&&e.__esModule?e:{default:e}}(s),f=function(e){return{environment:e.environment,sueDetail:e.sueDetail,sueAction:e.sueAction,sueGallery:e.sueGallery,currentUser:e.auth.currentUser}},d=function(e){return function(t,n){var r=n(),i=r.routing.locationBeforeTransitions,l=r.routingHelper.removeHook,u=i.state,s=i.pathname;l&&l(),u&&u.referrer&&u.referrer!==s?o.browserHistory.push(u.referrer):a.orderDetail.indexPath(e)}},p=function(e,t){var n=t.params.cid;return{dispatch:e,dispatchRecords:function(){return e((0,l.fetchOrder)(n))},dispatchSend:function(t,r,o,a,l){e((0,u.processRawCovers)()).then(function(u){e((0,i.sendSueReport)(n,t,u,r,o,a,l)).then(e(d(n)))})},dispatchReset:function(){return e((0,l.reset)())},dispatchCreateCover:function(t,n){return e((0,u.createCover)(t,n))},dispatchDeleteCover:function(t){return e((0,u.deleteCover)(t))},dispatchChangeOrders:function(t){return e((0,u.changeOrders)(t))},dispatchCancel:function(){e(d(n))}}};t.default=(0,r.connect)(f,p)(c.default)},1590:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),s=r(u),c=n(3),f=r(c),d=n(5),p=r(d),h=n(1595),y=r(h),v=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=n.onChange.bind(n),n.onLabelClick=n.onLabelClick.bind(n),n.name=n.constructor.generateName(),n.state={checked:n.props.checked},n}return i(t,e),l(t,null,[{key:"generateName",value:function(){return Math.random().toString(36).slice(2)}}]),l(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.checked;t!==this.state.checked&&this.setState({checked:t})}},{key:"onChange",value:function(e){var t=e.target.checked;this.props.onChange(t),this.setState({checked:t})}},{key:"onLabelClick",value:function(){var e=this.state.checked;this.props.onChange(!e),this.setState({checked:!e})}},{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.readOnly,r=e.children,o=e.helper,a=this.state.checked,i={styleName:a?"checkboxChecked":"checkbox",className:t&&y.default.checkboxDisable},l={styleName:"checkboxInput",type:"checkbox",name:this.name,onChange:this.onChange,disabled:t,checked:a,readOnly:n},u={styleName:"labelInner"};return t||(u.onClick=this.onLabelClick,u.style={cursor:"pointer"}),s.default.createElement("div",{styleName:"container"},s.default.createElement("label",{htmlFor:this.name,styleName:"label"},s.default.createElement("span",i,s.default.createElement("input",l),s.default.createElement("span",{styleName:"checkboxInner"})),s.default.createElement("span",u,r)),o&&s.default.createElement("div",{styleName:"helper"},o))}}]),t}(s.default.Component);v.defaultProps={checked:!1,disabled:!1,readOnly:!1,helper:null},v.propTypes={readOnly:f.default.bool,children:f.default.node.isRequired,helper:f.default.node,onChange:f.default.func.isRequired,checked:f.default.bool,disabled:f.default.bool},t.default=(0,p.default)(v,y.default)},1595:function(e,t){e.exports={container:"CheckBox_container_fRUUR",containerBlock:"CheckBox_containerBlock__bQqF",label:"CheckBox_label_3Uybp",labelInner:"CheckBox_labelInner_221Tz",helper:"CheckBox_helper_TrlbQ",check:"CheckBox_check_3i_Lc",checkboxInner:"CheckBox_checkboxInner_2Kw1N",checkboxInput:"CheckBox_checkboxInput_2g_cI",checked:"CheckBox_checked_22rVc",checkbox:"CheckBox_checkbox_11FaD CheckBox_check_3i_Lc",checkboxChecked:"CheckBox_checkboxChecked_2HOKa CheckBox_check_3i_Lc CheckBox_checked_22rVc",checkboxDisable:"CheckBox_checkboxDisable_1pAXA"}},1627:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CROP_BOX=550,t.CANVAS_WIDTH=780,t.CANVAS_HEIGHT=600,t.DROPBOX_SIZE=176},1683:function(e,t,n){"use strict";function r(e,t,n){var r=e.slice(0);if(n>=r.length)for(var o=n-r.length;1+o--;)r.push(void 0);return r.splice(n,0,r.splice(t,1)[0]),r}function o(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.keys(e).reduce(function(t,r){return-1===n.indexOf(r)&&(t[r]=e[r]),t},{})}function a(e,t){for(;e;){if(t(e))return e;e=e.parentNode}}function i(e,t,n){return n<e?e:n>t?t:n}function l(e){return"px"===e.substr(-2)?parseFloat(e):0}function u(e){var t=window.getComputedStyle(e);return{top:l(t.marginTop),right:l(t.marginRight),bottom:l(t.marginBottom),left:l(t.marginLeft)}}function s(e,t){var n=t.displayName||t.name;return n?e+"("+n+")":e}Object.defineProperty(t,"__esModule",{value:!0}),t.arrayMove=r,t.omit=o,t.closest=a,t.limit=i,t.getElementMargin=u,t.provideDisplayName=s;t.events={start:["touchstart","mousedown"],move:["touchmove","mousemove"],end:["touchend","touchcancel","mouseup"]},t.vendorPrefix=function(){if("undefined"==typeof window||"undefined"==typeof document)return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];switch(t){case"ms":return"ms";default:return t&&t.length?t[0].toUpperCase()+t.substr(1):""}}()},1841:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(0),i=r(a),l=n(30),u=r(l),s=function(e){return i.default.createElement(u.default,o({viewBox:"0 0 40 40"},e),i.default.createElement("g",null,i.default.createElement("path",{d:"m32.5 5h-10v-1.2c0-0.7-0.6-1.3-1.2-1.3s-1.3 0.6-1.3 1.3v1.2h-10c-1.4 0-2.5 1.1-2.5 2.5v2.5c0 1.4 1.1 2.5 2.5 2.5v22.5c0 1.4 1.1 2.5 2.5 2.5h17.5c1.4 0 2.5-1.1 2.5-2.5v-22.5c1.4 0 2.5-1.1 2.5-2.5v-2.5c0-1.4-1.1-2.5-2.5-2.5z m-2.5 28.8c0 0.6-0.6 1.2-1.2 1.2h-15c-0.7 0-1.3-0.6-1.3-1.2v-21.3h2.5v18.8c0 0.6 0.6 1.2 1.3 1.2s1.2-0.6 1.2-1.2l0-18.8h2.5v18.8c0 0.6 0.6 1.2 1.3 1.2s1.2-0.6 1.2-1.2l0-18.8h2.5l0 18.8c0 0.6 0.6 1.2 1.3 1.2s1.2-0.6 1.2-1.2v-18.8h2.5v21.3z m2.5-24.4c0 0.3-0.3 0.6-0.6 0.6h-21.3c-0.3 0-0.6-0.3-0.6-0.6v-1.3c0-0.3 0.3-0.6 0.6-0.6h21.3c0.3 0 0.6 0.3 0.6 0.6v1.3z"})))};t.default=s,e.exports=t.default},1860:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),s=r(u),c=n(3),f=r(c),d=n(1894),p=r(d),h=n(1841),y=r(h),v=n(108),m=r(v),b=n(1627),g=n(5),x=r(g),_=n(1889),O=r(_),w=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.coverUrl,n=e.onEdit,r=e.onRemove,o=e.coverLabel,a={size:16,color:"#fff",style:{display:"block"}};return s.default.createElement("div",{styleName:"imageDropped",style:{width:b.DROPBOX_SIZE,height:b.DROPBOX_SIZE}},s.default.createElement(m.default,{src:t}),o,s.default.createElement("div",{styleName:"ctrlGroups"},n&&s.default.createElement("button",{className:"button",styleName:"ctrlIconEdit",onClick:n},s.default.createElement(p.default,a)),s.default.createElement("button",{className:"button",styleName:"ctrlIcon",onClick:r},s.default.createElement(y.default,a))))}}]),t}(s.default.Component);w.defaultProps={coverLabel:null,coverUrl:null,onEdit:null},w.propTypes={coverLabel:f.default.node,coverUrl:f.default.string,onEdit:f.default.func,onRemove:f.default.func.isRequired},t.default=(0,x.default)(w,O.default)},1861:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),s=r(u),c=n(553),f=r(c),d=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onDrop=n.onDrop.bind(n),n}return i(t,e),l(t,[{key:"onDrop",value:function(e){var t=this.props.onDrop;t&&t(e[0])}},{key:"render",value:function(){return s.default.createElement(f.default,{style:{position:"absolute",top:0,left:0,right:0,bottom:0},multiple:!1,accept:"image/jpeg, image/png",onDrop:this.onDrop})}}]),t}(s.default.Component);d.defaultProps={onDrop:null},d.propTypes={onDrop:s.default.PropTypes.func},t.default=d},1862:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),f=n(3),d=r(f),p=n(5),h=r(p),y=n(1897),v=r(y),m=n(1627),b=n(1861),g=r(b),x=n(1890),_=r(x),O=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setDropped=n.setDropped.bind(n),n.onMouseEnter=n.onMouseEnter.bind(n),n.onMouseLeave=n.onMouseLeave.bind(n),n.state={isHover:!1},n}return i(t,e),u(t,[{key:"onMouseEnter",value:function(){this.setState({isHover:!0})}},{key:"onMouseLeave",value:function(){this.setState({isHover:!1})}},{key:"setDropped",value:function(e){this.props.onDrop(e.preview)}},{key:"render",value:function(){var e=this.props.coverLabel,t=this.onMouseEnter,n=this.onMouseLeave;return c.default.createElement("div",l({styleName:"thumbDropzone",style:{width:m.DROPBOX_SIZE,height:m.DROPBOX_SIZE}},{onMouseEnter:t,onMouseLeave:n}),c.default.createElement("div",{styleName:"cameraLabel"},c.default.createElement(v.default,{size:50,color:this.state.isHover?"#222":"#888"}),!e&&c.default.createElement("div",{styleName:"noticeHelper"},"新增其他照片")),e,c.default.createElement(g.default,{onDrop:this.setDropped}))}}]),t}(c.default.Component);O.defaultProps={coverLabel:!1},O.propTypes={coverLabel:d.default.node,onDrop:d.default.func.isRequired},t.default=(0,h.default)(O,_.default)},1889:function(e,t){e.exports={imageDrop:"ThumbDropped_imageDrop_2Extv",imageDropped:"ThumbDropped_imageDropped_3sv8h ThumbDropped_imageDrop_2Extv",ctrlGroups:"ThumbDropped_ctrlGroups_1pUGr",ctrlIconEdit:"ThumbDropped_ctrlIconEdit_3MICp",ctrlIcon:"ThumbDropped_ctrlIcon_1n_cr"}},1890:function(e,t){e.exports={thumbDropzone:"ThumbDropzone_thumbDropzone_3-Ocd",coverLabel:"ThumbDropzone_coverLabel_1e-zm",cameraLabel:"ThumbDropzone_cameraLabel_50UL3",noticeHelper:"ThumbDropzone_noticeHelper_3dKNY"}},1894:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(0),i=r(a),l=n(30),u=r(l),s=function(e){return i.default.createElement(u.default,o({viewBox:"0 0 40 40"},e),i.default.createElement("g",null,i.default.createElement("path",{d:"m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"})))};t.default=s,e.exports=t.default},1897:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(0),i=r(a),l=n(30),u=r(l),s=function(e){return i.default.createElement(u.default,o({viewBox:"0 0 40 40"},e),i.default.createElement("g",null,i.default.createElement("path",{d:"m31.7 33.3h-23.4c-2.7 0-5-2.2-5-5v-13.3c0-2.8 2.3-5 5-5h2.7l1.6-1.7c1-0.9 2.7-1.6 4.1-1.6h6.6c1.4 0 3.1 0.7 4.1 1.6l1.6 1.7h2.7c2.7 0 5 2.2 5 5v13.3c0 2.8-2.3 5-5 5z m-23.4-20c-0.9 0-1.6 0.8-1.6 1.7v13.3c0 1 0.7 1.7 1.6 1.7h23.4c0.9 0 1.6-0.7 1.6-1.7v-13.3c0-0.9-0.7-1.7-1.6-1.7h-3.4c-0.4 0-0.8-0.1-1.1-0.5l-2.2-2.1c-0.3-0.3-1.2-0.7-1.7-0.7h-6.6c-0.5 0-1.4 0.4-1.7 0.7l-2.2 2.1c-0.3 0.4-0.7 0.5-1.1 0.5h-3.4z m11.7 3.4c2.3 0 4.2 1.8 4.2 4.1s-1.9 4.2-4.2 4.2-4.2-1.9-4.2-4.2 1.9-4.1 4.2-4.1z m0-1.7c-3.2 0-5.8 2.6-5.8 5.8 0 3.3 2.6 5.9 5.8 5.9s5.8-2.6 5.8-5.9c0-3.2-2.6-5.8-5.8-5.8z m10-0.5c-1.2 0-2.2 1-2.2 2.2s1 2.1 2.2 2.1 2.2-0.9 2.2-2.1-1-2.2-2.2-2.2z"})))};t.default=s,e.exports=t.default},1909:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(24),u=r(l),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=r(c),d=n(3),p=r(d),h=n(5),y=r(h),v=n(1955),m=n(1862),b=r(m),g=n(1860),x=r(g),_=n(1932),O=r(_),w=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSortEnd=n.onSortEnd.bind(n),n}return i(t,e),s(t,null,[{key:"shouldCancelStart",value:function(e){return["svg","path","button"].indexOf(e.target.tagName.toLowerCase())>=0}}]),s(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props.covers;return!(0,u.default)(t,e.covers)}},{key:"onSortEnd",value:function(e){var t=e.oldIndex,n=e.newIndex,r=this.props,o=r.changeOrders,a=r.covers;o((0,v.arrayMove)(a,t,n))}},{key:"openModal",value:function(e,t){this.props.openCropper(e,t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.covers,r=t.createCover,o=t.deleteCover,a=t.addCoverLabel,i=O.default.imageDropzone,l=O.default.gallery,u=f.default.createElement("div",{className:O.default.coverLabel},"封面"),s=(0,v.SortableElement)(function(t){var n=t.value;return f.default.createElement("div",{className:i},n.isEmpty?f.default.createElement(b.default,{onDrop:r,coverLabel:a&&n.isCover&&u}):f.default.createElement(x.default,{coverLabel:a&&n.isCover&&u,coverUrl:n.blob,onEdit:function(){return e.openModal(n.key,n.blob)},onRemove:function(){return o(n.key)}}))}),c=(0,v.SortableContainer)(function(e){var t=e.items;return f.default.createElement("div",{className:"clear "+l},t.map(function(e,t){return f.default.createElement(s,{key:"item-"+(t+1),index:t,value:e,disabled:!e.blob})}))}),d=Array(3-n.length).fill(Object.assign({},{isEmpty:!0})),p=n.concat(d);return p[0]=Object.assign({},p[0],{isCover:!0}),f.default.createElement(c,{axis:"x",items:p,onSortEnd:this.onSortEnd,shouldCancelStart:this.constructor.shouldCancelStart})}}]),t}(f.default.Component);w.defaultProps={addCoverLabel:!0},w.propTypes={addCoverLabel:p.default.bool,createCover:p.default.func.isRequired,deleteCover:p.default.func.isRequired,changeOrders:p.default.func.isRequired,openCropper:p.default.func.isRequired,covers:p.default.arrayOf(p.default.object).isRequired},t.default=(0,y.default)(w,O.default)},1932:function(e,t){e.exports={gallery:"SortableGallery_gallery_1XfhJ",imageDropzone:"SortableGallery_imageDropzone_3jDGc",coverLabel:"SortableGallery_coverLabel_1xhxn"}},1939:function(e,t,n){function r(e,t,n){var r=-1;t=o(t.length?t:[c],u(a));var f=i(e,function(e,n,a){return{criteria:o(t,function(t){return t(e)}),index:++r,value:e}});return l(f,function(e,t){return s(e,t,n)})}var o=n(156),a=n(139),i=n(568),l=n(1943),u=n(228),s=n(1945),c=n(164);e.exports=r},1943:function(e,t){function n(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}e.exports=n},1944:function(e,t,n){function r(e,t){if(e!==t){var n=void 0!==e,r=null===e,a=e===e,i=o(e),l=void 0!==t,u=null===t,s=t===t,c=o(t);if(!u&&!c&&!i&&e>t||i&&l&&s&&!u&&!c||r&&l&&s||!n&&s||!a)return 1;if(!r&&!i&&!c&&e<t||c&&n&&a&&!r&&!i||u&&n&&a||!l&&a||!s)return-1}return 0}var o=n(165);e.exports=r},1945:function(e,t,n){function r(e,t,n){for(var r=-1,a=e.criteria,i=t.criteria,l=a.length,u=n.length;++r<l;){var s=o(a[r],i[r]);if(s){if(r>=u)return s;return s*("desc"==n[r]?-1:1)}}return e.index-t.index}var o=n(1944);e.exports=r},1947:function(e,t,n){var r=n(348),o=n(1939),a=n(349),i=n(346),l=a(function(e,t){if(null==e)return[];var n=t.length;return n>1&&i(e,t[0],t[1])?t=[]:n>2&&i(t[0],t[1],t[2])&&(t=[t[0]]),o(e,r(t,1),[])});e.exports=l},1951:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(72),l=r(i),u=n(1947),s=r(u),c=function(){function e(){o(this,e),this.refs={}}return a(e,[{key:"add",value:function(e,t){this.refs[e]||(this.refs[e]=[]),this.refs[e].push(t)}},{key:"remove",value:function(e,t){var n=this.getIndex(e,t);-1!==n&&this.refs[e].splice(n,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var e=this;return(0,l.default)(this.refs[this.active.collection],function(t){return t.node.sortableInfo.index==e.active.index})}},{key:"getIndex",value:function(e,t){return this.refs[e].indexOf(t)}},{key:"getOrderedRefs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return(0,s.default)(this.refs[e],function(e){return e.node.sortableInfo.index})}}]),e}();t.default=c},1952:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(e){a(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleStart=function(e){var n=t.props,r=n.distance,o=n.shouldCancelStart;if(2===e.button||o(e))return!1;t._touched=!0,t._pos={x:e.clientX,y:e.clientY};var a=(0,_.closest)(e.target,function(e){return null!=e.sortableInfo});if(a&&a.sortableInfo&&t.nodeIsChild(a)&&!t.state.sorting){var i=t.props.useDragHandle,l=a.sortableInfo,u=l.index,s=l.collection;if(i&&!(0,_.closest)(e.target,function(e){return null!=e.sortableHandle}))return;t.manager.active={index:u,collection:s},"a"===e.target.tagName.toLowerCase()&&e.preventDefault(),r||(0===t.props.pressDelay?t.handlePress(e):t.pressTimer=setTimeout(function(){return t.handlePress(e)},t.props.pressDelay))}},t.nodeIsChild=function(e){return e.sortableInfo.manager===t.manager},t.handleMove=function(e){var n=t.props,r=n.distance,o=n.pressThreshold;if(!t.state.sorting&&t._touched){t._delta={x:t._pos.x-e.clientX,y:t._pos.y-e.clientY};var a=Math.abs(t._delta.x)+Math.abs(t._delta.y);r||o&&!(o&&a>=o)?r&&a>=r&&t.manager.isActive()&&t.handlePress(e):(clearTimeout(t.cancelTimer),t.cancelTimer=setTimeout(t.cancel,0))}},t.handleEnd=function(){var e=t.props.distance;t._touched=!1,e||t.cancel()},t.cancel=function(){t.state.sorting||(clearTimeout(t.pressTimer),t.manager.active=null)},t.handlePress=function(e){var n=t.manager.getActive();if(n){var r=t.props,a=r.axis,i=r.getHelperDimensions,l=r.helperClass,u=r.hideSortableGhost,s=r.onSortStart,c=r.useWindowAsScrollContainer,f=n.node,d=n.collection,p=f.sortableInfo.index,h=(0,_.getElementMargin)(f),y=t.container.getBoundingClientRect(),v=i({index:p,node:f,collection:d});t.node=f,t.margin=h,t.width=v.width,t.height=v.height,t.marginOffset={x:t.margin.left+t.margin.right,y:Math.max(t.margin.top,t.margin.bottom)},t.boundingClientRect=f.getBoundingClientRect(),t.containerBoundingRect=y,t.index=p,t.newIndex=p,t.axis={x:a.indexOf("x")>=0,y:a.indexOf("y")>=0},t.offsetEdge=t.getEdgeOffset(f),t.initialOffset=t.getOffset(e),t.initialScroll={top:t.scrollContainer.scrollTop,left:t.scrollContainer.scrollLeft};var m=f.querySelectorAll("input, textarea, select"),b=f.cloneNode(!0);if([].concat(o(b.querySelectorAll("input, textarea, select"))).forEach(function(e,t){return e.value=m[t]&&m[t].value}),t.helper=t.document.body.appendChild(b),t.helper.style.position="fixed",t.helper.style.top=t.boundingClientRect.top-h.top+"px",t.helper.style.left=t.boundingClientRect.left-h.left+"px",t.helper.style.width=t.width+"px",t.helper.style.height=t.height+"px",t.helper.style.boxSizing="border-box",t.helper.style.pointerEvents="none",u&&(t.sortableGhost=f,f.style.visibility="hidden",f.style.opacity=0),t.minTranslate={},t.maxTranslate={},t.axis.x&&(t.minTranslate.x=(c?0:y.left)-t.boundingClientRect.left-t.width/2,t.maxTranslate.x=(c?t.contentWindow.innerWidth:y.left+y.width)-t.boundingClientRect.left-t.width/2),t.axis.y&&(t.minTranslate.y=(c?0:y.top)-t.boundingClientRect.top-t.height/2,t.maxTranslate.y=(c?t.contentWindow.innerHeight:y.top+y.height)-t.boundingClientRect.top-t.height/2),l){var g;(g=t.helper.classList).add.apply(g,o(l.split(" ")))}t.listenerNode=e.touches?f:t.contentWindow,_.events.move.forEach(function(e){return t.listenerNode.addEventListener(e,t.handleSortMove,!1)}),_.events.end.forEach(function(e){return t.listenerNode.addEventListener(e,t.handleSortEnd,!1)}),t.setState({sorting:!0,sortingIndex:p}),s&&s({node:f,index:p,collection:d},e)}},t.handleSortMove=function(e){var n=t.props.onSortMove;e.preventDefault(),t.updatePosition(e),t.animateNodes(),t.autoscroll(),n&&n(e)},t.handleSortEnd=function(e){var n=t.props,r=n.hideSortableGhost,o=n.onSortEnd,a=t.manager.active.collection;t.listenerNode&&(_.events.move.forEach(function(e){return t.listenerNode.removeEventListener(e,t.handleSortMove)}),_.events.end.forEach(function(e){return t.listenerNode.removeEventListener(e,t.handleSortEnd)})),t.helper.parentNode.removeChild(t.helper),r&&t.sortableGhost&&(t.sortableGhost.style.visibility="",t.sortableGhost.style.opacity="");for(var i=t.manager.refs[a],l=0,u=i.length;l<u;l++){var s=i[l],c=s.node;s.edgeOffset=null,c.style[_.vendorPrefix+"Transform"]="",c.style[_.vendorPrefix+"TransitionDuration"]=""}clearInterval(t.autoscrollInterval),t.autoscrollInterval=null,t.manager.active=null,t.setState({sorting:!1,sortingIndex:null}),"function"==typeof o&&o({oldIndex:t.index,newIndex:t.newIndex,collection:a},e),t._touched=!1},t.autoscroll=function(){var e=t.translate,n={x:0,y:0},r={x:1,y:1},o={x:10,y:10};e.y>=t.maxTranslate.y-t.height/2?(n.y=1,r.y=o.y*Math.abs((t.maxTranslate.y-t.height/2-e.y)/t.height)):e.x>=t.maxTranslate.x-t.width/2?(n.x=1,r.x=o.x*Math.abs((t.maxTranslate.x-t.width/2-e.x)/t.width)):e.y<=t.minTranslate.y+t.height/2?(n.y=-1,r.y=o.y*Math.abs((e.y-t.height/2-t.minTranslate.y)/t.height)):e.x<=t.minTranslate.x+t.width/2&&(n.x=-1,r.x=o.x*Math.abs((e.x-t.width/2-t.minTranslate.x)/t.width)),t.autoscrollInterval&&(clearInterval(t.autoscrollInterval),t.autoscrollInterval=null,t.isAutoScrolling=!1),0===n.x&&0===n.y||(t.autoscrollInterval=setInterval(function(){t.isAutoScrolling=!0;var e={left:1*r.x*n.x,top:1*r.y*n.y};t.scrollContainer.scrollTop+=e.top,t.scrollContainer.scrollLeft+=e.left,t.translate.x+=e.left,t.translate.y+=e.top,t.animateNodes()},5))},t.manager=new x.default,t.events={start:t.handleStart,move:t.handleMove,end:t.handleEnd},(0,b.default)(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time."),t.state={},t}return l(n,t),f(n,[{key:"getChildContext",value:function(){return{manager:this.manager}}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.contentWindow,r=t.getContainer,o=t.useWindowAsScrollContainer;this.container="function"==typeof r?r(this.getWrappedInstance()):(0,v.findDOMNode)(this),this.document=this.container.ownerDocument||document,this.scrollContainer=o?this.document.body:this.container,this.contentWindow="function"==typeof n?n():n;for(var a in this.events)!function(t){e.events.hasOwnProperty(t)&&_.events[t].forEach(function(n){return e.container.addEventListener(n,e.events[t],!1)})}(a)}},{key:"componentWillUnmount",value:function(){var e=this;for(var t in this.events)!function(t){e.events.hasOwnProperty(t)&&_.events[t].forEach(function(n){return e.container.removeEventListener(n,e.events[t])})}(t)}},{key:"getEdgeOffset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{top:0,left:0};if(e){var n={top:t.top+e.offsetTop,left:t.left+e.offsetLeft};return e.parentNode!==this.container?this.getEdgeOffset(e.parentNode,n):n}}},{key:"getOffset",value:function(e){return{x:e.touches?e.touches[0].clientX:e.clientX,y:e.touches?e.touches[0].clientY:e.clientY}}},{key:"getLockPixelOffsets",value:function(){var e=this.props.lockOffset;Array.isArray(e)||(e=[e,e]),(0,b.default)(2===e.length,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",e);var t=e,n=c(t,2),r=n[0],o=n[1];return[this.getLockPixelOffset(r),this.getLockPixelOffset(o)]}},{key:"getLockPixelOffset",value:function(e){var t=e,n=e,r="px";if("string"==typeof e){var o=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(e);(0,b.default)(null!==o,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',e),t=n=parseFloat(e),r=o[1]}return(0,b.default)(isFinite(t)&&isFinite(n),"lockOffset value should be a finite. Given %s",e),"%"===r&&(t=t*this.width/100,n=n*this.height/100),{x:t,y:n}}},{key:"updatePosition",value:function(e){var t=this.props,n=t.lockAxis,r=t.lockToContainerEdges,o=this.getOffset(e),a={x:o.x-this.initialOffset.x,y:o.y-this.initialOffset.y};if(this.translate=a,r){var i=this.getLockPixelOffsets(),l=c(i,2),u=l[0],s=l[1],f={x:this.width/2-u.x,y:this.height/2-u.y},d={x:this.width/2-s.x,y:this.height/2-s.y};a.x=(0,_.limit)(this.minTranslate.x+f.x,this.maxTranslate.x-d.x,a.x),a.y=(0,_.limit)(this.minTranslate.y+f.y,this.maxTranslate.y-d.y,a.y)}"x"===n?a.y=0:"y"===n&&(a.x=0),this.helper.style[_.vendorPrefix+"Transform"]="translate3d("+a.x+"px,"+a.y+"px, 0)"}},{key:"animateNodes",value:function(){var e=this.props,t=e.transitionDuration,n=e.hideSortableGhost,r=this.manager.getOrderedRefs(),o={left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top},a={left:this.offsetEdge.left+this.translate.x+o.left,top:this.offsetEdge.top+this.translate.y+o.top};this.newIndex=null;for(var i=0,l=r.length;i<l;i++){var u=r[i].node,s=u.sortableInfo.index,c=u.offsetWidth,f=u.offsetHeight,d={width:this.width>c?c/2:this.width/2,height:this.height>f?f/2:this.height/2},p={x:0,y:0},h=r[i].edgeOffset;h||(r[i].edgeOffset=h=this.getEdgeOffset(u));var y=i<r.length-1&&r[i+1],v=i>0&&r[i-1];y&&!y.edgeOffset&&(y.edgeOffset=this.getEdgeOffset(y.node)),s!==this.index?(t&&(u.style[_.vendorPrefix+"TransitionDuration"]=t+"ms"),this.axis.x?this.axis.y?s<this.index&&(a.left-d.width<=h.left&&a.top<=h.top+d.height||a.top+d.height<=h.top)?(p.x=this.width+this.marginOffset.x,h.left+p.x>this.containerBoundingRect.width-d.width&&(p.x=y.edgeOffset.left-h.left,p.y=y.edgeOffset.top-h.top),null===this.newIndex&&(this.newIndex=s)):s>this.index&&(a.left+d.width>=h.left&&a.top+d.height>=h.top||a.top+d.height>=h.top+f)&&(p.x=-(this.width+this.marginOffset.x),h.left+p.x<this.containerBoundingRect.left+d.width&&(p.x=v.edgeOffset.left-h.left,p.y=v.edgeOffset.top-h.top),this.newIndex=s):s>this.index&&a.left+d.width>=h.left?(p.x=-(this.width+this.marginOffset.x),this.newIndex=s):s<this.index&&a.left<=h.left+d.width&&(p.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=s)):this.axis.y&&(s>this.index&&a.top+d.height>=h.top?(p.y=-(this.height+this.marginOffset.y),this.newIndex=s):s<this.index&&a.top<=h.top+d.height&&(p.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=s))),u.style[_.vendorPrefix+"Transform"]="translate3d("+p.x+"px,"+p.y+"px,0)"):n&&(this.sortableGhost=u,u.style.visibility="hidden",u.style.opacity=0)}null==this.newIndex&&(this.newIndex=this.index)}},{key:"getWrappedInstance",value:function(){return(0,b.default)(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var t=r.withRef?"wrappedInstance":null;return p.default.createElement(e,s({ref:t},(0,_.omit)(this.props,"contentWindow","useWindowAsScrollContainer","distance","helperClass","hideSortableGhost","transitionDuration","useDragHandle","pressDelay","pressThreshold","shouldCancelStart","onSortStart","onSortMove","onSortEnd","axis","lockAxis","lockOffset","lockToContainerEdges","getContainer","getHelperDimensions")))}}]),n}(d.Component),t.displayName=(0,_.provideDisplayName)("sortableList",e),t.defaultProps={axis:"y",transitionDuration:300,pressDelay:0,pressThreshold:5,distance:0,useWindowAsScrollContainer:!1,hideSortableGhost:!0,contentWindow:"undefined"!=typeof window?window:null,shouldCancelStart:function(e){if(-1!==["input","textarea","select","option","button"].indexOf(e.target.tagName.toLowerCase()))return!0},lockToContainerEdges:!1,lockOffset:"50%",getHelperDimensions:function(e){var t=e.node;return{width:t.offsetWidth,height:t.offsetHeight}}},t.propTypes={axis:y.default.oneOf(["x","y","xy"]),distance:y.default.number,lockAxis:y.default.string,helperClass:y.default.string,transitionDuration:y.default.number,contentWindow:y.default.any,onSortStart:y.default.func,onSortMove:y.default.func,onSortEnd:y.default.func,shouldCancelStart:y.default.func,pressDelay:y.default.number,useDragHandle:y.default.bool,useWindowAsScrollContainer:y.default.bool,hideSortableGhost:y.default.bool,lockToContainerEdges:y.default.bool,lockOffset:y.default.oneOfType([y.default.number,y.default.string,y.default.arrayOf(y.default.oneOfType([y.default.number,y.default.string]))]),getContainer:y.default.func,getHelperDimensions:y.default.func},t.childContextTypes={manager:y.default.object.isRequired},n}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=u;var d=n(0),p=r(d),h=n(3),y=r(h),v=n(71),m=n(27),b=r(m),g=n(1951),x=r(g),_=n(1683)},1953:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(){return o(this,n),a(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return i(n,t),s(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.collection,n=e.disabled,r=e.index;n||this.setDraggable(t,r)}},{key:"componentWillReceiveProps",value:function(e){if(this.props.index!==e.index&&this.node&&(this.node.sortableInfo.index=e.index),this.props.disabled!==e.disabled){var t=e.collection,n=e.disabled,r=e.index;n?this.removeDraggable(t):this.setDraggable(t,r)}else this.props.collection!==e.collection&&(this.removeDraggable(this.props.collection),this.setDraggable(e.collection,e.index))}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.collection;e.disabled||this.removeDraggable(t)}},{key:"setDraggable",value:function(e,t){var n=this.node=(0,h.findDOMNode)(this);n.sortableInfo={index:t,collection:e,manager:this.context.manager},this.ref={node:n},this.context.manager.add(e,this.ref)}},{key:"removeDraggable",value:function(e){this.context.manager.remove(e,this.ref)}},{key:"getWrappedInstance",value:function(){return(0,v.default)(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var t=r.withRef?"wrappedInstance":null;return f.default.createElement(e,u({ref:t},(0,m.omit)(this.props,"collection","disabled","index")))}}]),n}(c.Component),t.displayName=(0,m.provideDisplayName)("sortableElement",e),t.contextTypes={manager:p.default.object.isRequired},t.propTypes={index:p.default.number.isRequired,collection:p.default.oneOfType([p.default.number,p.default.string]),disabled:p.default.bool},t.defaultProps={collection:0},n}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=l;var c=n(0),f=r(c),d=n(3),p=r(d),h=n(71),y=n(27),v=r(y),m=n(1683)},1954:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(){return o(this,n),a(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return i(n,t),s(n,[{key:"componentDidMount",value:function(){(0,d.findDOMNode)(this).sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return(0,h.default)(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var t=r.withRef?"wrappedInstance":null;return f.default.createElement(e,u({ref:t},this.props))}}]),n}(c.Component),t.displayName=(0,y.provideDisplayName)("sortableHandle",e),n}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=l;var c=n(0),f=r(c),d=n(71),p=n(27),h=r(p),y=n(1683)},1955:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.arrayMove=t.sortableHandle=t.sortableElement=t.sortableContainer=t.SortableHandle=t.SortableElement=t.SortableContainer=void 0;var o=n(1683);Object.defineProperty(t,"arrayMove",{enumerable:!0,get:function(){return o.arrayMove}});var a=n(1952),i=r(a),l=n(1953),u=r(l),s=n(1954),c=r(s);t.SortableContainer=i.default,t.SortableElement=u.default,t.SortableHandle=c.default,t.sortableContainer=i.default,t.sortableElement=u.default,t.sortableHandle=c.default},2015:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),s=r(u),c=n(3),f=r(c),d=n(59),p=r(d),h=n(322),y=r(h),v=n(108),m=r(v),b=p.default.div.withConfig({displayName:"MiniMap__Container",componentId:"s1681r3i-0"})(["position:relative;border-radius:5px;background-color:#FFFFFF;border:1px solid ",";"],y.default.placeholder),g=p.default.div.withConfig({displayName:"MiniMap__Cover",componentId:"s1681r3i-1"})(["width:120px;height:120px;float:left;"]),x=p.default.div.withConfig({displayName:"MiniMap__Content",componentId:"s1681r3i-2"})(["margin-left:120px;color:",";padding:15px;"],y.default.blackColor),_=p.default.div.withConfig({displayName:"MiniMap__CidNumberText",componentId:"s1681r3i-3"})(["color:",";font-size:16px;font-weight:200;"],y.default.middleBlack),O=p.default.div.withConfig({displayName:"MiniMap__ItemNameText",componentId:"s1681r3i-4"})(["color:",";font-size:18px;padding-top:15px;font-weight:300;"],y.default.blackColor),w=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.cover,n=e.cidNumber,r=e.itemName;return s.default.createElement(b,{className:"clear"},s.default.createElement(g,null,s.default.createElement(m.default,{src:t,style:{borderBottomLeftRadius:4,borderTopLeftRadius:4}})),s.default.createElement(x,null,s.default.createElement(_,null,n),s.default.createElement(O,null,r)))}}]),t}(s.default.Component);w.propTypes={cover:f.default.string.isRequired,cidNumber:f.default.string.isRequired,itemName:f.default.string.isRequired},t.default=w},2088:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ItemSueOption=[{name:"未出貨未還貨",val:100},{name:"收到已損壞物品",val:200},{name:"與訂單內容不符",val:300},{name:"詐騙",val:400},{name:"退貨",val:600},{name:"其他",val:500}],t.ServiceSueOption=[{name:"與訂單內容不符",val:100},{name:"被詐騙",val:200},{name:"聯絡不到對方",val:300},{name:"沒有履行服務",val:400},{name:"其他",val:500}],t.SpaceSueOption=[{name:"與訂單內容不符",val:100},{name:"被詐騙",val:200},{name:"聯絡不到對方",val:300},{name:"沒有履行服務",val:400},{name:"其他",val:500}],t.UsedItemSueOption=[{name:"未出貨未還貨",val:100},{name:"收到已損壞物品",val:200},{name:"與訂單內容不符",val:300},{name:"詐騙",val:400},{name:"退貨",val:600},{name:"其他",val:500}]},2234:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),s=r(u),c=n(3),f=r(c),d=n(5),p=r(d),h=n(2015),y=r(h),v=n(527),m=r(v),b=n(520),g=r(b),x=n(544),_=r(x),O=n(323),w=r(O),E=n(524),C=r(E),k=n(86),S=r(k),j=n(1909),D=r(j),T=n(1590),P=r(T),I=n(203),R=r(I),N=n(2088),M=n(2343),L=r(M),A=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={option:-1,check:!1,reason:"",showNeedCheck:!1,showNeedReason:!1},n.uploadData={cid:0,pid:0,img1:null,img2:null,img3:null,reason:"",targetUid:"",type:"",sueType:0,sueCategory:0,sueStage:0},n.onSave=n.onSave.bind(n),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.props.dispatchRecords()}},{key:"componentWillUnmount",value:function(){this.props.dispatchReset()}},{key:"onSave",value:function(){var e=this.state,t=e.check,n=e.option,r=!0,o=!1,a=!1;if(t||(r=!1,o=!0),n<=0&&(r=!1,a=!0),!r)return this.setState({showNeedCheck:o,showNeedReason:a});var i=this.uploadData,l=i.pid,u=i.reason,s=i.targetUid,c=i.type,f=i.sueType,d=i.sueCategory,p=i.sueStage,h=f+d+p;return this.props.dispatchSend(l,h,u,s,c),0}},{key:"renderSueOption",value:function(e){var t=this,n=[];switch(e){case"ITEM":n=N.ItemSueOption;break;case"SERVICE":n=N.ServiceSueOption;break;case"SPACE":n=N.SpaceSueOption;break;case"USED_ITEM":n=N.ItemSueOption}return s.default.createElement("div",{styleName:"sue-option-background-style"},n.map(function(e){var n=e.name,r=e.val;return s.default.createElement("div",{key:r,styleName:"sue-option-content-style"},s.default.createElement(C.default,{checked:t.state.option===r,onChange:function(){t.uploadData.type=n,t.uploadData.sueCategory=r,t.setState({option:r})}},s.default.createElement("span",{style:{color:"#333"}},n)))}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.sueDetail,r=t.sueGallery,o=n.record;if(!o||o.contractstage>1e3)return null;if(0===this.uploadData.cid){var a=this.props.currentUser,i=a.uid===o.owneruid;this.uploadData.pid=o.pid,this.uploadData.cid=o.cid,this.uploadData.targetUid=i?o.lesseeuid:o.owneruid,this.uploadData.sueType=i?1e3:2e3,this.uploadData.sueStage=o.contractstage%100}var l=this.props,u=l.dispatchCreateCover,c=l.dispatchDeleteCover,f=l.dispatchChangeOrders,d=this.state,p=d.reason,h=d.showNeedCheck,v=d.showNeedReason;return s.default.createElement("div",{styleName:"sue-form-content-border"},s.default.createElement("div",{styleName:"sue-form-header"},"申訴"),s.default.createElement("div",{styleName:"sue-form-section-background"},s.default.createElement(y.default,{cover:""+o.img1,cidNumber:"合約編號："+o.cid_no,itemName:""+o.pname}),s.default.createElement("div",{styleName:"sue-red-text-hint"},"當您提出申訴後，雙方必須在14天內私下進行協議， 並提出協議文件（雙方簽名、金額分配及簽署日期） 寄到ShareApp郵政信箱customer@shareapp.com.tw， 我們再依照協議後的結果進行撥款。")),s.default.createElement("div",{styleName:"sue-form-section-background"},s.default.createElement("div",{styleName:"sue-form-section-title"},"申訴原因"),v&&s.default.createElement(R.default,{text:"請選擇申訴原因",outerStyle:{display:"inline-block",marginLeft:"20px"}}),this.renderSueOption(o.type)),s.default.createElement("div",{styleName:"sue-form-section-background"},s.default.createElement("div",{styleName:"sue-form-section-title"},"備註"),s.default.createElement("div",{styleName:"sue-form-section-subtitle"},"（非必填）"),s.default.createElement(g.default,{headerText:" ",limiter:s.default.createElement(_.default,{limit:250,length:p.length})},s.default.createElement(m.default,{ref:function(t){return e.reasonInput=t},placeholder:"您可以在這裡留下修改的問題...",onChange:function(t){e.uploadData.reason=t,e.setState({reason:t})},value:p,constraints:w.default.descript,validateOnBlur:!0}))),s.default.createElement("div",{styleName:"sue-form-section-background"},s.default.createElement("div",{styleName:"sue-form-section-title"},"上傳照片"),s.default.createElement("div",{styleName:"sue-form-section-subtitle"},"（非必填）"),s.default.createElement("div",{styleName:"sue-gallery-container-style"},s.default.createElement(D.default,{addCoverLabel:!1,covers:r,createCover:function(e){return u(e,o.cid_no)},deleteCover:c,changeOrders:f,openCropper:function(){}}))),s.default.createElement("div",{styleName:"sue-checkbox-container-style"},s.default.createElement(P.default,{checked:this.state.check,onChange:function(t){return e.setState({check:t})}},s.default.createElement("span",{styleName:"sue-checkbox-text-style"},"我已確認以上的申訴資訊")),h&&s.default.createElement(R.default,{text:"請勾選確認資訊",outerStyle:{display:"inline-block",marginLeft:"20px"}})),s.default.createElement("div",null,s.default.createElement("div",{styleName:"sue-form-botton-style"},s.default.createElement(S.default,{colorType:"greenBorder",size:"sm",width:120,content:"取消",onClick:this.props.dispatchCancel})),s.default.createElement("div",{styleName:"sue-form-botton-style"},s.default.createElement(S.default,{colorType:"green",size:"sm",width:120,content:"送出",onClick:this.onSave}))))}}]),t}(s.default.Component);A.defaultProps={currentUser:{uid:null}},A.propTypes={sueGallery:f.default.arrayOf(f.default.object).isRequired,dispatchRecords:f.default.func.isRequired,dispatchSend:f.default.func.isRequired,dispatchReset:f.default.func.isRequired,dispatchCreateCover:f.default.func.isRequired,dispatchDeleteCover:f.default.func.isRequired,dispatchChangeOrders:f.default.func.isRequired,dispatchCancel:f.default.func.isRequired,sueDetail:f.default.shape({isFetching:f.default.bool}).isRequired,currentUser:f.default.shape({uid:f.default.string})},t.default=(0,p.default)(A,L.default)},2343:function(e,t){e.exports={"sue-form-content-border":"components_sue-form-content-border_1om6K","sue-form-header":"components_sue-form-header_ka8EK","sue-form-section-background":"components_sue-form-section-background_2XemG","sue-form-section-title":"components_sue-form-section-title_3_CO5","sue-form-section-subtitle":"components_sue-form-section-subtitle_bWGhf","sue-option-background-style":"components_sue-option-background-style_3SXY1","sue-option-content-style":"components_sue-option-content-style_3_-m0","sue-red-text-hint":"components_sue-red-text-hint_3TSpp","sue-gallery-container-style":"components_sue-gallery-container-style_1bM1c","sue-checkbox-container-style":"components_sue-checkbox-container-style_2Xyv8","sue-checkbox-text-style":"components_sue-checkbox-text-style_1OdX3","sue-form-botton-style":"components_sue-form-botton-style_wW5tS"}}});