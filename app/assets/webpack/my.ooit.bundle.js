webpackJsonp([10],{1472:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(19),a=r(2165),o=function(e){return e&&e.__esModule?e:{default:e}}(a),i=r(87),u=function(e,t){var r=e.environment,n=e.myOrder,a=e.auth,o=t.params;return{environment:r,myOrder:n,currentUser:a.currentUser,tabName:o.tabName}},c=function(e,t){var r=t.params;return{dispatch:e,dispatchUnreadCount:function(){return e((0,i.checkUnreadCount)({isOwnerPage:!0}))},dispatchRecords:function(){return e((0,i.fetchRecords)(i.ROLE_OWNER,i.TYPE_ITEM,r.tabName))},dispatchReset:function(){return e((0,i.reset)())}}};t.default=(0,n.connect)(u,c)(o.default)},1475:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(19),a=r(2168),o=function(e){return e&&e.__esModule?e:{default:e}}(a),i=r(87),u=function(e,t){var r=e.environment,n=e.myOrder,a=e.auth,o=t.params;return{environment:r,myOrder:n,currentUser:a.currentUser,tabName:o.tabName}},c=function(e,t){var r=t.params;return{dispatch:e,dispatchUnreadCount:function(){return e((0,i.checkUnreadCount)({isOwnerPage:!0}))},dispatchRecords:function(){return e((0,i.fetchRecords)(i.ROLE_OWNER,i.TYPE_USED_ITEM,r.tabName))},dispatchReset:function(){return e((0,i.reset)())}}};t.default=(0,n.connect)(u,c)(o.default)},1551:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(0),s=n(c),l=r(3),d=n(l),f=r(11),p=n(f),m=r(155),h=n(m),_=r(5),y=n(_),E=r(1552),b=n(E),v=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"renderContent",value:function(){var e=this.props,t=e.isInitialFetching,r=e.noDataText,n=e.children;return t?s.default.createElement(h.default,null):r?s.default.createElement("div",{styleName:"no-data"},r):n}},{key:"render",value:function(){var e=this.props.minHeight;return s.default.createElement("div",{styleName:"container",style:{minHeight:e}},this.renderContent())}}]),t}(s.default.Component);v.defaultProps={minHeight:400,noDataText:null},v.propTypes={children:p.default.children.isRequired,noDataText:d.default.string,minHeight:d.default.number,isInitialFetching:d.default.bool.isRequired},t.default=(0,y.default)(v,b.default)},1552:function(e,t){e.exports={container:"ListContainer_container_2ZP1q","no-data":"ListContainer_no-data_2O1SC"}},1564:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(0),s=n(c),l=r(3),d=n(l),f=r(5),p=n(f),m=r(1566),h=n(m),_=r(11),y=n(_),E=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.icon,r=e.titleText,n=e.children;return s.default.createElement("div",{styleName:"container"},s.default.createElement("div",{styleName:"header"},s.default.createElement("h1",{styleName:"title"},t&&t({size:48,style:{verticalAlign:"top"}}),s.default.createElement("span",{styleName:"text"},r))),s.default.createElement("div",{styleName:"body"},n))}}]),t}(s.default.Component);E.defaultProps={icon:null},E.propTypes={icon:d.default.func,titleText:d.default.string.isRequired,children:y.default.children.isRequired},t.default=(0,p.default)(E,h.default)},1566:function(e,t){e.exports={container:"Container_container_1jgWb",header:"Container_header_2w5kE",title:"Container_title_2jnjz",text:"Container_text_3f4tb",body:"Container_body_12gU_"}},1641:function(e,t,r){function n(e,t){return null!=e&&o(e,t,a)}var a=r(1772),o=r(552);e.exports=n},1714:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.USED_ITEM=t.SPACE=t.SERVICE=t.ITEM=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(0),s=n(c),l=r(3),d=n(l),f=r(23),p=r(518),m=n(p),h=r(14),_=n(h),y=r(5),E=n(y),b=r(1765),v=n(b),O=t.ITEM=0,g=t.SERVICE=1,T=t.SPACE=2,P=t.USED_ITEM=3,N=_.default.bind(v.default),w=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"renderButtton",value:function(e){var t=this.props,r=t.activeType,n=t.unreadCount,a=t.isOwner,o=r===e,i="",u="/",c=!1;if(a)switch(e){case O:i=m.default.ownerOrderItemPage.text,u=m.default.ownerOrderItemPage.path,c=n.item>0;break;case g:i=m.default.ownerOrderServicePage.text,u=m.default.ownerOrderServicePage.path,c=n.service>0;break;case T:i=m.default.ownerOrderSpacePage.text,u=m.default.ownerOrderSpacePage.path,c=n.space>0;break;case P:i=m.default.ownerOrderUsedItemPage.text,u=m.default.ownerOrderUsedItemPage.path,c=n.used_item>0}else switch(e){case O:i=m.default.lesseeOrderItemPage.text,u=m.default.lesseeOrderItemPage.path,c=n.item>0;break;case g:i=m.default.lesseeOrderServicePage.text,u=m.default.lesseeOrderServicePage.path,c=n.service>0;break;case T:i=m.default.lesseeOrderSpacePage.text,u=m.default.lesseeOrderSpacePage.path,c=n.space>0;break;case P:i=m.default.lesseeOrderUsedItemPage.text,u=m.default.lesseeOrderUsedItemPage.path,c=n.used_item>0}return s.default.createElement("div",{className:N("linker",{selected:o})},s.default.createElement(f.Link,{to:u},s.default.createElement("div",{styleName:"text"},i),s.default.createElement("div",{className:N("count",{colored:c})})))}},{key:"render",value:function(){return s.default.createElement("div",{styleName:"container"},this.renderButtton(O),this.renderButtton(g),this.renderButtton(T),this.renderButtton(P))}}]),t}(s.default.Component);w.defaultProps={isOwner:!1},w.propTypes={isOwner:d.default.bool,activeType:d.default.number.isRequired,unreadCount:d.default.shape({item:d.default.number,service:d.default.number,space:d.default.number,used_item:d.default.number}).isRequired},t.default=(0,E.default)(w,v.default)},1715:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(1641),c=n(u),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(0),d=n(l),f=r(3),p=n(f),m=r(23),h=r(14),_=n(h),y=r(5),E=n(y),b=r(1766),v=n(b),O=_.default.bind(v.default),g=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"renderCircle",value:function(e){var t=this.props.unreads;return!(0,c.default)(t,e)||t[e]<=0?null:d.default.createElement("div",{styleName:"notice-circle"},t[e])}},{key:"render",value:function(){var e=this,t=this.props.navs;return d.default.createElement("div",{styleName:"container"},d.default.createElement("ul",{className:"clear"},t.map(function(t,r){return d.default.createElement(m.Link,{key:""+(r+1),to:t.href,activeClassName:O("active"),onlyActiveOnIndex:!0},d.default.createElement("li",null,t.name,e.renderCircle(t.tabName)))})))}}]),t}(d.default.Component);g.propTypes={navs:p.default.arrayOf(p.default.shape({name:p.default.string.isRequired,href:p.default.string.isRequired,tabName:p.default.string.isRequired}).isRequired).isRequired,unreads:p.default.shape({}).isRequired},g.defaultProps={unreads:[]},t.default=(0,E.default)(g,v.default)},1765:function(e,t){e.exports={container:"OrderNav_container_Jmr0V",linker:"OrderNav_linker_3TP2X",text:"OrderNav_text_cmkmF",count:"OrderNav_count_cbF0-",colored:"OrderNav_colored_10B30",selected:"OrderNav_selected_1tHOp",hover:"OrderNav_hover_3EU1a"}},1766:function(e,t){e.exports={container:"OrderNavigation_container_1v-eD","notice-circle":"OrderNavigation_notice-circle_2rQRJ",active:"OrderNavigation_active_1PFBs"}},1772:function(e,t){function r(e,t){return null!=e&&a.call(e,t)}var n=Object.prototype,a=n.hasOwnProperty;e.exports=r},1964:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(0),l=n(s),d=r(3),f=n(d),p=r(23),m=r(2),h=r(156),_=n(h),y=r(108),E=n(y),b=r(109),v=n(b),O=r(86),g=n(O),T=r(132),P=r(535),N=r(18),w=r(32),R=r(159),C=r(540),I=r(5),S=n(I),A=r(14),B=n(A),U=r(1989),k=n(U),x=B.default.bind(k.default),j={borderRadius:"100px",padding:"7px 16px",marginLeft:10,display:"inline-block"},M={size:"sm",width:"auto",style:j},L=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),c(t,[{key:"generateEditAddress",value:function(){var e=this.props,t=e.type,r=e.cid,n=e.pid;switch(t){case"ITEM":return function(){return p.browserHistory.push(m.reservationGoods.indexPath(n,r))};case"SERVICE":return function(){return p.browserHistory.push(m.reservationService.indexPath(n,r))};case"SPACE":return function(){return p.browserHistory.push(m.reservationSpace.indexPath(n,r))};default:return function(){}}}},{key:"generatePayment",value:function(){var e=this.props,t=e.paymenttype,r=e.cid,n=e.dispatch;switch(t){case 4:return function(){n((0,C.doCreditCardPayment)(r)).catch(function(e){alert(e)})};case 1:return function(){var e={};n((0,w.popupATMBank)(e)),n((0,C.doATMPayment)(r))};default:return function(){}}}},{key:"callScorePanel",value:function(e){var t=this;this.props.dispatch((0,w.popupScoreRating)({isView:e,targetName:this.props.targetName,targetScore:this.props.targetScore,targetComment:this.props.targetComment,targetUrl:this.props.targetUrl,onScore:function(e,r){t.props.dispatch((0,C.doScore)(t.props.cid,e,r)).then(function(){t.props.dispatch((0,C.resetAction)()),t.props.dispatchRefresh&&t.props.dispatchRefresh()}).catch(function(e){alert(e)})}}))}},{key:"generateString",value:function(){var e=this.props,t=e.isOwner,r=e.stage,n=e.startDate,a={title:"",text:""};if(r<1e3)return t?(0,P.generateOwnerItemString)(r,n):(0,P.generateLesseeItemString)(r,n);if(r>1e3&&r<3e3){var o=r%100;a.title=o<11?"申訴中":"申訴完成"}else a.title="合約已取消";return a}},{key:"renderAction",value:function(){return this.props.isOwner?this.renderOwnerActions():this.renderLesseeActions()}},{key:"renderOwnerActions",value:function(){var e=this,t=this.props,r=t.cid,n=t.display,a=t.dispatch,o=t.dispatchRefresh,i=n.can_ship,c=n.can_score,s=n.can_711,d=n.can_return_confirm,f=n.view_score;return l.default.createElement("div",{styleName:"action-section"},i&&l.default.createElement(g.default,u({colorType:"green"},M,{content:"安排出貨",onClick:function(){(0,_.default)((0,h.orderConfig)("出貨前是否要上傳照片紀錄？")).then(function(){p.browserHistory.push(m.orderDetail.indexPath(r))}).catch(function(){a((0,C.doShipGoods)(r)).then(function(){e.props.dispatch((0,C.resetAction)()),e.props.dispatchRefresh()}).catch(function(e){(0,_.default)((0,h.errorConfig)("出貨失敗",e))})})}})),s&&l.default.createElement(g.default,u({},M,{colorType:"green",content:"寄件代碼",onClick:function(){a((0,w.popupSevenNo)({options:{}})),a((0,C.getShipOrder)(r,"OWNER_SEND"))}})),d&&l.default.createElement(g.default,u({},M,{colorType:"green",content:"確認還貨",onClick:function(){(0,_.default)((0,h.orderConfig)("確認前是否要上傳照片紀錄？")).then(function(){p.browserHistory.push(m.orderDetail.indexPath(r))}).catch(function(){a((0,C.doReceiveConfirm)(r)).then(function(){a((0,C.resetAction)()),o()}).catch(function(e){(0,_.default)((0,h.errorConfig)("確認還貨失敗",e))})})}})),s&&l.default.createElement(g.default,u({},M,{colorType:"green",content:"寄件代碼",onClick:function(){a((0,w.popupSevenNo)({options:{}})),a((0,C.getShipOrder)(r,"LESSEE_SEND"))}})),c&&l.default.createElement(g.default,u({},M,{colorType:"green",content:"評分",onClick:function(){return e.callScorePanel(!1)}})),f&&l.default.createElement(g.default,u({},M,{colorType:"green",content:"查看評價",onClick:function(){return e.callScorePanel(!0)}})),l.default.createElement(g.default,u({},M,{colorType:"greenBorder",content:"查看詳情",onClick:function(){return p.browserHistory.push(m.orderDetail.indexPath(r))}})))}},{key:"renderLesseeActions",value:function(){var e=this,t=this.props,r=t.display,n=t.pid,a=t.cid,o=t.dispatch,i=t.dispatchRefresh,c=r.can_edit,s=r.can_pay,d=r.can_ship_confirm,f=r.can_return,y=r.can_score,E=r.view_score;return l.default.createElement("div",{styleName:"action-section"},c&&l.default.createElement(g.default,u({},M,{colorType:"green",content:"修改預訂單",onClick:function(){p.browserHistory.push(m.reservationGoods.indexPath(n,a))}})),s&&l.default.createElement(g.default,u({},M,{colorType:"green",content:"付款",onClick:this.generatePayment()})),d&&l.default.createElement(g.default,u({},M,{colorType:"green",content:"確認收貨",onClick:function(){(0,_.default)((0,h.orderConfig)("確認前是否要上傳照片紀錄？")).then(function(){p.browserHistory.push(m.orderDetail.indexPath(a))}).catch(function(){o((0,C.doReceiveConfirm)(a)).then(function(){o((0,C.resetAction)()),i()}).catch(function(e){(0,_.default)((0,h.errorConfig)("確認收貨失敗",e))})})}})),f&&l.default.createElement(g.default,u({},M,{colorType:"green",content:"還貨",onClick:function(){(0,_.default)((0,h.orderConfig)("還貨前是否要上傳照片紀錄？")).then(function(){p.browserHistory.push(m.orderDetail.indexPath(a))}).catch(function(){o((0,C.doReturn)(a)).then(function(){o((0,C.resetAction)()),i()}).catch(function(e){(0,_.default)((0,h.errorConfig)("還貨失敗",e))})})}})),y&&l.default.createElement(g.default,u({},M,{colorType:"green",content:"評分",onClick:function(){return e.callScorePanel(!1)}})),E&&l.default.createElement(g.default,u({},M,{colorType:"green",content:"查看評價",onClick:function(){return e.callScorePanel(!0)}})),l.default.createElement(g.default,u({},M,{colorType:"greenBorder",content:"查看詳情",onClick:function(){return p.browserHistory.push(m.orderDetail.indexPath(a))}})))}},{key:"render",value:function(){var e=this.props,t=e.photoHead,r=e.photoName,n=e.photoUid,a=e.cidNo,o=e.unit,i=e.itemName,u=e.itemImgUrl,c=e.startDate,s=e.endDate,d=e.totalPrice,f=e.display,h=e.isRead,_=e.dispatch,y=this.generateString();return l.default.createElement("div",{className:"clear "+x("board-border",{colored:!h})},l.default.createElement("div",{styleName:"header-section"},l.default.createElement(p.Link,{to:m.userprofilePaths.indexPath(n),styleName:"header-avatar-style"},l.default.createElement(v.default,{src:t,width:40})),l.default.createElement(p.Link,{to:m.userprofilePaths.indexPath(n),styleName:"header-name-style"},r),l.default.createElement("div",{styleName:"header-chat-style"},l.default.createElement(g.default,{colorType:"greenBorder",size:"sm",style:{fontSize:14,lineHeight:"14px",padding:"7px 15px"},content:"私訊",onClick:function(){_((0,R.addToChatRoom)({uid:n,name:r,picture:t}))}})),l.default.createElement("div",{styleName:"mini-note-section"},y.title)),l.default.createElement("div",{className:"clear",styleName:"body-section"},l.default.createElement("div",{styleName:"pic-style"},l.default.createElement(E.default,{src:u,width:120})),l.default.createElement("div",{styleName:"content-style"},l.default.createElement("div",{styleName:"hint-style"},"訂單編號："+a),l.default.createElement("div",{styleName:"text-style"},""+i),l.default.createElement("div",{styleName:"date-style"},"使用期間：$",(0,N.formatDate)(c),"～$",(0,N.formatDate)(s)),l.default.createElement("div",{styleName:"price-section"},l.default.createElement("div",{styleName:"unit-style"},"使用",(0,N.rangeDiff)(c,s,!0),"天X",o,"件"),l.default.createElement("div",{styleName:"price-style"},"總計 ",(0,T.formatCurrency)(d))))),l.default.createElement("div",{styleName:"hint-section"},y.text),this.renderAction(f))}}]),t}(l.default.Component);L.defaultProps={isOwner:!1,lesseeReceive:!1,targetScore:0,targetComment:"",photoHead:"",targetUrl:""},L.propTypes={photoHead:f.default.string,photoName:f.default.string.isRequired,photoUid:f.default.string.isRequired,type:f.default.string.isRequired,paymenttype:f.default.number.isRequired,stage:f.default.number.isRequired,cid:f.default.number.isRequired,pid:f.default.number.isRequired,cidNo:f.default.string.isRequired,itemName:f.default.string.isRequired,itemImgUrl:f.default.string.isRequired,targetName:f.default.string.isRequired,targetUrl:f.default.string,targetScore:f.default.number,targetComment:f.default.string,startDate:f.default.number.isRequired,endDate:f.default.number.isRequired,totalPrice:f.default.number.isRequired,unit:f.default.number.isRequired,isOwner:f.default.bool,isRead:f.default.bool.isRequired,display:f.default.shape({can_ship:f.default.bool,can_711:f.default.bool,can_ship_confirm:f.default.bool,can_edit:f.default.bool,can_pay:f.default.bool,can_score:f.default.bool,view_score:f.default.bool}).isRequired,dispatch:f.default.func.isRequired,dispatchRefresh:f.default.func.isRequired},t.default=(0,S.default)(L,k.default)},1989:function(e,t){e.exports={"board-border":"OrderItemBoard_board-border_1U-iE",colored:"OrderItemBoard_colored_26RUF","header-section":"OrderItemBoard_header-section_2xzo-","header-avatar-style":"OrderItemBoard_header-avatar-style_3uopR","header-name-style":"OrderItemBoard_header-name-style_1T86o","mini-note-section":"OrderItemBoard_mini-note-section_1CtAl","header-chat-style":"OrderItemBoard_header-chat-style_YlQ4n","body-section":"OrderItemBoard_body-section_2y4T9","pic-style":"OrderItemBoard_pic-style_QoOqm","content-style":"OrderItemBoard_content-style_3vnC-","date-style":"OrderItemBoard_date-style_3xx1z","text-style":"OrderItemBoard_text-style_1wiE0","hint-style":"OrderItemBoard_hint-style_1fEk2","price-section":"OrderItemBoard_price-section_2dZyh","unit-style":"OrderItemBoard_unit-style_3WJk8","price-style":"OrderItemBoard_price-style_SXktZ","footer-section":"OrderItemBoard_footer-section_3JzXk","hint-section":"OrderItemBoard_hint-section_NSrmi","action-section":"OrderItemBoard_action-section_2NQvA"}},2019:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(0),l=n(s),d=r(3),f=n(d),p=r(23),m=r(2),h=r(108),_=n(h),y=r(109),E=n(y),b=r(86),v=n(b),O=r(132),g=r(535),T=r(5),P=n(T),N=r(14),w=n(N),R=r(32),C=r(159),I=r(540),S=r(2037),A=n(S),B=w.default.bind(A.default),U=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),c(t,[{key:"generateEditAddress",value:function(){var e=this.props.order,t=e.cid,r=e.pid;return function(){return p.browserHistory.push(m.reservationUsedGoods.indexPath(r,t))}}},{key:"generatePayment",value:function(){var e=this.props.order,t=e.paymenttype,r=e.cid,n=e.dispatch;switch(t){case 4:return function(){n((0,I.doCreditCardPayment)(r)).catch(function(e){alert(e)})};case 1:return function(){var e={};n((0,R.popupATMBank)(e)),n((0,I.doATMPayment)(r))};default:return function(){}}}},{key:"callScorePanel",value:function(e){var t=this,r=this.props,n=r.isOwner,a=r.order,o=a.cid,i=a.owner_comment,u=a.lessee_comment,c=a.lesseescore,s=a.ownerscore,l=n?c:s,d=n?u:i;this.props.dispatch((0,R.popupScoreRating)({isView:e,targetName:this.props.photoName,targetScore:l,targetComment:d,targetUrl:this.props.photoHead,onScore:function(e,r){t.props.dispatch((0,I.doScore)(o,e,r)).then(function(){t.props.dispatch((0,I.resetAction)()),t.props.dispatchRefresh&&t.props.dispatchRefresh()}).catch(function(e){alert(e)})}}))}},{key:"generateString",value:function(){var e=this.props,t=e.isOwner,r=e.order,n=r.contractstage,a=r.lessee_receive,o=r.lesseescore,i=r.ownerscore,u={title:"",text:""};if(n<1e3)return t?(0,g.generateOwnerUsedItemString)(n,a,o):(0,g.generateLesseeUsedItemString)(n,a,i);if(n>1e3&&n<3e3){var c=n%100;u.title=c<11?"申訴中":"申訴完成"}else u.title="合約已取消";return u}},{key:"renderAction",value:function(){return!0===this.props.isOwner?this.renderOwnerActions():this.renderLesseeActions()}},{key:"renderOwnerActions",value:function(){var e=this,t=this.props.order,r=t.display,n=t.cid,a=r.can_ship,o=r.can_score,i=r.view_score,c={size:"sm",width:"auto",style:{borderRadius:"100px",padding:"7px 16px",marginLeft:10,display:"inline-block"}};return l.default.createElement("div",{styleName:"action-section"},a&&l.default.createElement(v.default,u({colorType:"green"},c,{content:"安排出貨",onClick:function(){e.props.dispatch((0,I.doShipGoods)(n)).then(function(){e.props.dispatch((0,I.resetAction)()),e.props.dispatchRefresh&&e.props.dispatchRefresh()}).catch(function(e){alert(e)})}})),o&&l.default.createElement(v.default,u({colorType:"green"},c,{content:"評分",onClick:function(){return e.callScorePanel(!1)}})),i&&l.default.createElement(v.default,u({colorType:"green"},c,{content:"查看評價",onClick:function(){return e.callScorePanel(!0)}})),l.default.createElement(v.default,u({colorType:"greenBorder"},c,{content:"查看詳情",onClick:function(){return p.browserHistory.push(m.orderDetail.indexPath(n))}})))}},{key:"renderLesseeActions",value:function(){var e=this,t=this.props.order,r=t.display,n=t.cid,a=r.can_edit,o=r.can_pay,i=r.can_ship_confirm,c=r.can_score,s=r.view_score,d={size:"sm",width:"auto",style:{borderRadius:"100px",padding:"7px 16px",marginLeft:10,display:"inline-block"}};return l.default.createElement("div",{styleName:"action-section"},a&&l.default.createElement(v.default,u({colorType:"green"},d,{content:"修改預訂單",onClick:this.generateEditAddress()})),o&&l.default.createElement(v.default,u({colorType:"green"},d,{content:"付款",onClick:this.generatePayment()})),i&&l.default.createElement(v.default,u({colorType:"green"},d,{content:"確認收貨",onClick:function(){e.props.dispatch((0,I.doReceiveConfirm)(n)).then(function(){e.props.dispatch((0,I.resetAction)()),e.props.dispatchRefresh&&e.props.dispatchRefresh()}).catch(function(e){alert(e)})}})),c&&l.default.createElement(v.default,u({colorType:"green"},d,{content:"評分",onClick:function(){return e.callScorePanel(!1)}})),s&&l.default.createElement(v.default,u({colorType:"green"},d,{content:"查看評價",onClick:function(){return e.callScorePanel(!0)}})),l.default.createElement(v.default,u({colorType:"greenBorder"},d,{content:"查看詳情",onClick:function(){return p.browserHistory.push(m.orderDetail.indexPath(n))}})))}},{key:"render",value:function(){var e=this.props,t=e.photoHead,r=e.photoName,n=e.photoUid,a=e.isRead,o=e.order,i=o.cid_no,u=o.unit,c=o.pname,s=o.img1,d=o.lesseepayfee,f=e.dispatch,p=this.generateString();return l.default.createElement("div",{className:"clear "+B("board-border",{colored:!a})},l.default.createElement("div",{styleName:"header-section"},l.default.createElement("div",{styleName:"header-avatar-style"},l.default.createElement(E.default,{src:t,width:40})),l.default.createElement("div",{styleName:"header-name-style"},r),l.default.createElement("div",{styleName:"header-chat-style"},l.default.createElement(v.default,{colorType:"greenBorder",size:"sm",style:{fontSize:14,lineHeight:"14px",padding:"7px 15px"},content:"私訊",onClick:function(){return f((0,C.addToChatRoom)({uid:n,name:r,picture:t}))}})),l.default.createElement("div",{styleName:"mini-note-section"},p.title)),l.default.createElement("div",{styleName:"body-section",className:"clear"},l.default.createElement("div",{styleName:"pic-style"},l.default.createElement(_.default,{src:s,width:120})),l.default.createElement("div",{styleName:"content-style"},l.default.createElement("div",{styleName:"hint-style"},"訂單編號："+i),l.default.createElement("div",{styleName:"text-style"},""+c),l.default.createElement("div",{styleName:"price-section"},l.default.createElement("div",{styleName:"unit-style"},u,"件"),l.default.createElement("div",{styleName:"price-style"},"總計 ",(0,O.formatCurrency)(d))))),l.default.createElement("div",{styleName:"hint-section"},p.text),this.renderAction())}}]),t}(l.default.Component);U.defaultProps={isOwner:!1,lesseeReceive:!1,targetScore:0,photoHead:""},U.propTypes={photoHead:f.default.string,photoName:f.default.string.isRequired,photoUid:f.default.string.isRequired,isOwner:f.default.bool,isRead:f.default.bool.isRequired,order:f.default.shape({cid:f.default.number}).isRequired,dispatch:f.default.func.isRequired,dispatchRefresh:f.default.func.isRequired},t.default=(0,P.default)(U,A.default)},2037:function(e,t){e.exports={"board-border":"UsedItemBoard_board-border_3bvxA",colored:"UsedItemBoard_colored_2dT2D","header-section":"UsedItemBoard_header-section_3sXVM","header-avatar-style":"UsedItemBoard_header-avatar-style_cSx8K","header-name-style":"UsedItemBoard_header-name-style_24vca","mini-note-section":"UsedItemBoard_mini-note-section_2HEPM","header-chat-style":"UsedItemBoard_header-chat-style_tW_sK","body-section":"UsedItemBoard_body-section_fiE-w","pic-style":"UsedItemBoard_pic-style_a1St-","content-style":"UsedItemBoard_content-style_1lOpn","date-style":"UsedItemBoard_date-style_1gbGJ","text-style":"UsedItemBoard_text-style_1-L9B","hint-style":"UsedItemBoard_hint-style_lYSPT","price-section":"UsedItemBoard_price-section_1xHMZ","unit-style":"UsedItemBoard_unit-style_3df9i","price-style":"UsedItemBoard_price-style_lP6UZ","footer-section":"UsedItemBoard_footer-section_1iqau","hint-section":"UsedItemBoard_hint-section_rINbr","action-section":"UsedItemBoard_action-section_2dZVn"}},2165:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(0),s=n(c),l=r(3),d=n(l),f=r(2),p=r(1551),m=n(p),h=r(1964),_=n(h),y=r(518),E=n(y),b=r(1714),v=n(b),O=r(1715),g=n(O),T=r(1564),P=n(T),N=r(87),w=E.default.ownerOrder.text,R=function(e){function t(e){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.refreshScreen=r.refreshScreen.bind(r),r}return i(t,e),u(t,[{key:"componentDidMount",value:function(){this.refreshScreen()}},{key:"componentDidUpdate",value:function(e){e.tabName!==this.props.tabName&&this.refreshScreen()}},{key:"componentWillUnmount",value:function(){this.props.dispatchReset()}},{key:"refreshScreen",value:function(){this.props.dispatchReset(),this.props.dispatchRecords(),this.props.dispatchUnreadCount()}},{key:"render",value:function(){var e=this,t=this.props.myOrder;if(null==t)return null;var r=t.records,n=t.isFetching,a=t.unreads,o=t.unreadCount,i=[{name:"收到訂單",href:f.my.ownerOrderItem(N.TAB_REQUEST),tabName:N.TAB_REQUEST},{name:"尚未付款",href:f.my.ownerOrderItem(N.TAB_PAY),tabName:N.TAB_PAY},{name:"待出貨",href:f.my.ownerOrderItem(N.TAB_SHIPPING),tabName:N.TAB_SHIPPING},{name:"待收貨",href:f.my.ownerOrderItem(N.TAB_SHIPPING_CONFIRM),tabName:N.TAB_SHIPPING_CONFIRM},{name:"完成",href:f.my.ownerOrderItem(N.TAB_COMPLETE),tabName:N.TAB_COMPLETE},{name:"取消",href:f.my.ownerOrderItem(N.TAB_CANCEL),tabName:N.TAB_CANCEL},{name:"申訴中",href:f.my.ownerOrderItem(N.TAB_SUE),tabName:N.TAB_SUE},{name:"申訴完成",href:f.my.ownerOrderItem(N.TAB_SUE_COMPLETE),tabName:N.TAB_SUE_COMPLETE}];return s.default.createElement(P.default,{titleText:w},s.default.createElement(v.default,{unreadCount:o,activeType:b.ITEM,isOwner:!0}),s.default.createElement(g.default,{navs:i,unreads:a}),s.default.createElement(m.default,{minHeight:500,noDataText:!1===n&&0===r.length?"尚無任何訂單":null,isInitialFetching:n&&0===r.length},r.map(function(t,r){return s.default.createElement(_.default,{key:""+(r+1),type:"ITEM",photoHead:t.lessee_img,photoName:t.lessee_nick_name,photoUid:t.lesseeuid,stage:t.contractstage,cid:t.cid,pid:t.pid,cidNo:t.cid_no,paymenttype:t.paymenttype,itemName:t.pname,itemImgUrl:t.img1,targetName:t.lessee_nick_name,targetUrl:t.lessee_img,targetScore:t.lesseescore,targetComment:t.lessee_comment,startDate:t.leasestart,endDate:t.leaseend,totalPrice:t.lesseepayfee,unit:t.unit,isOwner:!0,isRead:t.owner_read,lesseeReceive:t.lessee_receive,display:t.display,dispatch:e.props.dispatch,dispatchRefresh:e.refreshScreen})})))}}]),t}(s.default.Component);R.propTypes={dispatchRecords:d.default.func.isRequired,dispatchUnreadCount:d.default.func.isRequired,dispatchReset:d.default.func.isRequired,tabName:d.default.string.isRequired,dispatch:d.default.func.isRequired,myOrder:d.default.shape({isFetching:d.default.bool,unreadCount:d.default.shape({item:d.default.number,service:d.default.number,space:d.default.number,used_item:d.default.number})}).isRequired},t.default=R},2168:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(0),s=n(c),l=r(3),d=n(l),f=r(2),p=r(1551),m=n(p),h=r(2019),_=n(h),y=r(518),E=n(y),b=r(1714),v=n(b),O=r(1715),g=n(O),T=r(1564),P=n(T),N=r(87),w=E.default.ownerOrder.text,R=function(e){function t(e){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.refreshScreen=r.refreshScreen.bind(r),r}return i(t,e),u(t,[{key:"componentDidMount",value:function(){this.refreshScreen()}},{key:"componentDidUpdate",value:function(e){e.tabName!==this.props.tabName&&this.refreshScreen()}},{key:"componentWillUnmount",value:function(){this.props.dispatchReset()}},{key:"refreshScreen",value:function(){this.props.dispatchReset(),this.props.dispatchRecords(),this.props.dispatchUnreadCount()}},{key:"render",value:function(){var e=this,t=this.props.myOrder;if(null==t)return null;var r=t.records,n=t.isFetching,a=t.unreads,o=t.unreadCount,i=[{name:"收到訂單",href:f.my.ownerOrderUsedItem(N.TAB_PAY),tabName:N.TAB_PAY},{name:"待出貨",href:f.my.ownerOrderUsedItem(N.TAB_SHIPPING),tabName:N.TAB_SHIPPING},{name:"運送中",href:f.my.ownerOrderUsedItem(N.TAB_SHIPPING_CONFIRM),tabName:N.TAB_SHIPPING_CONFIRM},{name:"完成",href:f.my.ownerOrderUsedItem(N.TAB_COMPLETE),tabName:N.TAB_COMPLETE},{name:"取消",href:f.my.ownerOrderUsedItem(N.TAB_CANCEL),tabName:N.TAB_CANCEL},{name:"退貨/申訴中",href:f.my.ownerOrderUsedItem(N.TAB_SUE),tabName:N.TAB_SUE},{name:"退貨/申訴完成",href:f.my.ownerOrderUsedItem(N.TAB_SUE_COMPLETE),tabName:N.TAB_SUE_COMPLETE}];return s.default.createElement(P.default,{titleText:w},s.default.createElement(v.default,{unreadCount:o,activeType:b.USED_ITEM,isOwner:!0}),s.default.createElement(g.default,{navs:i,unreads:a}),s.default.createElement(m.default,{minHeight:500,noDataText:!1===n&&0===r.length?"尚無任何訂單":null,isInitialFetching:n&&0===r.length},r.map(function(t,r){return s.default.createElement(_.default,{key:""+(r+1),type:"USED_ITEM",photoHead:t.lessee_img,photoName:t.lessee_nick_name,photoUid:t.lesseeuid,isOwner:!0,isRead:t.owner_read,order:t,dispatch:e.props.dispatch,dispatchRefresh:e.refreshScreen})})))}}]),t}(s.default.Component);R.propTypes={dispatchRecords:d.default.func.isRequired,dispatchUnreadCount:d.default.func.isRequired,dispatchReset:d.default.func.isRequired,tabName:d.default.string.isRequired,dispatch:d.default.func.isRequired,myOrder:d.default.shape({isFetching:d.default.bool,unreadCount:d.default.shape({item:d.default.number,service:d.default.number,space:d.default.number,used_item:d.default.number})}).isRequired},t.default=R},87:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,n){return function(a,o){n===o()[d].expireFlag&&a(v(e,t,r))}}function o(e,t,r){return function(n,o){var i=o(),u=i.auth,c=u.currentUser,s=Date.now();n(b(s)),(0,l.asyncXhrAuthedPost)("/ajax/get_my_order.json",{role_type:e,type:t,uid:c.uid},o()).then(function(t){n(a(t,e,r,s))})}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkUnreadCount=t.reset=t.TAB_NULL=t.TAB_SUE_COMPLETE=t.TAB_SUE=t.TAB_CANCEL=t.TAB_COMPLETE=t.TAB_RETURN_CONFIRM=t.TAB_RETURN=t.TAB_ONGOING=t.TAB_WAITING_TO_GO=t.TAB_SHIPPING_CONFIRM=t.TAB_SHIPPING=t.TAB_PAY=t.TAB_REQUEST=t.TYPE_USED_ITEM=t.TYPE_SPACE=t.TYPE_SERVICE=t.TYPE_ITEM=t.ROLE_BOTH=t.ROLE_LESSEE=t.ROLE_OWNER=void 0;var i=r(1641),u=n(i),c=r(160),s=n(c);t.fetchRecords=o;var l=r(8),d="myOrder",f=function(e){return"MY.ORDER."+e},p=f("FETCHED"),m=f("FETCHED_UNDREAD"),h=f("FETCHING"),_=f("RESET"),y=t.ROLE_OWNER="OWNER",E=t.ROLE_LESSEE="LESSEE",b=(t.ROLE_BOTH="BOTH",t.TYPE_ITEM="ITEM",t.TYPE_SERVICE="SERVICE",t.TYPE_SPACE="SPACE",t.TYPE_USED_ITEM="USED_ITEM",t.TAB_REQUEST="TAB_REQUEST",t.TAB_PAY="TAB_PAY",t.TAB_SHIPPING="TAB_SHIPPING",t.TAB_SHIPPING_CONFIRM="TAB_SHIPPING_CONFIRM",t.TAB_WAITING_TO_GO="TAB_WAITING_TO_GO",t.TAB_ONGOING="TAB_ONGOING",t.TAB_RETURN="TAB_RETURN",t.TAB_RETURN_CONFIRM="TAB_RETURN_CONFIRM",t.TAB_COMPLETE="TAB_COMPLETE",t.TAB_CANCEL="TAB_CANCEL",t.TAB_SUE="TAB_SUE",t.TAB_SUE_COMPLETE="TAB_SUE_COMPLETE",t.TAB_NULL="TAB_NULL",function(e){return{type:h,expireFlag:e}}),v=function(e,t,r){return{type:p,records:e,roleType:t,tabName:r}},O=function(e){return{type:m,unreadCount:e}},g=(t.reset=function(){return{type:_}},t.checkUnreadCount=function(e){var t=e.isOwnerPage;return function(e,r){(0,l.asyncXhrAuthedPost)("/ajax/get_my_unread_count.json",{},r()).then(function(r){e(t?O({item:r.owner_item_unread_count,service:r.owner_service_unread_count,space:r.owner_space_unread_count,used_item:r.owner_used_item_unread_count}):O({item:r.lessee_item_unread_count,service:r.lessee_service_unread_count,space:r.lessee_space_unread_count,used_item:r.lessee_used_item_unread_count}))})}},{expireFlag:null,isFetching:!1,records:[],unreads:{},unreadCount:{item:0,service:0,space:0,used_item:0}});t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments[1],r=[],n={},a="";switch(t.type){case h:return r=[],Object.assign({},e,{records:[],unreads:{},isFetching:!0,expireFlag:t.expireFlag});case p:return n=e.unreads,(0,s.default)(t.records,function(e){a=e.display.tab,a===t.tabName&&r.push(e),(0,u.default)(n,a)?t.roleType===y?n[a]+=e.owner_read?0:1:t.roleType===E?n[a]+=e.lessee_read?0:1:(n[a]+=e.owner_read?0:1,n[a]+=e.lessee_read?0:1):t.roleType===y?n[a]=e.owner_read?0:1:t.roleType===E?n[a]=e.lessee_read?0:1:(n[a]=e.owner_read?0:1,n[a]=e.lessee_read?0:1)}),Object.assign({},e,{isFetching:!1,records:r,unreads:n});case m:return Object.assign({},e,{unreadCount:t.unreadCount});case _:return g;default:return e}}}});