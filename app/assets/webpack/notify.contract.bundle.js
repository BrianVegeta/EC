webpackJsonp([58],{1483:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),a=n(2171),o=function(e){return e&&e.__esModule?e:{default:e}}(a),i=n(215),u=function(e){return{environment:e.environment,notify:e.notify}},c=function(e){return{dispatch:e,dispatchUnreadCount:function(){return e((0,i.fetchUnreadCount)(i.TYPE_CONTRACT))},dispatchReset:function(){return e((0,i.reset)())},dispatchMore:function(){return e((0,i.fetchMoreData)())}}};t.default=(0,r.connect)(u,c)(o.default)},1550:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),f=n(3),s=r(f),d=n(11),p=r(d),y=n(155),h=r(y),_=n(5),m=r(_),b=n(1551),v=r(b),T=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"renderContent",value:function(){var e=this.props,t=e.isInitialFetching,n=e.noDataText,r=e.children;return t?l.default.createElement(h.default,null):n?l.default.createElement("div",{styleName:"no-data"},n):r}},{key:"render",value:function(){var e=this.props.minHeight;return l.default.createElement("div",{styleName:"container",style:{minHeight:e}},this.renderContent())}}]),t}(l.default.Component);T.defaultProps={minHeight:400,noDataText:null},T.propTypes={children:p.default.children.isRequired,noDataText:s.default.string,minHeight:s.default.number,isInitialFetching:s.default.bool.isRequired},t.default=(0,m.default)(T,v.default)},1551:function(e,t){e.exports={container:"ListContainer_container_2ZP1q","no-data":"ListContainer_no-data_2O1SC"}},1559:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),f=n(3),s=r(f),d=n(11),p=r(d),y=n(521),h=r(y),_=n(5),m=r(_),b=n(1560),v=r(b),T=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.isPaginable,n=e.isFetching,r=e.loadMore,a=e.children,o=this.constructor.renderLoadMore;return l.default.createElement("div",{styleName:"container"},a,t&&o({isFetching:n,loadMore:r}))}}],[{key:"renderLoadMore",value:function(e){var t=e.isFetching,n=e.loadMore;return l.default.createElement("div",{styleName:"load-more-container"},l.default.createElement(h.default,{isLoading:t,onClick:n}))}}]),t}(l.default.Component);T.propTypes={isPaginable:s.default.bool.isRequired,isFetching:s.default.bool.isRequired,loadMore:s.default.func.isRequired,children:p.default.children.isRequired},t.default=(0,m.default)(T,v.default)},1560:function(e,t){e.exports={container:"PaginationContainer_container_vQjgF","load-more-container":"PaginationContainer_load-more-container_1O7SV"}},1920:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.default={navs:[{name:"訂單狀態",href:r.notifyPath.contractNotifyPath,tabName:"CONTRACT"},{name:"即時資訊",href:r.notifyPath.itemNotifyPath,tabName:"ITEM"},{name:"活動快報",href:r.notifyPath.activityNotifyPath,tabName:"ACTIVITY"},{name:"系統通知",href:r.notifyPath.systemNotifyPath,tabName:"SYSTEM"}]}},1922:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),f=n(3),s=r(f),d=n(5),p=r(d),y=n(1937),h=r(y),_=n(11),m=r(_),b=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.titleText,r=e.children;return l.default.createElement("div",{styleName:"container"},l.default.createElement("div",{styleName:"header"},l.default.createElement("h1",{styleName:"title"},t&&t({size:48,style:{verticalAlign:"top"}}),l.default.createElement("span",{styleName:"text"},n))),l.default.createElement("div",{styleName:"body"},r))}}]),t}(l.default.Component);b.defaultProps={icon:null},b.propTypes={icon:s.default.func,titleText:s.default.string.isRequired,children:m.default.children.isRequired},t.default=(0,p.default)(b,h.default)},1923:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),f=n(3),s=r(f),d=n(23),p=n(14),y=r(p),h=n(5),_=r(h),m=n(1938),b=r(m),v=y.default.bind(b.default),T=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"renderCircle",value:function(e){return e in this.props.unreads&&this.props.unreads[e]>0?l.default.createElement("div",{styleName:"notice-circle"},this.props.unreads[e]):null}},{key:"render",value:function(){var e=this,t=this.props.navs;return l.default.createElement("div",{styleName:"container"},l.default.createElement("ul",{className:"clear"},t.map(function(t,n){return l.default.createElement(d.Link,{key:""+(n+1),to:t.href,activeClassName:v("active"),onlyActiveOnIndex:!0},l.default.createElement("li",null,t.name,e.renderCircle(t.tabName)))})))}}]),t}(l.default.Component);T.propTypes={navs:s.default.arrayOf(s.default.shape({name:s.default.string.isRequired,href:s.default.string.isRequired,tabName:s.default.string.isRequired}).isRequired).isRequired,unreads:s.default.shape({CONTRACT:s.default.number.isRequired,ACTIVITY:s.default.number.isRequired,SYSTEM:s.default.number.isRequired,ITEM:s.default.number.isRequired}).isRequired},T.defaultProps={unreads:{CONTRACT:0,ACTIVITY:0,SYSTEM:0,ITEM:0}},t.default=(0,_.default)(T,b.default)},1937:function(e,t){e.exports={container:"Container_container_3Zv-D",header:"Container_header_MsHWC",title:"Container_title_3U9FG",text:"Container_text_378tI",body:"Container_body_3X6iY"}},1938:function(e,t){e.exports={container:"Navigation_container_iGeds","notice-circle":"Navigation_notice-circle_2u16R",active:"Navigation_active_lQPVb"}},1950:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),i=r(o),u=n(30),c=r(u),l=function(e){return i.default.createElement(c.default,a({viewBox:"0 0 40 40"},e),i.default.createElement("g",null,i.default.createElement("path",{d:"m30 26.6l3.4 3.4v1.6h-26.8v-1.6l3.4-3.4v-8.2c0-5.2 2.7-9.4 7.5-10.6v-1.2c0-1.4 1.1-2.5 2.5-2.5s2.5 1.1 2.5 2.5v1.2c4.8 1.2 7.5 5.5 7.5 10.6v8.2z m-10 10c-1.9 0-3.4-1.4-3.4-3.2h6.8c0 1.8-1.6 3.2-3.4 3.2z"})))};t.default=l,e.exports=t.default},215:function(e,t,n){"use strict";function r(e,t,n,r,a){return function(o,i){r===i()[y].expireFlag&&o(M(e,t,n,a))}}function a(e,t){return function(n,r){t===r()[y].expireFlag&&n(x(e))}}function o(e,t){var n=[];return e.notifications.map(function(e){var r=JSON.parse(e.content),a={id:e.id,message:r.content,type:r.type,url:r.url,createTime:e.create_time,isRead:e.create_time<=t};return n.push(a),n}),n}function i(e,t){var n=[];return e.notifications.map(function(e){var r=JSON.parse(e.content),a={id:e.id,message:r.content,cid:r.cid,createTime:e.create_time,isRead:e.create_time<=t};return n.push(a),n}),n}function u(e,t){var n=[];return e.notifications.map(function(e){var r=JSON.parse(e.content),a=r.type?r.type:0,o=4===e.type?r.item_img:r.user_img,i="";4===e.type&&2===a?i=(0,d.itemPath)("",r.pid):7===e.type&&(i=d.wishRouter.detailPath(r.id));var u={type:a,url:i,image:o,message:r.content,createTime:e.create_time,isRead:e.create_time<=t};return n.push(u),n}),n}function c(){return function(e,t){var n=t()[y],r=n.fetchType,c=n.index,l=n.records,d=n.recursiveTimes,_=n.lastReadTime,m=Date.now();e(w(r,m)),(0,f.asyncXhrAuthedPost)("/ajax/get_notify.json",{type:r,index:c,size:h},t()).then(function(t){var n=[];switch(r){case C:n=i(t,_);break;case P:case j:n=o(t,_);break;case R:n=u(t,_)}if((0,s.reduceDuplicateRecords)(n,l,p).length<n.length&&d<=O)return void e(x());e(k()),e(a(n,m))})}}function l(e){return function(t,n){var a=Date.now();t(w(e,a)),(0,f.asyncXhrAuthedPost)("/ajax/count_unread_notify.json",{},n()).then(function(c){var l={CONTRACT:c.contract_unread_count,ITEM:c.instant_info_unread_count,ACTIVITY:c.marketing_unread_count,SYSTEM:c.system_unread_count};t(N(l));var s=0,d=h;switch(e){case P:d=d<c.marketing_unread_count?c.marketing_unread_count:d;break;case C:d=d<c.contract_unread_count?c.contract_unread_count:d;break;case j:d=d<c.system_unread_count?c.system_unread_count:d;break;case R:d=d<c.instant_info_unread_count?c.instant_info_unread_count:d}d+=d%10+1,(0,f.asyncXhrAuthedPost)("/ajax/get_notify.json",{type:e,index:s,size:d},n()).then(function(n){var c=[],l=n.last_read_time;switch(e){case C:c=i(n,l);break;case P:case j:c=o(n,l);break;case R:c=u(n,l)}var f=c.length===d;s=f?d-1:d,f&&c.pop(),t(r(c,f,s,a,l))})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.reset=t.TYPE_SYSTEM=t.TYPE_ITEM=t.TYPE_ACTIVITY=t.TYPE_CONTRACT=void 0,t.parseActivityNotify=o,t.parseContractNotify=i,t.parseItemNotify=u,t.fetchMoreData=c,t.fetchUnreadCount=l;var f=n(8),s=n(53),d=n(2),p="id",y="notify",h=10,_=function(e){return"NOTIFY.ACTION."+e},m=_("FETCHING"),b=_("FETCHEDUNREAD"),v=_("FETCHED"),T=_("FETCHEDMORE"),g=_("RESET"),E=_("RESET_RECURSIVE_TIMES"),O=10,C=t.TYPE_CONTRACT=1,P=t.TYPE_ACTIVITY=0,R=t.TYPE_ITEM=4,j=t.TYPE_SYSTEM=6,w=(t.reset=function(){return{type:g}},function(e,t){return{type:m,fetchType:e,expireFlag:t}}),N=function(e){return{type:b,unreadCount:e}},M=function(e,t,n,r){return{type:v,records:e,isPaginable:t,index:n,lastReadTime:r}},x=function(e){return{type:T,records:e}},k=function(){return{type:E}},I={expireFlag:null,isPaginable:!0,isFetching:!1,unreadCount:{CONTRACT:0,ACTIVITY:0,SYSTEM:0,ITEM:0},size:h,records:[],fetchType:0,index:0,lastReadTime:0};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments[1];switch(t.type){case m:return Object.assign({},e,{expireFlag:t.expireFlag,fetchType:t.fetchType,isFetching:!0});case b:return Object.assign({},e,{unreadCount:t.unreadCount});case v:return Object.assign({},e,{isFetching:!1,records:t.records,isPaginable:t.isPaginable,index:t.index,lastReadTime:t.lastReadTime});case T:return Object.assign({},e,{isFetching:!1,isPaginable:t.records.length%e.size==0,records:e.records.concat(t.records),index:e.index+t.records.length});case E:return Object.assign({},e,{recursiveTimes:0});case g:return I;default:return e}}},2171:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),f=n(3),s=r(f),d=n(1920),p=r(d),y=n(1550),h=r(y),_=n(1559),m=r(_),b=n(1923),v=r(b),T=n(1922),g=r(T),E=n(2172),O=r(E),C=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"componentDidMount",value:function(){this.props.dispatchUnreadCount()}},{key:"componentWillUnmount",value:function(){this.props.dispatchReset()}},{key:"render",value:function(){var e=this.props.notify,t=e.unreadCount,n=e.isFetching,r=e.isPaginable,a=e.records;return l.default.createElement(g.default,{titleText:"通知"},l.default.createElement(v.default,{navs:p.default.navs,unreads:t}),l.default.createElement(h.default,{minHeight:500,noDataText:!1===n&&0===a.length?"尚無任何通知":null,isInitialFetching:n&&0===a.length},l.default.createElement(m.default,{isPaginable:r,isFetching:n,loadMore:this.props.dispatchMore},a.map(function(e){return l.default.createElement(O.default,{key:e.id,cid:e.cid,message:e.message,createTime:e.createTime,isRead:e.isRead})}))))}}]),t}(l.default.Component);C.propTypes={dispatchUnreadCount:s.default.func.isRequired,dispatchReset:s.default.func.isRequired,dispatchMore:s.default.func.isRequired,notify:s.default.shape({isFetching:s.default.bool}).isRequired},t.default=C},2172:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),f=n(3),s=r(f),d=n(5),p=r(d),y=n(23),h=n(1950),_=r(h),m=n(322),b=r(m),v=n(18),T=n(2),g=n(2292),E=r(g),O=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.cid,n=e.message,r=e.createTime,a=e.isRead,o=a?b.default.placeholder:b.default.orangeColor;return l.default.createElement("div",{styleName:"notify-contract-border",className:"clear"},l.default.createElement("div",{styleName:"notify-contract-icon"},l.default.createElement(_.default,{size:40,color:o})),l.default.createElement("div",{styleName:"notify-contract-content"},l.default.createElement(y.Link,{styleName:"notify-contract-link",to:T.orderDetail.indexPath(t)},n),l.default.createElement("div",{styleName:"notify-contract-time"},(0,v.formatDate)(r))))}}]),t}(l.default.Component);O.propTypes={cid:s.default.number.isRequired,message:s.default.string.isRequired,createTime:s.default.number.isRequired,isRead:s.default.bool.isRequired},t.default=(0,p.default)(O,E.default)},2292:function(e,t){e.exports={"notify-contract-border":"NotifyContractBoard_notify-contract-border_1elOA","notify-contract-icon":"NotifyContractBoard_notify-contract-icon_Ea8X6","notify-contract-content":"NotifyContractBoard_notify-contract-content_1Wf2_","notify-contract-link":"NotifyContractBoard_notify-contract-link_2-AbC","notify-contract-time":"NotifyContractBoard_notify-contract-time_3TxGZ"}}});