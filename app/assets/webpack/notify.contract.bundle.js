webpackJsonp([68],{1484:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),i=n(2174),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(210),u=function(e){return{environment:e.environment,notify:e.notify}},c=function(e){return{dispatch:e,dispatchUnreadCount:function(){return e((0,o.fetchUnreadCount)(o.TYPE_CONTRACT))},dispatchReset:function(){return e((0,o.reset)())},dispatchMore:function(){return e((0,o.fetchMoreData)())}}};t.default=(0,r.connect)(u,c)(a.default)},1551:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),s=n(3),f=r(s),d=n(11),p=r(d),y=n(155),h=r(y),_=n(5),m=r(_),b=n(1552),T=r(b),v=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"renderContent",value:function(){var e=this.props,t=e.isInitialFetching,n=e.noDataText,r=e.children;return t?l.default.createElement(h.default,null):n?l.default.createElement("div",{styleName:"no-data"},n):r}},{key:"render",value:function(){var e=this.props.minHeight;return l.default.createElement("div",{styleName:"container",style:{minHeight:e}},this.renderContent())}}]),t}(l.default.Component);v.defaultProps={minHeight:400,noDataText:null},v.propTypes={children:p.default.children.isRequired,noDataText:f.default.string,minHeight:f.default.number,isInitialFetching:f.default.bool.isRequired},t.default=(0,m.default)(v,T.default)},1552:function(e,t){e.exports={container:"ListContainer_container_2ZP1q","no-data":"ListContainer_no-data_2O1SC"}},1560:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),s=n(3),f=r(s),d=n(11),p=r(d),y=n(521),h=r(y),_=n(5),m=r(_),b=n(1561),T=r(b),v=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.isPaginable,n=e.isFetching,r=e.loadMore,i=e.children,a=this.constructor.renderLoadMore;return l.default.createElement("div",{styleName:"container"},i,t&&a({isFetching:n,loadMore:r}))}}],[{key:"renderLoadMore",value:function(e){var t=e.isFetching,n=e.loadMore;return l.default.createElement("div",{styleName:"load-more-container"},l.default.createElement(h.default,{isLoading:t,onClick:n}))}}]),t}(l.default.Component);v.propTypes={isPaginable:f.default.bool.isRequired,isFetching:f.default.bool.isRequired,loadMore:f.default.func.isRequired,children:p.default.children.isRequired},t.default=(0,m.default)(v,T.default)},1561:function(e,t){e.exports={container:"PaginationContainer_container_vQjgF","load-more-container":"PaginationContainer_load-more-container_1O7SV"}},1921:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.default={navs:[{name:"訂單狀態",href:r.notifyPath.contractNotifyPath,tabName:"CONTRACT"},{name:"即時資訊",href:r.notifyPath.itemNotifyPath,tabName:"ITEM"},{name:"活動快報",href:r.notifyPath.activityNotifyPath,tabName:"ACTIVITY"},{name:"系統通知",href:r.notifyPath.systemNotifyPath,tabName:"SYSTEM"}]}},1923:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),s=n(3),f=r(s),d=n(5),p=r(d),y=n(1938),h=r(y),_=n(11),m=r(_),b=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.titleText,r=e.children;return l.default.createElement("div",{styleName:"container"},l.default.createElement("div",{styleName:"header"},l.default.createElement("h1",{styleName:"title"},t&&t({size:48,style:{verticalAlign:"top"}}),l.default.createElement("span",{styleName:"text"},n))),l.default.createElement("div",{styleName:"body"},r))}}]),t}(l.default.Component);b.defaultProps={icon:null},b.propTypes={icon:f.default.func,titleText:f.default.string.isRequired,children:m.default.children.isRequired},t.default=(0,p.default)(b,h.default)},1924:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),s=n(3),f=r(s),d=n(23),p=n(14),y=r(p),h=n(5),_=r(h),m=n(1939),b=r(m),T=y.default.bind(b.default),v=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"renderCircle",value:function(e){return e in this.props.unreads&&this.props.unreads[e]>0?l.default.createElement("div",{styleName:"notice-circle"},this.props.unreads[e]):null}},{key:"render",value:function(){var e=this,t=this.props.navs;return l.default.createElement("div",{styleName:"container"},l.default.createElement("ul",{className:"clear"},t.map(function(t,n){return l.default.createElement(d.Link,{key:""+(n+1),to:t.href,activeClassName:T("active"),onlyActiveOnIndex:!0},l.default.createElement("li",null,t.name,e.renderCircle(t.tabName)))})))}}]),t}(l.default.Component);v.propTypes={navs:f.default.arrayOf(f.default.shape({name:f.default.string.isRequired,href:f.default.string.isRequired,tabName:f.default.string.isRequired}).isRequired).isRequired,unreads:f.default.shape({CONTRACT:f.default.number.isRequired,ACTIVITY:f.default.number.isRequired,SYSTEM:f.default.number.isRequired,ITEM:f.default.number.isRequired}).isRequired},v.defaultProps={unreads:{CONTRACT:0,ACTIVITY:0,SYSTEM:0,ITEM:0}},t.default=(0,_.default)(v,b.default)},1938:function(e,t){e.exports={container:"Container_container_3Zv-D",header:"Container_header_MsHWC",title:"Container_title_3U9FG",text:"Container_text_378tI",body:"Container_body_3X6iY"}},1939:function(e,t){e.exports={container:"Navigation_container_iGeds","notice-circle":"Navigation_notice-circle_2u16R",active:"Navigation_active_lQPVb"}},210:function(e,t,n){"use strict";function r(e,t,n,r,i){return function(a,o){r===o()[y].expireFlag&&a(I(e,t,n,i))}}function i(e,t){return function(n,r){t===r()[y].expireFlag&&n(k(e))}}function a(e,t){var n=[];return e.notifications.map(function(e){var r=e.id,i=e.content,a=e.type,o=e.create_time,u=JSON.parse(i),c={id:r,message:u.content,contentType:u.type,type:a,url:u.url,createTime:o,isRead:o<=t};return n.push(c),n}),n}function o(e,t){var n=e.notifications;return n&&0!==n.length?n.map(function(e){var n=e.content,r=e.id,i=e.create_time,a=JSON.parse(n);return{id:r,itemImage:a.item_img,message:a.content,cid:a.cid,createTime:i,isRead:i<=t}}):[]}function u(e,t){var n=e.notifications;return n&&0!==n.length?n.map(function(e){var n=e.type,r=e.content,i=e.create_time,a=JSON.parse(r),o=a.type||0,u=void 0;return n===N&&o===w?u=(0,d.itemPath)("",a.pid):n===j&&(u=d.wishRouter.detailPath(a.id)),{type:n,contentType:o,url:u,message:a.content,createTime:i,isRead:i<=t}}):[]}function c(){return function(e,t){var n=t()[y],r=n.fetchType,c=n.index,l=n.records,d=n.recursiveTimes,_=n.lastReadTime,m=Date.now();e(M(r,m)),(0,s.asyncXhrAuthedPost)("/ajax/get_notify.json",{type:r,index:c,size:h},t()).then(function(t){var n=[];switch(r){case C:n=o(t,_);break;case P:case R:n=a(t,_);break;case N:n=u(t,_)}if((0,f.reduceDuplicateRecords)(n,l,p).length<n.length&&d<=O)return void e(k());e(Y()),e(i(n,m))})}}function l(e){return function(t,n){var i=Date.now();t(M(e,i)),(0,s.asyncXhrAuthedPost)("/ajax/count_unread_notify.json",{},n()).then(function(c){var l={CONTRACT:c.contract_unread_count,ITEM:c.instant_info_unread_count,ACTIVITY:c.marketing_unread_count,SYSTEM:c.system_unread_count};t(x(l));var f=0,d=h;switch(e){case P:d=d<c.marketing_unread_count?c.marketing_unread_count:d;break;case C:d=d<c.contract_unread_count?c.contract_unread_count:d;break;case R:d=d<c.system_unread_count?c.system_unread_count:d;break;case N:d=d<c.instant_info_unread_count?c.instant_info_unread_count:d}d+=d%10+1,(0,s.asyncXhrAuthedPost)("/ajax/get_notify.json",{type:e,index:f,size:d},n()).then(function(n){var c=[],l=n.last_read_time;switch(e){case C:c=o(n,l);break;case P:case R:c=a(n,l);break;case N:c=u(n,l)}var s=c.length===d;f=s?d-1:d,s&&c.pop(),t(r(c,s,f,i,l))})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.reset=t.CONTENT_TYPE_ITEM=t.CONTENT_TYPE_WEB=t.CONTENT_TYPE_NONE=t.TYPE_WISH=t.TYPE_SYSTEM=t.TYPE_ITEM=t.TYPE_ACTIVITY=t.TYPE_CONTRACT=void 0,t.parseActivityNotify=a,t.parseContractNotify=o,t.parseItemNotify=u,t.fetchMoreData=c,t.fetchUnreadCount=l;var s=n(8),f=n(53),d=n(2),p="id",y="notify",h=10,_=function(e){return"NOTIFY.ACTION."+e},m=_("FETCHING"),b=_("FETCHEDUNREAD"),T=_("FETCHED"),v=_("FETCHEDMORE"),g=_("RESET"),E=_("RESET_RECURSIVE_TIMES"),O=10,C=t.TYPE_CONTRACT=1,P=t.TYPE_ACTIVITY=0,N=t.TYPE_ITEM=4,R=t.TYPE_SYSTEM=6,j=t.TYPE_WISH=7,w=(t.CONTENT_TYPE_NONE=0,t.CONTENT_TYPE_WEB=1,t.CONTENT_TYPE_ITEM=2),M=(t.reset=function(){return{type:g}},function(e,t){return{type:m,fetchType:e,expireFlag:t}}),x=function(e){return{type:b,unreadCount:e}},I=function(e,t,n,r){return{type:T,records:e,isPaginable:t,index:n,lastReadTime:r}},k=function(e){return{type:v,records:e}},Y=function(){return{type:E}},S={expireFlag:null,isPaginable:!0,isFetching:!1,unreadCount:{CONTRACT:0,ACTIVITY:0,SYSTEM:0,ITEM:0},size:h,records:[],fetchType:0,index:0,lastReadTime:0};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments[1];switch(t.type){case m:return Object.assign({},e,{expireFlag:t.expireFlag,fetchType:t.fetchType,isFetching:!0});case b:return Object.assign({},e,{unreadCount:t.unreadCount});case T:return Object.assign({},e,{isFetching:!1,records:t.records,isPaginable:t.isPaginable,index:t.index,lastReadTime:t.lastReadTime});case v:return Object.assign({},e,{isFetching:!1,isPaginable:t.records.length%e.size==0,records:e.records.concat(t.records),index:e.index+t.records.length});case E:return Object.assign({},e,{recursiveTimes:0});case g:return S;default:return e}}},2174:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),s=n(3),f=r(s),d=n(1921),p=r(d),y=n(1551),h=r(y),_=n(1560),m=r(_),b=n(1924),T=r(b),v=n(1923),g=r(v),E=n(2175),O=r(E),C=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"componentDidMount",value:function(){this.props.dispatchUnreadCount()}},{key:"componentWillUnmount",value:function(){this.props.dispatchReset()}},{key:"render",value:function(){var e=this.props.notify,t=e.unreadCount,n=e.isFetching,r=e.isPaginable,i=e.records;return l.default.createElement(g.default,{titleText:"通知"},l.default.createElement(T.default,{navs:p.default.navs,unreads:t}),l.default.createElement(h.default,{minHeight:500,noDataText:!1===n&&0===i.length?"尚無任何訂單通知":null,isInitialFetching:n&&0===i.length},l.default.createElement(m.default,{isPaginable:r,isFetching:n,loadMore:this.props.dispatchMore},i.map(function(e){return l.default.createElement(O.default,{key:e.id,cid:e.cid,itemImage:e.itemImage,message:e.message,createTime:e.createTime,isRead:e.isRead})}))))}}]),t}(l.default.Component);C.propTypes={dispatchUnreadCount:f.default.func.isRequired,dispatchReset:f.default.func.isRequired,dispatchMore:f.default.func.isRequired,notify:f.default.shape({isFetching:f.default.bool}).isRequired},t.default=C},2175:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),s=n(3),f=r(s),d=n(23),p=n(18),y=n(2),h=n(14),_=r(h),m=n(5),b=r(m),T=n(2295),v=r(T),g=n(108),E=r(g),O=_.default.bind(v.default),C=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.cid,n=e.message,r=e.createTime,i=e.itemImage,a=e.isRead;return l.default.createElement("div",{className:"clear "+O("container",{highlight:!a})},l.default.createElement(d.Link,{to:y.orderDetail.indexPath(t),styleName:"cover"},l.default.createElement(E.default,{src:i})),l.default.createElement("div",{styleName:"content"},l.default.createElement(d.Link,{styleName:"link",to:y.orderDetail.indexPath(t)},n),l.default.createElement("div",{styleName:"time"},(0,p.formatDate)(r))))}}]),t}(l.default.Component);C.propTypes={cid:f.default.number.isRequired,itemImage:f.default.string.isRequired,message:f.default.string.isRequired,createTime:f.default.number.isRequired,isRead:f.default.bool.isRequired},t.default=(0,b.default)(C,v.default)},2295:function(e,t){e.exports={container:"NotifyContractBoard_container_1ce_V",highlight:"NotifyContractBoard_highlight_3yJEd",cover:"NotifyContractBoard_cover_2RSr_",content:"NotifyContractBoard_content_3TfSJ",link:"NotifyContractBoard_link_2g1fh",time:"NotifyContractBoard_time_1OGYW"}}});