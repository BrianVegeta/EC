webpackJsonp([81],{1441:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),r=n(357),o=n(336),c=n(2123),i=function(e){return e&&e.__esModule?e:{default:e}}(c),u=function(e){var t=e.environment,n=e.banks,a=e.personalBankInfo,r=a.isChecked,o=a.infoFetched;return{environment:t,banks:n,personalBankInfo:a,isReadyToRender:n.length>0&&r&&o}},l=function(e){return{dispatchFetchBanks:function(){return e((0,r.fetchBanks)())},dispatchFetchBranchs:function(t){return e((0,r.fetchBranchs)(t))},dispatchFetchBankInfo:function(){return e((0,o.fetchInfo)())},dispatchFetchCheckBankReady:function(){return e((0,o.asyncCheckReady)())},dispatchResetBankInfo:function(){return e((0,o.resetBankInfo)())},dispatchChangeInfo:function(t){return e((0,o.changeInfo)(t))},dispatchChangeData:function(t){return e((0,o.changeData)(t))},dispatchSaveBankInfo:function(){return e((0,o.saveBankInfo)())},dispatchValidate:function(){return e((0,o.validateInfo)())}}};t.default=(0,a.connect)(u,l)(i.default)},1549:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),l=a(u),f=n(3),d=a(f),s=n(5),p=a(s),h=n(1551),m=a(h),k=n(14),v=a(k),y=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.titleText,a=e.children;return l.default.createElement("div",{styleName:"container"},l.default.createElement("div",{styleName:"header"},l.default.createElement("h1",{styleName:"title"},t&&t({size:48,style:{verticalAlign:"top"}}),l.default.createElement("span",{styleName:"text"},n))),l.default.createElement("div",{styleName:"body"},a))}}]),t}(l.default.Component);y.defaultProps={icon:null},y.propTypes={icon:d.default.func,titleText:d.default.string.isRequired,children:v.default.children.isRequired},t.default=(0,p.default)(y,m.default)},1551:function(e,t){e.exports={container:"Container_container_1jgWb",header:"Container_header_2w5kE",title:"Container_title_2jnjz",text:"Container_text_3f4tb",body:"Container_body_12gU_"}},2123:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(83),l=a(u),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=n(0),s=a(d),p=n(3),h=a(p),m=n(14),k=a(m),v=n(574),y=a(v),B=n(211),b=a(B),_=n(534),I=a(_),g=n(84),N=a(g),C=n(157),R=a(C),E=n(137),S=a(E),O=n(5),w=a(O),j=n(2262),F=a(j),x=n(1549),T=a(x),q=function(e){function t(e){o(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSubmit=n.onSubmit.bind(n),n.onBankSelect=n.onBankSelect.bind(n),n.onBranchSelect=n.onBranchSelect.bind(n),n}return i(t,e),f(t,null,[{key:"generateBranchOptions",value:function(e,t){if(!e)return[];var n=(0,l.default)(t,{id:e});if(!n)return[];var a=n.branchs;return a?a.map(function(e){return{value:e.id,text:e.branchName}}):[]}}]),f(t,[{key:"componentDidMount",value:function(){this.props.dispatchResetBankInfo(),this.props.dispatchFetchBanks(),this.props.dispatchFetchBankInfo(),this.props.dispatchFetchCheckBankReady()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isReadyToRender,a=t.dispatchFetchBranchs;if(n&&!e.isReadyToRender){var r=this.props.personalBankInfo.info.accBankId;r&&a(r)}}},{key:"componentWillUnmount",value:function(){this.props.dispatchResetBankInfo()}},{key:"onSubmit",value:function(){var e=this,t=this.props,n=t.dispatchChangeData,a=t.dispatchValidate,r=t.dispatchSaveBankInfo;a().then(function(){r().then(function(e){var t=e.bankName;n({bankName:t,isReady:!0}),(0,S.default)((0,E.successConfig)({title:"收款設定成功",text:"收款設定已編輯成功"}))})}).catch(function(){(0,S.default)((0,E.warningConfig)({title:"請檢查所填寫的資料",text:"請先檢查資料格式。"})),e.realNameInput.valid(),e.idNumberInput.valid(),e.accBankInput.valid(),e.accBankBranchInput.props.disabled||e.accBankBranchInput.valid(),e.accNameInput.valid(),e.accNoInput.valid()})}},{key:"onBankSelect",value:function(e){var t=e.value,n=e.text,a=this.props,r=a.dispatchFetchBranchs;(0,a.dispatchChangeInfo)({accBankId:t,accBankName:n}),r(t)}},{key:"onBranchSelect",value:function(e){var t=e.value,n=e.text;this.props.dispatchChangeInfo({accBankBranchId:t,accBankBranchName:n})}},{key:"changeInfo",value:function(e){var t=this;return function(n){return t.props.dispatchChangeInfo(r({},e,n))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.banks,a=t.personalBankInfo,r=t.isReadyToRender,o=a.info,c=o.realName,i=o.idNumber,u=o.accBankId,l=o.accBankBranchId,f=o.accName,d=o.accNo;if(!r)return null;var p=n.map(function(e){return{value:e.id,text:e.bankName}}),h=this.constructor.generateBranchOptions(u,n);return s.default.createElement(T.default,{titleText:"收款設定"},s.default.createElement("div",{styleName:"form-container"},s.default.createElement("p",{styleName:"warning"},"您填寫的資訊必須與身分證一致，以利銀行核對，否則將會影響日後撥款權益。"),s.default.createElement(y.default,{title:"基本資料",hasBottomLine:!1},s.default.createElement("div",{styleName:"nameFormControl"},s.default.createElement(b.default,{ref:function(t){e.realNameInput=t},placeholder:"真實姓名",value:c,onChange:this.changeInfo("realName"),constraints:R.default.realName,validateOnBlur:!0})),s.default.createElement("div",{styleName:"idFormControl"},s.default.createElement(b.default,{ref:function(t){e.idNumberInput=t},placeholder:"身分證字號/統編",value:i,onChange:this.changeInfo("idNumber"),constraints:R.default.idNumber,validateOnBlur:!0}))),s.default.createElement(y.default,{title:"銀行帳戶資訊",hasBottomLine:!1},s.default.createElement("div",{styleName:"formControl"},s.default.createElement(I.default,{ref:function(t){e.accBankInput=t},placeholder:"選擇銀行",dropdownMaxHeight:250,value:u,options:p,onSelect:this.onBankSelect,constraints:R.default.accBankId,validateOnBlur:!0})),s.default.createElement("div",{styleName:"formControl"},s.default.createElement(I.default,{ref:function(t){e.accBankBranchInput=t},placeholder:"選擇分行",dropdownMaxHeight:250,value:l,options:h,onSelect:this.onBranchSelect,constraints:R.default.accBankBranchId,validateOnBlur:!0,disabled:0===h.length})),s.default.createElement("div",{styleName:"formControl"},s.default.createElement(b.default,{ref:function(t){e.accNameInput=t},placeholder:"戶名/公司名稱",value:f,onChange:this.changeInfo("accName"),constraints:R.default.accName,validateOnBlur:!0})),s.default.createElement("div",{styleName:"formControl"},s.default.createElement(b.default,{ref:function(t){e.accNoInput=t},placeholder:"銀行帳號",value:d,onChange:this.changeInfo("accNo"),constraints:R.default.accNo,validateOnBlur:!0})))),s.default.createElement("div",{styleName:"footer",className:"clear"},s.default.createElement("span",{styleName:"right"},s.default.createElement(N.default,{width:170,colorType:"orange",content:"完成",onClick:this.onSubmit}))))}}]),t}(s.default.Component);q.propTypes={banks:k.default.banks.isRequired,personalBankInfo:k.default.personalBankInfo.isRequired,isReadyToRender:h.default.bool.isRequired,dispatchFetchBanks:h.default.func.isRequired,dispatchFetchBranchs:h.default.func.isRequired,dispatchFetchBankInfo:h.default.func.isRequired,dispatchFetchCheckBankReady:h.default.func.isRequired,dispatchResetBankInfo:h.default.func.isRequired,dispatchChangeInfo:h.default.func.isRequired,dispatchChangeData:h.default.func.isRequired,dispatchSaveBankInfo:h.default.func.isRequired,dispatchValidate:h.default.func.isRequired},t.default=(0,w.default)(q,F.default)},2262:function(e,t){e.exports={"form-container":"BankSetup_form-container_3iSwY","confirm-update":"BankSetup_confirm-update_3rkKa",warning:"BankSetup_warning_Hteku",nameFormControl:"BankSetup_nameFormControl_2eAI9",idFormControl:"BankSetup_idFormControl_ydISz",formControl:"BankSetup_formControl_2j15G",footer:"BankSetup_footer_Lhh8y",right:"BankSetup_right_2btNp"}}});