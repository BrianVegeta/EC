webpackJsonp([60],{1481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),i=n(2170),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(215),u=function(e){return{environment:e.environment,notify:e.notify}},c=function(e){return{dispatch:e,dispatchUnreadCount:function(){return e((0,o.fetchUnreadCount)(o.TYPE_ACTIVITY))},dispatchReset:function(){return e((0,o.reset)())},dispatchMore:function(){return e((0,o.fetchMoreData)())}}};t.default=(0,r.connect)(u,c)(a.default)},1550:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),s=n(3),f=r(s),d=n(11),p=r(d),y=n(155),h=r(y),_=n(5),m=r(_),b=n(1551),v=r(b),g=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"renderContent",value:function(){var e=this.props,t=e.isInitialFetching,n=e.noDataText,r=e.children;return t?l.default.createElement(h.default,null):n?l.default.createElement("div",{styleName:"no-data"},n):r}},{key:"render",value:function(){var e=this.props.minHeight;return l.default.createElement("div",{styleName:"container",style:{minHeight:e}},this.renderContent())}}]),t}(l.default.Component);g.defaultProps={minHeight:400,noDataText:null},g.propTypes={children:p.default.children.isRequired,noDataText:f.default.string,minHeight:f.default.number,isInitialFetching:f.default.bool.isRequired},t.default=(0,m.default)(g,v.default)},1551:function(e,t){e.exports={container:"ListContainer_container_2ZP1q","no-data":"ListContainer_no-data_2O1SC"}},1559:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),s=n(3),f=r(s),d=n(11),p=r(d),y=n(521),h=r(y),_=n(5),m=r(_),b=n(1560),v=r(b),g=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.isPaginable,n=e.isFetching,r=e.loadMore,i=e.children,a=this.constructor.renderLoadMore;return l.default.createElement("div",{styleName:"container"},i,t&&a({isFetching:n,loadMore:r}))}}],[{key:"renderLoadMore",value:function(e){var t=e.isFetching,n=e.loadMore;return l.default.createElement("div",{styleName:"load-more-container"},l.default.createElement(h.default,{isLoading:t,onClick:n}))}}]),t}(l.default.Component);g.propTypes={isPaginable:f.default.bool.isRequired,isFetching:f.default.bool.isRequired,loadMore:f.default.func.isRequired,children:p.default.children.isRequired},t.default=(0,m.default)(g,v.default)},1560:function(e,t){e.exports={container:"PaginationContainer_container_vQjgF","load-more-container":"PaginationContainer_load-more-container_1O7SV"}},1920:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.default={navs:[{name:"訂單狀態",href:r.notifyPath.contractNotifyPath,tabName:"CONTRACT"},{name:"即時資訊",href:r.notifyPath.itemNotifyPath,tabName:"ITEM"},{name:"活動快報",href:r.notifyPath.activityNotifyPath,tabName:"ACTIVITY"},{name:"系統通知",href:r.notifyPath.systemNotifyPath,tabName:"SYSTEM"}]}},1922:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),s=n(3),f=r(s),d=n(5),p=r(d),y=n(1937),h=r(y),_=n(11),m=r(_),b=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.titleText,r=e.children;return l.default.createElement("div",{styleName:"container"},l.default.createElement("div",{styleName:"header"},l.default.createElement("h1",{styleName:"title"},t&&t({size:48,style:{verticalAlign:"top"}}),l.default.createElement("span",{styleName:"text"},n))),l.default.createElement("div",{styleName:"body"},r))}}]),t}(l.default.Component);b.defaultProps={icon:null},b.propTypes={icon:f.default.func,titleText:f.default.string.isRequired,children:m.default.children.isRequired},t.default=(0,p.default)(b,h.default)},1923:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),s=n(3),f=r(s),d=n(23),p=n(14),y=r(p),h=n(5),_=r(h),m=n(1938),b=r(m),v=y.default.bind(b.default),g=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"renderCircle",value:function(e){return e in this.props.unreads&&this.props.unreads[e]>0?l.default.createElement("div",{styleName:"notice-circle"},this.props.unreads[e]):null}},{key:"render",value:function(){var e=this,t=this.props.navs;return l.default.createElement("div",{styleName:"container"},l.default.createElement("ul",{className:"clear"},t.map(function(t,n){return l.default.createElement(d.Link,{key:""+(n+1),to:t.href,activeClassName:v("active"),onlyActiveOnIndex:!0},l.default.createElement("li",null,t.name,e.renderCircle(t.tabName)))})))}}]),t}(l.default.Component);g.propTypes={navs:f.default.arrayOf(f.default.shape({name:f.default.string.isRequired,href:f.default.string.isRequired,tabName:f.default.string.isRequired}).isRequired).isRequired,unreads:f.default.shape({CONTRACT:f.default.number.isRequired,ACTIVITY:f.default.number.isRequired,SYSTEM:f.default.number.isRequired,ITEM:f.default.number.isRequired}).isRequired},g.defaultProps={unreads:{CONTRACT:0,ACTIVITY:0,SYSTEM:0,ITEM:0}},t.default=(0,_.default)(g,b.default)},1937:function(e,t){e.exports={container:"Container_container_3Zv-D",header:"Container_header_MsHWC",title:"Container_title_3U9FG",text:"Container_text_378tI",body:"Container_body_3X6iY"}},1938:function(e,t){e.exports={container:"Navigation_container_iGeds","notice-circle":"Navigation_notice-circle_2u16R",active:"Navigation_active_lQPVb"}},1950:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(0),o=r(a),u=n(30),c=r(u),l=function(e){return o.default.createElement(c.default,i({viewBox:"0 0 40 40"},e),o.default.createElement("g",null,o.default.createElement("path",{d:"m30 26.6l3.4 3.4v1.6h-26.8v-1.6l3.4-3.4v-8.2c0-5.2 2.7-9.4 7.5-10.6v-1.2c0-1.4 1.1-2.5 2.5-2.5s2.5 1.1 2.5 2.5v1.2c4.8 1.2 7.5 5.5 7.5 10.6v8.2z m-10 10c-1.9 0-3.4-1.4-3.4-3.2h6.8c0 1.8-1.6 3.2-3.4 3.2z"})))};t.default=l,e.exports=t.default},2023:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),s=n(3),f=r(s),d=n(5),p=r(d),y=n(23),h=n(1950),_=r(h),m=n(322),b=r(m),v=n(18),g=n(2039),T=r(g),E=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"renderMessage",value:function(){var e=this.props,t=e.type,n=e.url,r=e.message;switch(t){case 1:return l.default.createElement(y.Link,{styleName:"notify-activity-link",to:n},r);default:return l.default.createElement("div",null,r)}}},{key:"render",value:function(){var e=this.props,t=e.createTime,n=e.isRead,r=n?b.default.placeholder:b.default.orangeColor;return l.default.createElement("div",{styleName:"notify-activity-border",className:"clear"},l.default.createElement("div",{styleName:"notify-activity-icon"},l.default.createElement(_.default,{size:40,color:r})),l.default.createElement("div",{styleName:"notify-activity-content"},this.renderMessage(),l.default.createElement("div",{styleName:"notify-activity-time"},(0,v.formatDate)(t))))}}]),t}(l.default.Component);E.defaultProps={url:"/"},E.propTypes={type:f.default.number.isRequired,url:f.default.string,message:f.default.string.isRequired,createTime:f.default.number.isRequired,isRead:f.default.bool.isRequired},t.default=(0,p.default)(E,T.default)},2039:function(e,t){e.exports={"notify-activity-border":"NotifyActivityBoard_notify-activity-border_rkzV2","notify-activity-icon":"NotifyActivityBoard_notify-activity-icon_SEQDX","notify-activity-content":"NotifyActivityBoard_notify-activity-content_3S6Oh","notify-activity-link":"NotifyActivityBoard_notify-activity-link_1_mV7","notify-activity-time":"NotifyActivityBoard_notify-activity-time_359PX"}},215:function(e,t,n){"use strict";function r(e,t,n,r,i){return function(a,o){r===o()[y].expireFlag&&a(M(e,t,n,i))}}function i(e,t){return function(n,r){t===r()[y].expireFlag&&n(x(e))}}function a(e,t){var n=[];return e.notifications.map(function(e){var r=JSON.parse(e.content),i={id:e.id,message:r.content,type:r.type,url:r.url,createTime:e.create_time,isRead:e.create_time<=t};return n.push(i),n}),n}function o(e,t){var n=[];return e.notifications.map(function(e){var r=JSON.parse(e.content),i={id:e.id,message:r.content,cid:r.cid,createTime:e.create_time,isRead:e.create_time<=t};return n.push(i),n}),n}function u(e,t){var n=[];return e.notifications.map(function(e){var r=JSON.parse(e.content),i=r.type?r.type:0,a=4===e.type?r.item_img:r.user_img,o="";4===e.type&&2===i?o=(0,d.itemPath)("",r.pid):7===e.type&&(o=d.wishRouter.detailPath(r.id));var u={type:i,url:o,image:a,message:r.content,createTime:e.create_time,isRead:e.create_time<=t};return n.push(u),n}),n}function c(){return function(e,t){var n=t()[y],r=n.fetchType,c=n.index,l=n.records,d=n.recursiveTimes,_=n.lastReadTime,m=Date.now();e(w(r,m)),(0,s.asyncXhrAuthedPost)("/ajax/get_notify.json",{type:r,index:c,size:h},t()).then(function(t){var n=[];switch(r){case P:n=o(t,_);break;case C:case j:n=a(t,_);break;case R:n=u(t,_)}if((0,f.reduceDuplicateRecords)(n,l,p).length<n.length&&d<=O)return void e(x());e(k()),e(i(n,m))})}}function l(e){return function(t,n){var i=Date.now();t(w(e,i)),(0,s.asyncXhrAuthedPost)("/ajax/count_unread_notify.json",{},n()).then(function(c){var l={CONTRACT:c.contract_unread_count,ITEM:c.instant_info_unread_count,ACTIVITY:c.marketing_unread_count,SYSTEM:c.system_unread_count};t(N(l));var f=0,d=h;switch(e){case C:d=d<c.marketing_unread_count?c.marketing_unread_count:d;break;case P:d=d<c.contract_unread_count?c.contract_unread_count:d;break;case j:d=d<c.system_unread_count?c.system_unread_count:d;break;case R:d=d<c.instant_info_unread_count?c.instant_info_unread_count:d}d+=d%10+1,(0,s.asyncXhrAuthedPost)("/ajax/get_notify.json",{type:e,index:f,size:d},n()).then(function(n){var c=[],l=n.last_read_time;switch(e){case P:c=o(n,l);break;case C:case j:c=a(n,l);break;case R:c=u(n,l)}var s=c.length===d;f=s?d-1:d,s&&c.pop(),t(r(c,s,f,i,l))})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.reset=t.TYPE_SYSTEM=t.TYPE_ITEM=t.TYPE_ACTIVITY=t.TYPE_CONTRACT=void 0,t.parseActivityNotify=a,t.parseContractNotify=o,t.parseItemNotify=u,t.fetchMoreData=c,t.fetchUnreadCount=l;var s=n(8),f=n(53),d=n(2),p="id",y="notify",h=10,_=function(e){return"NOTIFY.ACTION."+e},m=_("FETCHING"),b=_("FETCHEDUNREAD"),v=_("FETCHED"),g=_("FETCHEDMORE"),T=_("RESET"),E=_("RESET_RECURSIVE_TIMES"),O=10,P=t.TYPE_CONTRACT=1,C=t.TYPE_ACTIVITY=0,R=t.TYPE_ITEM=4,j=t.TYPE_SYSTEM=6,w=(t.reset=function(){return{type:T}},function(e,t){return{type:m,fetchType:e,expireFlag:t}}),N=function(e){return{type:b,unreadCount:e}},M=function(e,t,n,r){return{type:v,records:e,isPaginable:t,index:n,lastReadTime:r}},x=function(e){return{type:g,records:e}},k=function(){return{type:E}},I={expireFlag:null,isPaginable:!0,isFetching:!1,unreadCount:{CONTRACT:0,ACTIVITY:0,SYSTEM:0,ITEM:0},size:h,records:[],fetchType:0,index:0,lastReadTime:0};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments[1];switch(t.type){case m:return Object.assign({},e,{expireFlag:t.expireFlag,fetchType:t.fetchType,isFetching:!0});case b:return Object.assign({},e,{unreadCount:t.unreadCount});case v:return Object.assign({},e,{isFetching:!1,records:t.records,isPaginable:t.isPaginable,index:t.index,lastReadTime:t.lastReadTime});case g:return Object.assign({},e,{isFetching:!1,isPaginable:t.records.length%e.size==0,records:e.records.concat(t.records),index:e.index+t.records.length});case E:return Object.assign({},e,{recursiveTimes:0});case T:return I;default:return e}}},2170:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),s=n(3),f=r(s),d=n(1920),p=r(d),y=n(1550),h=r(y),_=n(1559),m=r(_),b=n(1923),v=r(b),g=n(1922),T=r(g),E=n(2023),O=r(E),P=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"componentDidMount",value:function(){this.props.dispatchUnreadCount()}},{key:"componentWillUnmount",value:function(){this.props.dispatchReset()}},{key:"render",value:function(){var e=this.props.notify,t=e.unreadCount,n=e.isFetching,r=e.records,i=e.isPaginable;return l.default.createElement(T.default,{titleText:"通知"},l.default.createElement(v.default,{navs:p.default.navs,unreads:t}),l.default.createElement(h.default,{minHeight:500,noDataText:!1===n&&0===r.length?"尚無任何評價":null,isInitialFetching:n&&0===r.length},l.default.createElement(m.default,{isPaginable:i,isFetching:n,loadMore:this.props.dispatchMore},r.map(function(e){return l.default.createElement(O.default,{key:e.id,type:e.type,url:e.url,message:e.message,createTime:e.createTime,isRead:e.isRead})}))))}}]),t}(l.default.Component);P.propTypes={dispatchUnreadCount:f.default.func.isRequired,dispatchReset:f.default.func.isRequired,dispatchMore:f.default.func.isRequired,notify:f.default.shape({isFetching:f.default.bool}).isRequired},t.default=P}});