webpackJsonp([85],{1445:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(19),o=n(78),r=n(77),a=n(166),l=n(2097),u=function(e){return e&&e.__esModule?e:{default:e}}(l),s=function(e){return{environment:e.environment,login:e[a.REDUCER_KEY]}},c=function(e){var t=function(t){e((0,o.login)(t)),e((0,r.redirectAfterLogin)("/"))},n=function(n){var i=n.email,o=n.password;e((0,a.loginEmail)({email:i,password:o})).then(t)},i=function(n){var i=n.phone,o=n.password;e((0,a.loginPhone)({phone:i,password:o})).then(t)},l=function(n){var i=n.userID,o=n.accessToken,r=n.name;return e((0,a.loginFacebook)({userID:i,accessToken:o,name:r})).then(t)};return{dispatchChangeForm:function(t){return e((0,a.changeForm)(t))},dispatchSwitchEmailLogin:function(){return e((0,a.switchLoginByEmail)())},dispatchSwitchPhoneLogin:function(){return e((0,a.switchLoginByPhone)())},dispatchLoginEmail:n,dispatchLoginPhone:i,dispatchLoginFB:l,dispatchReset:function(){return e((0,a.reset)())}}};t.default=(0,i.connect)(s,c)(u.default)},2097:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),c=i(s),d=n(3),f=i(d),p=n(23),g=n(574),h=i(g),_=n(555),m=i(_),E=n(86),L=i(E),w=n(203),v=i(w),O=n(155),b=i(O),y=n(231),P=n(158),I=i(P),N=n(166),B=n(2),R=n(14),k=i(R),C=n(5),Y=i(C),q=n(2259),M=i(q),G=k.default.bind(M.default),j=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.login=n.login.bind(n),n}return l(t,e),u(t,[{key:"componentDidMount",value:function(){this.props.dispatchReset()}},{key:"login",value:function(){var e,t=this.loginInput.valid(),n=this.passwordInput.valid();if(t&&n){var i=this.props,r=i.dispatchLoginEmail,a=i.dispatchLoginPhone,l=i.login,u=i.login.loginBy;(0,(e={},o(e,N.LOGIN_BY_EMAIL,r),o(e,N.LOGIN_BY_PHONE,a),e)[u])(l)}}},{key:"renderError",value:function(){var e=this.props.login.loginError;return e?c.default.createElement(v.default,{text:e}):null}},{key:"renderLoading",value:function(){return this.props.login.isLoading?c.default.createElement(b.default,null):null}},{key:"render",value:function(){var e,t,n,i=this,r=this.props,a=r.login,l=a.loginBy,u=a.email,s=a.phone,d=a.password,f=r.dispatchChangeForm,g=r.dispatchSwitchPhoneLogin,E=r.dispatchSwitchEmailLogin,w=r.dispatchLoginFB;return c.default.createElement("div",{styleName:"container"},this.renderLoading(),this.renderError(),(e={},o(e,N.LOGIN_BY_EMAIL,c.default.createElement(m.default,{ref:function(e){return i.loginInput=e},icon:_.ICON_TYPE_EMAIL,placeholder:"Email",onChange:function(e){return f({email:e})},onEnter:this.login,value:u,constraints:I.default.email})),o(e,N.LOGIN_BY_PHONE,c.default.createElement(m.default,{ref:function(e){return i.loginInput=e},icon:_.ICON_TYPE_PHONE,placeholder:"手機號碼",onChange:function(e){return f({phone:e})},onEnter:this.login,value:s,constraints:I.default.phone})),e)[l],c.default.createElement(m.default,{ref:function(e){return i.passwordInput=e},icon:_.ICON_TYPE_PASSWORD,placeholder:"密碼",type:"password",onChange:function(e){return f({password:e})},onEnter:this.login,value:d,constraints:I.default.password}),c.default.createElement("div",{className:G("row")},c.default.createElement(L.default,{content:"登入",size:"lg",style:{width:"100%"},onClick:this.login})),c.default.createElement("div",{className:G("row","border-top-line")},c.default.createElement(L.default,{content:(t={},o(t,N.LOGIN_BY_EMAIL,"使用手機號碼登入"),o(t,N.LOGIN_BY_PHONE,"使用 Email 登入"),t)[l],colorType:"greenBorder",size:"lg",style:{width:"100%"},onClick:(n={},o(n,N.LOGIN_BY_EMAIL,g),o(n,N.LOGIN_BY_PHONE,E),n)[l]})),c.default.createElement("div",{className:G("row")},c.default.createElement(h.default,{appId:y.FACEBOOK_APP_ID,textButton:"Facebook 登入",fields:"name,email,picture",callback:w})),c.default.createElement("div",{className:G("row","forgot-password")},c.default.createElement(p.Link,{to:B.forgotPasswordPath},"忘記密碼？")),c.default.createElement("div",{className:G("row","regist-suggest","border-top-line")},"還沒有帳號嗎?  ",c.default.createElement(p.Link,{to:B.registrationPath},"註冊")))}}]),t}(c.default.Component);j.propTypes={login:f.default.shape({isLoading:f.default.bool.isRequired,loginBy:f.default.oneOf([N.LOGIN_BY_EMAIL,N.LOGIN_BY_PHONE]).isRequired,email:f.default.string.isRequired,phone:f.default.string.isRequired,password:f.default.string.isRequired}).isRequired,dispatchChangeForm:f.default.func.isRequired,dispatchSwitchEmailLogin:f.default.func.isRequired,dispatchSwitchPhoneLogin:f.default.func.isRequired,dispatchLoginEmail:f.default.func.isRequired,dispatchLoginPhone:f.default.func.isRequired,dispatchLoginFB:f.default.func.isRequired,dispatchReset:f.default.func.isRequired},t.default=(0,Y.default)(j,M.default)},2259:function(e,t){e.exports={container:"Login_container_1-toD","border-top-line":"Login_border-top-line_3fjBG",alert:"Login_alert_MlONU",row:"Login_row_pXpPP","forgot-password":"Login_forgot-password_3TJgt","regist-suggest":"Login_regist-suggest_2Ki7O"}}});