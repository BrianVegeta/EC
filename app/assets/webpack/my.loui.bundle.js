webpackJsonp([54],{1454:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(19),a=r(2135),o=function(e){return e&&e.__esModule?e:{default:e}}(a),i=r(85),s=function(e,t){var r=e.environment,n=e.myOrder,a=e.auth,o=t.params;return{environment:r,myOrder:n,currentUser:a.currentUser,tabName:o.tabName}},c=function(e,t){var r=t.params;return{dispatch:e,dispatchRecords:function(){return e((0,i.fetchRecords)(i.ROLE_LESSEE,i.TYPE_USED_ITEM,r.tabName))},dispatchReset:function(){return e((0,i.reset)())}}};t.default=(0,n.connect)(s,c)(o.default)},1536:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(0),u=n(c),l=r(3),d=n(l),f=r(14),p=n(f),h=r(200),_=n(h),y=r(5),b=n(y),m=r(1537),E=n(m),v=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"renderContent",value:function(){var e=this.props,t=e.isInitialFetching,r=e.noDataText,n=e.children;return t?u.default.createElement(_.default,null):r?u.default.createElement("div",{styleName:"no-data"},r):n}},{key:"render",value:function(){var e=this.props.minHeight;return u.default.createElement("div",{styleName:"container",style:{minHeight:e}},this.renderContent())}}]),t}(u.default.Component);v.defaultProps={minHeight:400,noDataText:null},v.propTypes={children:p.default.children.isRequired,noDataText:d.default.string,minHeight:d.default.number,isInitialFetching:d.default.bool.isRequired},t.default=(0,b.default)(v,E.default)},1537:function(e,t){e.exports={container:"ListContainer_container_2ZP1q","no-data":"ListContainer_no-data_2O1SC"}},1549:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(0),u=n(c),l=r(3),d=n(l),f=r(5),p=n(f),h=r(1551),_=n(h),y=r(14),b=n(y),m=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.icon,r=e.titleText,n=e.children;return u.default.createElement("div",{styleName:"container"},u.default.createElement("div",{styleName:"header"},u.default.createElement("h1",{styleName:"title"},t&&t({size:48,style:{verticalAlign:"top"}}),u.default.createElement("span",{styleName:"text"},r))),u.default.createElement("div",{styleName:"body"},n))}}]),t}(u.default.Component);m.defaultProps={icon:null},m.propTypes={icon:d.default.func,titleText:d.default.string.isRequired,children:b.default.children.isRequired},t.default=(0,p.default)(m,_.default)},1551:function(e,t){e.exports={container:"Container_container_1jgWb",header:"Container_header_2w5kE",title:"Container_title_2jnjz",text:"Container_text_3f4tb",body:"Container_body_12gU_"}},1652:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(0),u=n(c),l=r(3),d=n(l),f=r(23),p=r(15),h=n(p),_=r(5),y=n(_),b=r(1660),m=n(b),E=h.default.bind(m.default),v=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.path,r=e.onClick,n=e.text,a=e.isActive;return t?u.default.createElement("div",{className:E("container",{active:a})},u.default.createElement(f.Link,{to:t,styleName:"innerText"},n)):u.default.createElement("button",{className:"button "+E("container",{active:a}),onClick:r},u.default.createElement("div",{styleName:"innerText"},n))}}]),t}(u.default.Component);v.defaultProps={isActive:!1,path:null,onClick:null},v.propTypes={path:d.default.string,onClick:d.default.func,text:d.default.string.isRequired,isActive:d.default.bool},t.default=(0,y.default)(v,m.default)},1660:function(e,t){e.exports={container:"RoundButton_container_3kI8I",innerText:"RoundButton_innerText_z5sev",active:"RoundButton_active_22-9s"}},1668:function(e,t,r){"use strict";function n(e){switch(e){case 1:return"建立訂單時間";case 4:return"訂單成立時間";case 5:return"付款時間";case 11:return"完成時間";default:return""}}function a(e,t){var r="",n="";switch(e){case 1:case 2:r="請同意預訂單",n="請在"+(0,f.formatDate)(t)+"出貨前同意預訂單，逾時將自動取消。";break;case 3:r="待對方修改預訂單",n="在對方修改後，您才能進行同意。";break;case 4:r="待對方付款",n="完成付款後，您將會收到信箱以及推播通知。";break;case 5:r="待出貨",n="請於"+(0,f.formatDateForOrder)(t)+"前安排出貨，為了保障您的權益，出貨前建議先拍下物品的狀態";break;case 6:case 7:r="等待對方收貨",n="";break;case 8:r="交易進行中",n="";break;case 9:r="訂單已結束，等待對方寄還",n="提醒您，當對方確認寄還後，您將會收到推播以及email通知。";break;case 10:r="對方已寄還",n="對方已將物品寄還。";break;case 11:r="已完成",n="對方已將物品寄還。";break;case 12:case 13:r="已評分",n="您已完成評價，謝謝您使用ShareApp！"}return{title:r,text:n}}function o(e,t){var r="",n="";switch(e){case 1:case 2:r="等待對方同意",n="在對方同意您的預訂後您才能進行付款。";break;case 3:r="待您修改預訂單",n="在您修改後，對方才可同意。";break;case 4:r="尚未付款",n="請在"+(0,f.formatDate)(t)+"前完成付款，逾時將自動取消。";break;case 5:r="待對方出貨",n="您已成功付款，我們會通知對方進行出貨。";break;case 6:case 7:r="對方已出貨",n="";break;case 8:r="交易進行中",n="";break;case 9:r="待寄還",n="出貨時建議將物品拍照，拍照記錄能保障您的交易安全。";break;case 10:r="已寄還，待對方收件",n="";break;case 11:r="已完成",n="交易完成！請給對方評價吧！";break;case 12:case 13:r="已評分",n="您已完成評價，謝謝您使用ShareApp！"}return{title:r,text:n}}function i(e,t){var r="",n="";switch(e){case 1:case 2:r="請同意預訂單",n="請在"+(0,f.formatDateForOrder)(t)+"前同意預訂單，逾時將自動取消。";break;case 3:r="待對方修改預訂單",n="在對方修改後，您才能進行同意";break;case 4:r="待對方付款",n="完成付款後，您將會收到信箱以及推播通知。";break;case 5:case 6:case 7:r="等待交易開始",n="將在"+(0,f.formatDateForOrder)(t)+"開始";break;case 8:case 9:case 10:r="交易進行中",n="";break;case 11:r="已完成",n="交易完成！請給對方評價吧！";break;case 12:case 13:r="已評分",n="您已完成評價，謝謝您使用ShareApp！"}return{title:r,text:n}}function s(e,t){var r="",n="";switch(e){case 1:case 2:r="請同意預訂單",n="在對方同意您的預訂後您才能進行付款。";break;case 3:r="待您修改預訂單",n="在您修改後，對方才可同意。";break;case 4:r="尚未付款",n="請在"+(0,f.formatDate)(t)+"前完成付款，逾時將自動取消。";break;case 5:case 6:case 7:r="等待交易開始",n="將在"+(0,f.formatDateForOrder)(t)+"開始";break;case 8:case 9:case 10:r="交易進行中",n="";break;case 11:r="已完成",n="交易完成！請給對方評價吧！";break;case 12:case 13:r="已評分",n="您已完成評價，謝謝您使用ShareApp！"}return{title:r,text:n}}function c(e,t){var r="",n="";switch(e){case 1:case 2:r="請同意預訂單",n="請在"+(0,f.formatDateForOrder)(t)+"前同意預訂單，逾時將自動取消。";break;case 3:r="待對方修改預訂單",n="在對方修改後，您才能進行同意";break;case 4:r="待對方付款",n="完成付款後，您將會收到信箱以及推播通知。";break;case 5:case 6:case 7:r="等待交易開始",n="將在"+(0,f.formatDateForOrder)(t)+"開始";break;case 8:case 9:case 10:r="交易進行中",n="";break;case 11:r="已完成",n="交易完成！請給對方評價吧！";break;case 12:case 13:r="已評分",n="您已完成評價，謝謝您使用ShareApp！"}return{title:r,text:n}}function u(e,t){var r="",n="";switch(e){case 1:case 2:r="請同意預訂單",n="在對方同意您的預訂後您才能進行付款。";break;case 3:r="待您修改預訂單",n="在您修改後，對方才可同意。";break;case 4:r="尚未付款",n="請在"+(0,f.formatDate)(t)+"前完成付款，逾時將自動取消。";break;case 5:case 6:case 7:r="等待交易開始",n="將在"+(0,f.formatDateForOrder)(t)+"開始";break;case 8:case 9:case 10:r="交易進行中",n="";break;case 11:r="已完成",n="交易完成！請給對方評價吧！";break;case 12:case 13:r="已評分",n="您已完成評價，謝謝您使用ShareApp！"}return{title:r,text:n}}function l(e,t,r){var n="",a="";switch(e){case 1:case 2:case 3:case 4:n="待對方付款",a="完成付款後，您將會收到信箱以及推播通知。";break;case 5:n="待出貨",a="對方已付款，請您盡快出貨";break;case 6:case 7:t?r?(n="已評分",a="您已完成評價，謝謝您使用ShareApp！"):(n="已完成",a="交易完成！請給對方評價吧！"):(n="等待對方收貨",a="請與對方確認貨是否送達");break;case 8:case 9:case 10:case 11:case 12:case 13:n="已評分",a="您已完成評價，謝謝您使用ShareApp！"}return{title:n,text:a}}function d(e,t,r){var n="",a="";switch(e){case 1:case 2:case 3:case 4:n="尚未付款",a="請在三天內完成付款，逾時將自動取消。";break;case 5:n="待對方出貨",a="您已成功付款，我們會通知對方進行出貨。";break;case 6:case 7:t?r?(n="已評分",a="您已完成評價，謝謝您使用ShareApp！"):(n="已完成",a="交易完成！請給對方評價吧！"):(n="對方已出貨",a="到貨後，請告訴對方您已收到貨");break;case 8:case 9:case 10:case 11:case 12:case 13:n="已評分",a="您已完成評價，謝謝您使用ShareApp！"}return{title:n,text:a}}Object.defineProperty(t,"__esModule",{value:!0}),t.generateContractLog=n,t.generateOwnerItemString=a,t.generateLesseeItemString=o,t.generateOwnerServiceString=i,t.generateLesseeServiceString=s,t.generateOwnerSpaceString=c,t.generateLesseeSpaceString=u,t.generateOwnerUsedItemString=l,t.generateLesseeUsedItemString=d;var f=r(13)},1698:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.USED_ITEM=t.SPACE=t.SERVICE=t.ITEM=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(0),u=n(c),l=r(3),d=n(l),f=r(23),p=r(1652),h=n(p),_=r(2),y=r(85),b=t.ITEM=0,m=t.SERVICE=1,E=t.SPACE=2,v=t.USED_ITEM=3,T=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"redirect",value:function(e){if(this.props.isOwner)switch(e){case b:return f.browserHistory.push(_.my.ownerOrderItem(y.TAB_REQUEST));case m:return f.browserHistory.push(_.my.ownerOrderService(y.TAB_REQUEST));case E:return f.browserHistory.push(_.my.ownerOrderSpace(y.TAB_REQUEST));case v:return f.browserHistory.push(_.my.ownerOrderUsedItem(y.TAB_PAY));default:return f.browserHistory.push("/")}switch(e){case b:return f.browserHistory.push(_.my.lesseeOrderItem(y.TAB_REQUEST));case m:return f.browserHistory.push(_.my.lesseeOrderService(y.TAB_REQUEST));case E:return f.browserHistory.push(_.my.lesseeOrderSpace(y.TAB_REQUEST));case v:return f.browserHistory.push(_.my.lesseeOrderUsedItem(y.TAB_PAY));default:return f.browserHistory.push("/")}}},{key:"render",value:function(){var e=this,t=this.props.activeType;return u.default.createElement("div",{style:{paddingBottom:20}},u.default.createElement(h.default,{text:"物品",isActive:t===b,onClick:function(){e.redirect(b)}}),u.default.createElement(h.default,{text:"服務",isActive:t===m,onClick:function(){e.redirect(m)}}),u.default.createElement(h.default,{text:"空間",isActive:t===E,onClick:function(){e.redirect(E)}}),u.default.createElement(h.default,{text:"二手",isActive:t===v,onClick:function(){e.redirect(v)}}))}}]),t}(u.default.Component);T.defaultProps={isOwner:!1},T.propTypes={isOwner:d.default.bool,activeType:d.default.number.isRequired},t.default=T},1699:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(0),u=n(c),l=r(3),d=n(l),f=r(23),p=r(15),h=n(p),_=r(5),y=n(_),b=r(1752),m=n(b),E=h.default.bind(m.default),v=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"renderCircle",value:function(e){return e in this.props.unreads&&this.props.unreads[e]>0?u.default.createElement("div",{styleName:"notice-circle"},this.props.unreads[e]):null}},{key:"render",value:function(){var e=this,t=this.props.navs;return u.default.createElement("div",{styleName:"container"},u.default.createElement("ul",{className:"clear"},t.map(function(t,r){return u.default.createElement(f.Link,{key:""+(r+1),to:t.href,activeClassName:E("active"),onlyActiveOnIndex:!0},u.default.createElement("li",null,t.name,e.renderCircle(t.tabName)))})))}}]),t}(u.default.Component);v.propTypes={navs:d.default.arrayOf(d.default.shape({name:d.default.string.isRequired,href:d.default.string.isRequired,tabName:d.default.string.isRequired}).isRequired).isRequired,unreads:d.default.arrayOf(d.default.number.isRequired)},v.defaultProps={unreads:[]},t.default=(0,y.default)(v,m.default)},1752:function(e,t){e.exports={container:"OrderNavigation_container_1v-eD","notice-circle":"OrderNavigation_notice-circle_2rQRJ",active:"OrderNavigation_active_1PFBs"}},1994:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),l=n(u),d=r(3),f=n(d),p=r(23),h=r(2),_=r(133),y=n(_),b=r(108),m=n(b),E=r(84),v=n(E),T=r(131),O=r(1668),g=r(5),w=n(g),A=r(15),S=n(A),P=r(35),k=r(208),R=r(539),B=r(2010),N=n(B),I=S.default.bind(N.default),C=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),c(t,[{key:"generateEditAddress",value:function(){var e=this.props.order,t=e.cid,r=e.pid;return function(){return p.browserHistory.push(h.reservationUsedGoods.indexPath(r,t))}}},{key:"generatePayment",value:function(){var e=this.props.order,t=e.paymenttype,r=e.cid,n=e.dispatch;switch(t){case 4:return function(){n((0,R.doCreditCardPayment)(r)).catch(function(e){alert(e)})};case 1:return function(){var e={};n((0,P.popupATMBank)(e)),n((0,R.doATMPayment)(r))};default:return function(){}}}},{key:"callScorePanel",value:function(e){var t=this,r=this.props,n=r.isOwner,a=r.order,o=a.cid,i=a.owner_comment,s=a.lessee_comment,c=a.lesseescore,u=a.ownerscore,l=n?c:u,d=n?s:i;this.props.dispatch((0,P.popupScoreRating)({isView:e,targetName:this.props.photoName,targetScore:l,targetComment:d,targetUrl:this.props.photoHead,onScore:function(e,r){t.props.dispatch((0,R.doScore)(o,e,r)).then(function(){t.props.dispatch((0,R.resetAction)()),t.props.dispatchRefresh&&t.props.dispatchRefresh()}).catch(function(e){alert(e)})}}))}},{key:"generateString",value:function(){var e=this.props,t=e.isOwner,r=e.order,n=r.contractstage,a=r.lessee_receive,o=r.lesseescore,i=r.ownerscore,s={title:"",text:""};if(n<1e3)return t?(0,O.generateOwnerUsedItemString)(n,a,o):(0,O.generateLesseeUsedItemString)(n,a,i);if(n>1e3&&n<3e3){var c=n%100;s.title=c<11?"申訴中":"申訴完成"}else s.title="合約已取消";return s}},{key:"renderAction",value:function(){return!0===this.props.isOwner?this.renderOwnerActions():this.renderLesseeActions()}},{key:"renderOwnerActions",value:function(){var e=this,t=this.props.order,r=t.display,n=t.cid,a=r.can_ship,o=r.can_score,i=r.view_score,c={size:"sm",width:"auto",style:{borderRadius:"100px",padding:"7px 7px",marginLeft:10,display:"inline-block"}};return l.default.createElement("div",{styleName:"oib-action-section"},a&&l.default.createElement(v.default,s({colorType:"greenBorder"},c,{content:"安排出貨",onClick:function(){e.props.dispatch((0,R.doShipGoods)(n)).then(function(){e.props.dispatch((0,R.resetAction)()),e.props.dispatchRefresh&&e.props.dispatchRefresh()}).catch(function(e){alert(e)})}})),o&&l.default.createElement(v.default,s({colorType:"greenBorder"},c,{content:"評分",onClick:function(){return e.callScorePanel(!1)}})),i&&l.default.createElement(v.default,s({colorType:"greenBorder"},c,{content:"查看評價",onClick:function(){return e.callScorePanel(!0)}})),l.default.createElement(v.default,s({colorType:"green"},c,{content:"查看詳情",onClick:function(){return p.browserHistory.push(h.orderDetail.indexPath(n))}})))}},{key:"renderLesseeActions",value:function(){var e=this,t=this.props.order,r=t.display,n=t.cid,a=r.can_edit,o=r.can_pay,i=r.can_ship_confirm,c=r.can_score,u=r.view_score,d={size:"sm",width:"auto",style:{padding:"7px 7px",marginLeft:10,display:"inline-block"}};return l.default.createElement("div",{styleName:"oib-action-section"},a&&l.default.createElement(v.default,s({colorType:"greenBorder"},d,{content:"修改預訂單",onClick:this.generateEditAddress()})),o&&l.default.createElement(v.default,s({colorType:"greenBorder"},d,{content:"付款",onClick:this.generatePayment()})),i&&l.default.createElement(v.default,s({colorType:"greenBorder"},d,{content:"確認收貨",onClick:function(){e.props.dispatch((0,R.doReceiveConfirm)(n)).then(function(){e.props.dispatch((0,R.resetAction)()),e.props.dispatchRefresh&&e.props.dispatchRefresh()}).catch(function(e){alert(e)})}})),c&&l.default.createElement(v.default,s({colorType:"greenBorder"},d,{content:"評分",onClick:function(){return e.callScorePanel(!1)}})),u&&l.default.createElement(v.default,s({colorType:"greenBorder"},d,{content:"查看評價",onClick:function(){return e.callScorePanel(!0)}})),l.default.createElement(v.default,s({colorType:"greenBorder"},d,{content:"查看詳情",onClick:function(){return p.browserHistory.push(h.orderDetail.indexPath(n))}})))}},{key:"render",value:function(){var e=this.props,t=e.photoHead,r=e.photoName,n=e.photoUid,a=e.isRead,o=e.order,i=o.cid_no,s=o.unit,c=o.pname,u=o.img1,d=o.lesseepayfee,f=e.dispatch,p=this.generateString();return l.default.createElement("div",{className:"clear "+I("oib-board-border",{colored:!a})},l.default.createElement("div",{styleName:"oib-header-section"},l.default.createElement("div",{styleName:"oib-header-avatar-style"},l.default.createElement(m.default,{src:t,width:40})),l.default.createElement("div",{styleName:"oib-header-name-style"},r),l.default.createElement("div",{styleName:"oib-header-chat-style"},l.default.createElement(v.default,{colorType:"greenBorder",size:"sm",style:{fontSize:14,lineHeight:"14px",padding:"7px 15px"},content:"私訊",onClick:function(){return f((0,k.addToChatRoom)({uid:n,name:r,picture:t}))}})),l.default.createElement("div",{styleName:"oib-mini-note-section"},p.title)),l.default.createElement("div",{styleName:"oib-body-section",className:"clear"},l.default.createElement("div",{styleName:"oib-pic-style"},l.default.createElement(y.default,{src:u,width:120})),l.default.createElement("div",{styleName:"oib-content-style"},l.default.createElement("div",{styleName:"oib-hint-style"},"訂單編號："+i),l.default.createElement("div",{styleName:"oib-text-style"},""+c),l.default.createElement("div",{styleName:"oib-price-section"},l.default.createElement("div",{styleName:"oib-unit-style"},s,"件"),l.default.createElement("div",{styleName:"oib-price-style"},"總計 ",(0,T.formatCurrency)(d))))),l.default.createElement("div",{styleName:"oib-hint-section"},p.text),this.renderAction())}}]),t}(l.default.Component);C.defaultProps={isOwner:!1,lesseeReceive:!1,targetScore:0,targetComment:"",photoHead:""},C.propTypes={photoHead:f.default.string,photoName:f.default.string.isRequired,photoUid:f.default.string.isRequired,isOwner:f.default.bool,isRead:f.default.bool.isRequired,order:f.default.shape({cid:f.default.number}).isRequired,dispatch:f.default.func.isRequired,dispatchRefresh:f.default.func.isRequired},t.default=(0,w.default)(C,N.default)},2010:function(e,t){e.exports={"oib-board-border":"UsedItemBoard_oib-board-border_3KhqW",colored:"UsedItemBoard_colored_2dT2D","oib-header-section":"UsedItemBoard_oib-header-section_2BrgF","oib-header-avatar-style":"UsedItemBoard_oib-header-avatar-style_1flZL","oib-header-name-style":"UsedItemBoard_oib-header-name-style_1-aaA","oib-mini-note-section":"UsedItemBoard_oib-mini-note-section_2fme7","oib-header-chat-style":"UsedItemBoard_oib-header-chat-style_19e4P","oib-body-section":"UsedItemBoard_oib-body-section_18B7k","oib-pic-style":"UsedItemBoard_oib-pic-style_15l__","oib-content-style":"UsedItemBoard_oib-content-style_2xf1t","oib-date-style":"UsedItemBoard_oib-date-style_2WuFn","oib-text-style":"UsedItemBoard_oib-text-style_1_Iws","oib-hint-style":"UsedItemBoard_oib-hint-style_1ggaW","oib-price-section":"UsedItemBoard_oib-price-section_VstSU","oib-unit-style":"UsedItemBoard_oib-unit-style_WyWS6","oib-price-style":"UsedItemBoard_oib-price-style_-xQcj","oib-footer-section":"UsedItemBoard_oib-footer-section_2B6zQ","oib-hint-section":"UsedItemBoard_oib-hint-section_2lZj5","oib-action-section":"UsedItemBoard_oib-action-section_2FWBP"}},2135:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(0),u=n(c),l=r(3),d=n(l),f=r(2),p=r(1536),h=n(p),_=r(1994),y=n(_),b=r(1698),m=n(b),E=r(1699),v=n(E),T=r(1549),O=n(T),g=r(85),w=function(e){function t(e){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.refreshScreen=r.refreshScreen.bind(r),r}return i(t,e),s(t,[{key:"componentDidMount",value:function(){this.refreshScreen()}},{key:"componentDidUpdate",value:function(e){e.tabName!==this.props.tabName&&this.refreshScreen()}},{key:"componentWillUnmount",value:function(){this.props.dispatchReset()}},{key:"refreshScreen",value:function(){this.props.dispatchReset(),this.props.dispatchRecords()}},{key:"render",value:function(){var e=this,t=this.props.myOrder;if(null==t)return null;var r=t.records,n=t.isFetching,a=t.unreads,o=[{name:"尚未付款",href:f.my.lesseeOrderUsedItem(g.TAB_PAY),tabName:g.TAB_PAY},{name:"待出貨",href:f.my.lesseeOrderUsedItem(g.TAB_SHIPPING),tabName:g.TAB_SHIPPING},{name:"運送中",href:f.my.lesseeOrderUsedItem(g.TAB_SHIPPING_CONFIRM),tabName:g.TAB_SHIPPING_CONFIRM},{name:"完成",href:f.my.lesseeOrderUsedItem(g.TAB_COMPLETE),tabName:g.TAB_COMPLETE},{name:"取消",href:f.my.lesseeOrderUsedItem(g.TAB_CANCEL),tabName:g.TAB_CANCEL},{name:"退貨/申訴中",href:f.my.lesseeOrderUsedItem(g.TAB_SUE),tabName:g.TAB_SUE},{name:"退貨/申訴完成",href:f.my.lesseeOrderUsedItem(g.TAB_SUE_COMPLETE),tabName:g.TAB_SUE_COMPLETE}];return u.default.createElement(O.default,{titleText:"消費狀態"},u.default.createElement(m.default,{activeType:b.USED_ITEM}),u.default.createElement(v.default,{navs:o,unreads:a}),u.default.createElement(h.default,{minHeight:500,noDataText:!1===n&&0===r.length?"尚無任何預定":null,isInitialFetching:n&&0===r.length},r.map(function(t,r){return u.default.createElement(y.default,{key:""+(r+1),type:"USED_ITEM",photoHead:t.owner_img,photoName:t.owner_nick_name,photoUid:t.owneruid,isOwner:!1,isRead:t.lessee_read,order:t,dispatch:e.props.dispatch,dispatchRefresh:e.refreshScreen})})))}}]),t}(u.default.Component);w.propTypes={dispatchRecords:d.default.func.isRequired,dispatchReset:d.default.func.isRequired,tabName:d.default.string.isRequired,dispatch:d.default.func.isRequired},t.default=w},85:function(e,t,r){"use strict";function n(e,t,r,n){return function(a,o){n===o()[c].expireFlag&&a(y(e,t,r))}}function a(e,t,r){return function(a,o){var i=o(),c=i.auth,u=c.currentUser,l=Date.now();a(_(l)),(0,s.asyncXhrAuthedPost)("/ajax/get_my_order.json",{role_type:e,type:t,uid:u.uid},o()).then(function(t){a(n(t,e,r,l))})}}Object.defineProperty(t,"__esModule",{value:!0}),t.reset=t.TAB_NULL=t.TAB_SUE_COMPLETE=t.TAB_SUE=t.TAB_CANCEL=t.TAB_COMPLETE=t.TAB_RETURN_CONFIRM=t.TAB_RETURN=t.TAB_ONGOING=t.TAB_WAITING_TO_GO=t.TAB_SHIPPING_CONFIRM=t.TAB_SHIPPING=t.TAB_PAY=t.TAB_REQUEST=t.TYPE_USED_ITEM=t.TYPE_SPACE=t.TYPE_SERVICE=t.TYPE_ITEM=t.ROLE_BOTH=t.ROLE_LESSEE=t.ROLE_OWNER=void 0;var o=r(158),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.fetchRecords=a;var s=r(7),c="myOrder",u=function(e){return"MY.ORDER."+e},l=u("FETCHED"),d=u("FETCHING"),f=u("RESET"),p=t.ROLE_OWNER="OWNER",h=t.ROLE_LESSEE="LESSEE",_=(t.ROLE_BOTH="BOTH",t.TYPE_ITEM="ITEM",t.TYPE_SERVICE="SERVICE",t.TYPE_SPACE="SPACE",t.TYPE_USED_ITEM="USED_ITEM",t.TAB_REQUEST="TAB_REQUEST",t.TAB_PAY="TAB_PAY",t.TAB_SHIPPING="TAB_SHIPPING",t.TAB_SHIPPING_CONFIRM="TAB_SHIPPING_CONFIRM",t.TAB_WAITING_TO_GO="TAB_WAITING_TO_GO",t.TAB_ONGOING="TAB_ONGOING",t.TAB_RETURN="TAB_RETURN",t.TAB_RETURN_CONFIRM="TAB_RETURN_CONFIRM",t.TAB_COMPLETE="TAB_COMPLETE",t.TAB_CANCEL="TAB_CANCEL",t.TAB_SUE="TAB_SUE",t.TAB_SUE_COMPLETE="TAB_SUE_COMPLETE",t.TAB_NULL="TAB_NULL",function(e){return{type:d,expireFlag:e}}),y=function(e,t,r){return{type:l,records:e,roleType:t,tabName:r}},b=(t.reset=function(){return{type:f}},{expireFlag:null,isFetching:!1,records:[],unreads:[]});t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments[1],r=[],n={},a="";switch(t.type){case d:return r=[],Object.assign({},e,{records:[],unreads:[],isFetching:!0,expireFlag:t.expireFlag});case l:return n=e.unreads,(0,i.default)(t.records,function(e){a=e.display.tab,a===t.tabName&&r.push(e),a in n?t.roleType===p?n[a]+=e.owner_read?0:1:t.roleType===h?n[a]+=e.lessee_read?0:1:(n[a]+=e.owner_read?0:1,n[a]+=e.lessee_read?0:1):t.roleType===p?n[a]=e.owner_read?0:1:t.roleType===h?n[a]=e.lessee_read?0:1:(n[a]=e.owner_read?0:1,n[a]=e.lessee_read?0:1)}),Object.assign({},e,{isFetching:!1,records:r,unreads:n});case f:return b;default:return e}}}});