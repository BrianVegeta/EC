webpackJsonp([9],{1518:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),r=n(23),o=n(2),i=n(32),l=n(2215),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=n(213),s=n(1925),d=function(e){var t=e.environment,n=e.reservationGoods,a=e.personalBankInfo,r=n.paymenttype;return{environment:t,reservation:n,isAtmChoosed:r===c.PAYMENT_TYPE_ATM,atmBankName:a.bankName,isCreditCardChoosed:r===c.PAYMENT_TYPE_CREDIT_CARD,isValid:(0,s.validatePaymentBy)(n,a.isReady).isValid}},f=function(e,t){var n=t.params.pid,a=t.location.query.cid,l=function(t){return e((0,i.popupBankInfoSetup)({password:t}))},u=function(){e((0,i.popupAccessCheck)({onChecked:l}))},d=o.reservationGoods.paymentPath,f=o.reservationGoods.confirmPath;return{dispatchChooseAtm:function(){return e((0,c.changeData)({paymenttype:c.PAYMENT_TYPE_ATM}))},dispatchChooseCreditCard:function(){return e((0,c.changeData)({paymenttype:c.PAYMENT_TYPE_CREDIT_CARD}))},dispatchBankSetup:u,dispatchValidate:function(){return e((0,s.validatePayment)())},dispatchTouchPath:function(){return e((0,c.touchPath)(d(n,a)))},nextStep:function(){return r.browserHistory.push(f(n,a))}}};t.default=(0,a.connect)(d,f)(u.default)},1530:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),r=n(23),o=n(2),i=n(32),l=n(2233),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=n(333),s=n(1928),d=function(e){var t=e.environment,n=e.reservationGoods,a=e.personalBankInfo,r=n.paymenttype;return{environment:t,reservation:n,isAtmChoosed:r===c.PAYMENT_TYPE_ATM,atmBankName:a.bankName,isCreditCardChoosed:r===c.PAYMENT_TYPE_CREDIT_CARD,isValid:(0,s.validatePaymentBy)(n,a.isReady).isValid}},f=function(e,t){var n=t.params.pid,a=t.location.query.cid,l=function(t){return e((0,i.popupBankInfoSetup)({password:t}))},u=function(){e((0,i.popupAccessCheck)({onChecked:l}))},d=o.reservationUsedGoods.paymentPath,f=o.reservationUsedGoods.confirmPath;return{dispatchChooseAtm:function(){return e((0,c.changeData)({paymenttype:c.PAYMENT_TYPE_ATM}))},dispatchChooseCreditCard:function(){return e((0,c.changeData)({paymenttype:c.PAYMENT_TYPE_CREDIT_CARD}))},dispatchBankSetup:u,dispatchValidate:function(){return e((0,s.validatePayment)())},dispatchTouchPath:function(){return e((0,c.touchPath)(d(n,a)))},nextStep:function(){return r.browserHistory.push(f(n,a))}}};t.default=(0,a.connect)(d,f)(u.default)},1552:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.STATUS_VALID=t.STATUS_LOADING=t.STATUS_DISABLE=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(0),s=a(c),d=n(3),f=a(d),p=n(519),m=a(p),y=n(14),h=a(y),_=n(5),v=a(_),b=n(1557),E=a(b),C=t.STATUS_DISABLE="STATUS_DISABLE",T=t.STATUS_LOADING="STATUS_LOADING",P=t.STATUS_VALID="STATUS_VALID",g=h.default.bind(E.default),A=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={status:null},n.onClickNext=n.onClickNext.bind(n),n}return l(t,e),u(t,null,[{key:"renderDisable",value:function(e){var t=e.onClick,n=e.text;return s.default.createElement("button",{className:"button "+g("button","disabled"),onClick:t},n)}},{key:"renderLoading",value:function(){var e=s.default.createElement("div",{styleName:"loading-icon"},s.default.createElement(m.default,{size:9,color:"#B8B8B8"}));return s.default.createElement("button",{className:"button "+g("button","disabled")},e,"儲存中")}},{key:"renderValid",value:function(e){var t=e.onClick,n=e.text;return s.default.createElement("button",{className:"button "+g("button","active"),onClick:t},n)}}]),u(t,[{key:"onClickNext",value:function(){var e=this.props,t=e.onClick,n=e.status,a=t;this.setState({status:n===P?T:null},a)}},{key:"render",value:function(){var e,t=this.constructor,n=t.renderDisable,a=t.renderLoading,o=t.renderValid,i=this.props.text;return(e={},r(e,C,n({onClick:this.onClickNext,text:i})),r(e,T,a()),r(e,P,o({onClick:this.onClickNext,text:i})),e)[this.state.status||this.props.status]}}]),t}(s.default.Component);A.defaultProps={text:"下一步",status:C},A.propTypes={text:f.default.string.isRequired,status:f.default.oneOf([C,T,P]),onClick:f.default.func.isRequired},t.default=(0,v.default)(A,E.default)},1553:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),s=n(3),d=a(s),f=n(11),p=a(f),m=n(5),y=a(m),h=n(1558),_=a(h),v=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.helperText,a=e.optional,r=e.children;return c.default.createElement("div",{styleName:"container"},c.default.createElement("div",{styleName:"title-container"},c.default.createElement("h2",{styleName:"title"},t,a&&c.default.createElement("span",{styleName:"titleHelper"},"（非必填）")),n&&c.default.createElement("span",{styleName:"helper"},n)),r)}}]),t}(c.default.Component);v.defaultProps={helperText:null,optional:!1},v.propTypes={children:p.default.children.isRequired,title:d.default.string.isRequired,helperText:d.default.string,optional:d.default.bool},t.default=(0,y.default)(v,_.default)},1557:function(e,t){e.exports={button:"NextStep_button_e8To5",active:"NextStep_active_2uSyl",disabled:"NextStep_disabled_dCatW","loading-icon":"NextStep_loading-icon_1tLMz"}},1558:function(e,t){e.exports={container:"FormContainer_container_2PVcv","title-container":"FormContainer_title-container_2qfVb",title:"FormContainer_title_1cLV5",titleHelper:"FormContainer_titleHelper_1Diqs",helper:"FormContainer_helper_1uffx"}},1574:function(e,t,n){function a(e,t,n,a){e=o(e)?e:u(e),n=n&&!a?l(n):0;var s=e.length;return n<0&&(n=c(s+n,0)),i(e)?n<=s&&e.indexOf(t,n)>-1:!!s&&r(e,t,n)>-1}var r=n(206),o=n(62),i=n(1586),l=n(325),u=n(1587),c=Math.max;e.exports=a},1575:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateService=void 0;var l=n(24),u=a(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(0),d=a(s),f=n(3),p=a(f),m=n(132),y=n(14),h=a(y),_=n(5),v=a(_),b=n(1608),E=a(b),C=n(1605),T=n(1604),P=a(T),g=h.default.bind(E.default),A=p.default.shape({text:p.default.string.isRequired,amount:p.default.number.isRequired}),k=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),c(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.priceDetail,a=t.depositDetail,r=t.couponDetail,o=t.discountDetail,i=t.total,l=!(0,u.default)(n,e.priceDetail),c=!(0,u.default)(a,e.depositDetail),s=!(0,u.default)(r,e.couponDetail),d=!(0,u.default)(o,e.discountDetail),f=!(0,u.default)(i,e.total);return!!l||(!!c||(!!s||(!!d||!!f)))}},{key:"renderPriceWithDiscounts",value:function(e){var t=e.priceDetail,n=e.discountDetail,a=this.constructor,r=a.renderDiscount,o=a.renderPrice;return n?r(t,n):o(t)}},{key:"renderDeposit",value:function(e){var t=e.depositDetail;return t?this.constructor.renderDetail(t):null}},{key:"renderCoupon",value:function(e){var t=e.couponDetail;if(!t)return null;return this.constructor.renderDetail(t,!0)}},{key:"render",value:function(){var e=this.props.total;return d.default.createElement(C.Container,null,this.renderPriceWithDiscounts(this.props),this.renderDeposit(this.props),this.renderCoupon(this.props),d.default.createElement(C.ConclusionDetail,{className:"clear"},d.default.createElement(C.ConclusionLabel,{highlight:!0},"總計"),d.default.createElement(C.ConclusionPrice,{highlight:!0},(0,m.formatCurrency)(e,"NTD "))))}}],[{key:"renderPrice",value:function(e){var t=e.text,n=e.amount,a=(0,m.formatCurrency)(n,"");return d.default.createElement("div",{className:"clear "+g("detail-container")},d.default.createElement("span",{styleName:"label"},t),d.default.createElement("span",{styleName:"price"},d.default.createElement("span",{styleName:"high-light"},a)))}},{key:"renderDiscount",value:function(e,t){var n=(0,m.formatCurrency)(e.amount,""),a=(0,m.formatCurrency)(t.amount,"");return d.default.createElement("div",{className:"clear "+g("detail-container")},d.default.createElement("span",{styleName:"label"},d.default.createElement("span",{styleName:"abandon"},e.text),d.default.createElement("span",null," ",t.text)),d.default.createElement("span",{styleName:"price"},d.default.createElement("span",{styleName:"abandon"},n),d.default.createElement("span",{styleName:"high-light"}," ",a)))}},{key:"renderDetail",value:function(e){var t=e.text,n=e.amount,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,m.formatCurrency)(n,"");return d.default.createElement("div",{className:"clear "+g("detail-container")},d.default.createElement("span",{styleName:"label"},t),d.default.createElement("span",{className:g("price",{discounted:a})},r))}}]),t}(d.default.Component);k.defaultProps={priceDetail:null,depositDetail:null,couponDetail:null,discountDetail:null},k.propTypes={priceDetail:A,depositDetail:A,couponDetail:A,discountDetail:A,total:p.default.number.isRequired},t.calculateService=P.default,t.default=(0,v.default)(k,E.default)},1585:function(e,t,n){function a(e,t){return r(t,function(t){return e[t]})}var r=n(157);e.exports=a},1586:function(e,t,n){function a(e){return"string"==typeof e||!o(e)&&i(e)&&r(e)==l}var r=n(73),o=n(26),i=n(61),l="[object String]";e.exports=a},1587:function(e,t,n){function a(e){return null==e?[]:r(e,o(e))}var r=n(1585),o=n(89);e.exports=a},1604:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),r=n(132),o=n(517),i=function(e,t){return{text:e,amount:t}},l=function(e,t){var n=e.leasestart,l=e.leaseend,u=e.unit,c=e.price;switch(t){case o.CHARGE_TYPE_FIX:return i("價格 "+(0,r.formatCurrency)(c,""),c);case o.CHARGE_TYPE_DAY:var s=n&&l?(0,a.rangeDiff)(n,l,!0):1;return i("價格 "+(0,r.formatCurrency)(c,"")+" x "+s+"天 x "+u+"件",c*s*u);case o.CHARGE_TYPE_COUNT:return i("價格 "+(0,r.formatCurrency)(c,"")+" x "+u+"個（件）",c*u);case o.CHARGE_TYPE_MONTH:var d=n&&l?(0,a.monthDiff)(n,l,!0):1;return i("價格 "+(0,r.formatCurrency)(c,"")+" x "+d+"月",c*d);default:throw new Error("SERVICE WRONG TYPE")}},u=function(e){var t=e.deposit;return t?i("押金",t):null},c=function(e){var t=e.couponOffset;return t?i("折價券",t):null},s=function(e){var t=e.discounts;if(0===t.length)return null;var n=t[0].discount;return i("優惠價 "+(0,r.formatCurrency)(n,""),n)};t.default=function(e){var t=e.calculate_charge_type,n=e.price,a=e.deposit,r=e.discounts,o=e.leasestart,i=e.leaseend,d=e.unit,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,p={leasestart:o,leaseend:i,unit:d||1,price:n},m=l(p,t),y=s({discounts:r}),h=y?y.amount:m.amount,_=u({deposit:a}),v=_?_.amount:0,b=c({couponOffset:f}),E=b?b.amount:0;return{priceDetail:m,depositDetail:_,couponDetail:b,discountDetail:y,total:h+Math.max(v-E,0)}}},1605:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.ConclusionPrice=t.Price=t.ConclusionLabel=t.Label=t.ConclusionDetail=t.DetailContainer=t.Container=void 0;var o=r(["\n  margin-bottom: 0;\n"],["\n  margin-bottom: 0;\n"]),i=r(["\n  font-weight: 600;\n  color: ",";\n"],["\n  font-weight: 600;\n  color: ",";\n"]),l=r(["\n  color: ",";\n  font-weight: 600;\n  font-size: 1.2em;\n  line-height: 1.4em;\n"],["\n  color: ",";\n  font-weight: 600;\n  font-size: 1.2em;\n  line-height: 1.4em;\n"]),u=n(59),c=a(u),s=n(322),d=a(s),f=(t.Container=c.default.div.withConfig({displayName:"styles__Container",componentId:"s1fbq7kb-0"})(["background-color:#F5FAFA;padding:25px;"]),t.DetailContainer=c.default.div.withConfig({displayName:"styles__DetailContainer",componentId:"s1fbq7kb-1"})(["font-size:1em;line-height:1.2em;margin-bottom:20px;"])),p=(t.ConclusionDetail=f.extend(o),t.Label=c.default.span.withConfig({displayName:"styles__Label",componentId:"s1fbq7kb-2"})(["color:",";float:left;"],d.default.middleBlack)),m=(t.ConclusionLabel=p.extend(i,d.default.blackColor),t.Price=c.default.span.withConfig({displayName:"styles__Price",componentId:"s1fbq7kb-3"})(["color:",";"," float:right;"],function(e){return e.extra?d.default.colorDanger:d.default.blackColor},function(e){return e.del&&"text-decoration: line-through;"}));t.ConclusionPrice=m.extend(l,d.default.primaryColor)},1607:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(323),r=function(e){return e&&e.__esModule?e:{default:e}}(a),o=r.default.serviceDates,i=r.default.cityArea,l=r.default.address,u=r.default.storeid;t.default={dates:o,cityArea:i,address:l,storeid:u,serviceLocationType:{presence:{message:"^請選擇服務方式"}},unit:function(e){return{presence:{message:"^請填數量"},numericality:{notValid:"^請填數字",onlyInteger:!0,notInteger:"^請填數字",greaterThanOrEqualTo:1,notGreaterThanOrEqualTo:"^至少大於 1",lessThanOrEqualTo:e,notLessThanOrEqualTo:"^數量不可超過目前物品數量："+e}}},note:{},sendType:{presence:{message:"^請選擇到貨方式"}},returnType:{presence:{message:"^請選擇寄還方式"}}}},1608:function(e,t){e.exports={"detail-container":"BillingDetail_detail-container_1T1DC",label:"BillingDetail_label_2lU6T",abandon:"BillingDetail_abandon_3Tyn_",discounted:"BillingDetail_discounted_16OTR",price:"BillingDetail_price_2GoQG","high-light":"BillingDetail_high-light_rzINI"}},1925:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.validateAll=t.validateAllBy=t.validateAgree=t.validateAgreeBy=t.validatePayment=t.validatePaymentBy=t.validateForm=t.validateFormBy=void 0;var r=n(1574),o=a(r),i=n(85),l=a(i),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=n(154),s=a(c),d=n(1575),f=n(1607),p=a(f),m=n(323),y=a(m),h=n(133),_=n(213),v=n(218),b=n(339),E=t.validateFormBy=function(e,t,n){var a=e.leasestart,r=e.leaseend,o=e.storeid,i=e.sendType,c=e.returnType,f=e.sendCity,m=e.sendArea,_=e.sendAddress,v=e.unit,E=e.couponNo,C=t.calculate_charge_type,T=t.price,P=t.deposit,g=t.discounts,A=t.unit,k=n.records,D=h.SEND_TYPE_SEVEN===i,S=h.SEND_TYPE_MAIL===i,N=(0,d.calculateService)(u({calculate_charge_type:C},{price:T,deposit:P,discounts:g,unit:v},{leasestart:a,leaseend:r}),(0,b.getCouponOffsetFromRecords)(E,k)),x=N.total,O={leasestart:a,leaseend:r,storeid:o,sendCityArea:""+f+m,sendAddress:_,sendType:i,returnType:c,unit:v,priceTotal:x},R={leasestart:y.default.startDate,leaseend:y.default.endDate,storeid:D?p.default.storeid:{},sendCityArea:S?y.default.cityArea:{},sendAddress:S?y.default.address:{},sendType:p.default.sendType,returnType:p.default.returnType,unit:p.default.unit(A),priceTotal:y.default.priceTotal},w=(0,s.default)(O,R);return{isValid:(0,l.default)(w),errors:w}},C=t.validateForm=function(){return function(e,t){return new Promise(function(e,n){var a=t()[v.REDUCER_KEY],r=t()[_.REDUCER_KEY],o=t()[b.REDUCER_KEY],i=E(r,a,o),l=i.isValid,u=i.errors;l?e():n(u)})}},T=t.validatePaymentBy=function(e,t){var n=e.paymenttype,a=[_.PAYMENT_TYPE_ATM,_.PAYMENT_TYPE_CREDIT_CARD],r={};return(0,o.default)(a,n)||(r.paymenttype="請選擇付款方式。"),t||(r.atm="請設定銀行帳戶。"),{isValid:(0,l.default)(r),errors:r}},P=t.validatePayment=function(){return function(e,t){return new Promise(function(e,n){var a=t()[_.REDUCER_KEY],r=t(),o=r.personalBankInfo,i=T(a,o.isReady),l=i.isValid,u=i.errors;l?e():n(u)})}},g=t.validateAgreeBy=function(e){var t=e.isAgree;return{isValid:t,errors:t?{}:{agree:"請確認以上資訊並勾選。"}}},A=t.validateAgree=function(){return function(e,t){return new Promise(function(e,n){var a=t()[_.REDUCER_KEY],r=g(a),o=r.isValid,i=r.errors;o?e():n(i)})}};t.validateAllBy=function(e,t,n,a){var r=E(e,t,n),o=r.isValid,i=T(e,a),l=i.isValid,u=g(e),c=u.isValid;return o&&l&&c},t.validateAll=function(){return function(e){return new Promise(function(t,n){var a=[e(C()),e(P()),e(A())];Promise.all(a).then(function(e){return t(e)}).catch(function(e){return n(e)})})}}},1928:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.validateAll=t.validateAllBy=t.validateAgree=t.validateAgreeBy=t.validatePayment=t.validatePaymentBy=t.validateForm=t.validateFormBy=void 0;var r=n(1574),o=a(r),i=n(85),l=a(i),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=n(154),s=a(c),d=n(1575),f=n(1607),p=a(f),m=n(323),y=a(m),h=n(133),_=n(333),v=n(220),b=n(341),E=t.validateFormBy=function(e,t,n){var a=e.sendType,r=e.sendCity,o=e.sendArea,i=e.sendAddress,c=e.note,f=e.unit,m=e.storeid,_=e.couponNo,v=e.leasestart,E=e.leaseend,C=t.calculate_charge_type,T=t.price,P=t.deposit,g=t.discounts,A=t.unit,k=n.records,D=a===h.SEND_TYPE_MAIL,S=a===h.SEND_TYPE_SEVEN,N=(0,d.calculateService)(u({calculate_charge_type:C},{price:T,deposit:P,discounts:g,unit:f},{leasestart:v,leaseend:E}),(0,b.getCouponOffsetFromRecords)(_,k)),x=N.total,O={storeid:m,sendCityArea:""+r+o,sendAddress:i,sendType:a,unit:f,note:c,priceTotal:x},R={storeid:S?p.default.storeid:{},sendCityArea:D?p.default.cityArea:{},sendAddress:D?p.default.address:{},sendType:p.default.sendType,unit:p.default.unit(A),note:p.default.note,priceTotal:y.default.priceTotal},w=(0,s.default)(O,R);return{isValid:(0,l.default)(w),errors:w}},C=t.validateForm=function(){return function(e,t){return new Promise(function(e,n){var a=t()[v.REDUCER_KEY],r=t()[_.REDUCER_KEY],o=t()[b.REDUCER_KEY],i=E(r,a,o),l=i.isValid,u=i.errors;l?e():n(u)})}},T=t.validatePaymentBy=function(e,t){var n=e.paymenttype,a=[_.PAYMENT_TYPE_ATM,_.PAYMENT_TYPE_CREDIT_CARD],r={};return(0,o.default)(a,n)||(r.paymenttype="請選擇付款方式。"),t||(r.atm="請設定銀行帳戶。"),{isValid:(0,l.default)(r),errors:r}},P=t.validatePayment=function(){return function(e,t){return new Promise(function(e,n){var a=t()[_.REDUCER_KEY],r=t(),o=r.personalBankInfo,i=T(a,o.isReady),l=i.isValid,u=i.errors;l?e():n(u)})}},g=t.validateAgreeBy=function(e){var t=e.isAgree;return{isValid:t,errors:t?{}:{agree:"請確認以上資訊並勾選。"}}},A=t.validateAgree=function(){return function(e,t){return new Promise(function(e,n){var a=t()[_.REDUCER_KEY],r=g(a),o=r.isValid,i=r.errors;o?e():n(i)})}};t.validateAllBy=function(e,t,n,a){var r=E(e,t,n).isValid,o=T(e,a).isValid,i=g(e).isValid;return r&&o&&i},t.validateAll=function(){return function(e){return new Promise(function(t,n){var a=[e(C()),e(P()),e(A())];Promise.all(a).then(function(e){return t(e)}).catch(function(e){return n(e)})})}}},2215:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),s=n(3),d=a(s),f=n(1553),p=a(f),m=n(86),y=a(m),h=n(524),_=a(h),v=n(1552),b=a(v),E=n(203),C=a(E),T=n(14),P=a(T),g=n(5),A=a(g),k=n(2330),D=a(k),S=P.default.bind(D.default),N=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onNextStepClick=n.onNextStepClick.bind(n),n.state={paymentTypeError:"",bankInfoError:""},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.props.dispatchTouchPath()}},{key:"onNextStepClick",value:function(){var e=this,t=this.props,n=t.dispatchValidate,a=t.nextStep;n().then(function(){e.setState({paymentTypeError:"",bankInfoError:""}),a()}).catch(function(t){var n=t.paymenttype,a=t.atm;e.setState({paymentTypeError:n||"",bankInfoError:a||""})})}},{key:"render",value:function(){var e=this.props,t=e.isAtmChoosed,n=e.isCreditCardChoosed,a=e.dispatchChooseAtm,r=e.dispatchChooseCreditCard,o=e.dispatchBankSetup,i=e.atmBankName,l=e.isValid,u=this.state,s=u.paymentTypeError,d=u.bankInfoError;return c.default.createElement(p.default,{title:"支付方式"},c.default.createElement("div",{role:"form"},c.default.createElement("div",{styleName:"radio-group"},c.default.createElement("div",{styleName:"radio-container"},c.default.createElement(_.default,{checked:t,onChange:a},c.default.createElement("div",{className:S("radio-label")},"ATM 銀行轉帳"),c.default.createElement("div",{className:S("label-helper")},"您可以在實體ATM或網路銀行轉帳，使用ShareApp指定的銀行帳號（虛擬帳號）"))),c.default.createElement("div",{styleName:"radio-container"},c.default.createElement(_.default,{checked:n,onChange:r},c.default.createElement("div",{className:S("radio-label")},"信用卡支付"))),c.default.createElement(C.default,{text:s,outerStyle:{margin:"10px 0"},width:"auto"})),c.default.createElement("div",{styleName:"atm-detail-container"},c.default.createElement("div",{styleName:"bank-container"},c.default.createElement("span",{styleName:"bank-name"},"銀行帳戶：",i),c.default.createElement(y.default,{colorType:"greenBorder",size:"sm",content:"查看",width:"auto",onClick:o})),c.default.createElement("div",{styleName:"helper-text"},"當交易完成後，銀行會在每週一、三，將您的收入款項轉帳至您的銀行帳戶"),c.default.createElement(C.default,{text:d,outerStyle:{margin:"10px 0"},width:"auto"})),c.default.createElement(b.default,{status:l?v.STATUS_VALID:v.STATUS_DISABLE,onClick:this.onNextStepClick})))}}]),t}(c.default.Component);N.propTypes={isAtmChoosed:d.default.bool.isRequired,atmBankName:d.default.string.isRequired,isCreditCardChoosed:d.default.bool.isRequired,dispatchChooseAtm:d.default.func.isRequired,dispatchChooseCreditCard:d.default.func.isRequired,dispatchValidate:d.default.func.isRequired,dispatchTouchPath:d.default.func.isRequired,dispatchBankSetup:d.default.func.isRequired,nextStep:d.default.func.isRequired,isValid:d.default.bool.isRequired},t.default=(0,A.default)(N,D.default)},2233:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),s=n(3),d=a(s),f=n(1553),p=a(f),m=n(86),y=a(m),h=n(524),_=a(h),v=n(1552),b=a(v),E=n(203),C=a(E),T=n(14),P=a(T),g=n(5),A=a(g),k=n(2342),D=a(k),S=P.default.bind(D.default),N=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onNextStepClick=n.onNextStepClick.bind(n),n.state={paymentTypeError:"",bankInfoError:""},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.props.dispatchTouchPath()}},{key:"onNextStepClick",value:function(){var e=this,t=this.props,n=t.dispatchValidate,a=t.nextStep;n().then(function(){e.setState({paymentTypeError:"",bankInfoError:""}),a()}).catch(function(t){var n=t.paymenttype,a=t.atm;e.setState({paymentTypeError:n||"",bankInfoError:a||""})})}},{key:"render",value:function(){var e=this.props,t=e.isAtmChoosed,n=e.isCreditCardChoosed,a=e.dispatchChooseAtm,r=e.dispatchChooseCreditCard,o=e.dispatchBankSetup,i=e.atmBankName,l=e.isValid,u=this.state,s=u.paymentTypeError,d=u.bankInfoError;return c.default.createElement(p.default,{title:"支付方式"},c.default.createElement("div",{role:"form"},c.default.createElement("div",{styleName:"radio-group"},c.default.createElement("div",{styleName:"radio-container"},c.default.createElement(_.default,{checked:t,onChange:a},c.default.createElement("div",{className:S("radio-label")},"ATM 銀行轉帳"),c.default.createElement("div",{className:S("label-helper")},"您可以在實體ATM或網路銀行轉帳，使用ShareApp指定的銀行帳號（虛擬帳號）"))),c.default.createElement("div",{styleName:"radio-container"},c.default.createElement(_.default,{checked:n,onChange:r},c.default.createElement("div",{className:S("radio-label")},"信用卡支付"))),c.default.createElement(C.default,{text:s,outerStyle:{margin:"10px 0"},width:"auto"})),c.default.createElement("div",{styleName:"atm-detail-container"},c.default.createElement("div",{styleName:"bank-container"},c.default.createElement("span",{styleName:"bank-name"},"銀行帳戶：",i),c.default.createElement(y.default,{colorType:"greenBorder",size:"sm",content:"查看",width:"auto",onClick:o})),c.default.createElement("div",{styleName:"helper-text"},"當交易完成後，銀行會在每週一、三，將您的收入款項轉帳至您的銀行帳戶"),c.default.createElement(C.default,{text:d,outerStyle:{margin:"10px 0"},width:"auto"})),c.default.createElement(b.default,{status:l?v.STATUS_VALID:v.STATUS_DISABLE,onClick:this.onNextStepClick})))}}]),t}(c.default.Component);N.propTypes={isAtmChoosed:d.default.bool.isRequired,atmBankName:d.default.string.isRequired,isCreditCardChoosed:d.default.bool.isRequired,dispatchChooseAtm:d.default.func.isRequired,dispatchChooseCreditCard:d.default.func.isRequired,dispatchValidate:d.default.func.isRequired,dispatchTouchPath:d.default.func.isRequired,dispatchBankSetup:d.default.func.isRequired,nextStep:d.default.func.isRequired,isValid:d.default.bool.isRequired},t.default=(0,A.default)(N,D.default)},2330:function(e,t){e.exports={"radio-group":"StepPayment_radio-group_1_Eyz","radio-container":"StepPayment_radio-container_xdsP-","atm-detail-container":"StepPayment_atm-detail-container_3jWF1","bank-container":"StepPayment_bank-container_1yTT0","bank-name":"StepPayment_bank-name_2sQqP","helper-text":"StepPayment_helper-text_25xjk","radio-label":"StepPayment_radio-label_3PCmy","label-helper":"StepPayment_label-helper_2pw3K"}},2342:function(e,t){e.exports={"radio-group":"StepPayment_radio-group_3qiBy","radio-container":"StepPayment_radio-container_Fz0ub","atm-detail-container":"StepPayment_atm-detail-container_WeXL5","bank-container":"StepPayment_bank-container_1zgKV","bank-name":"StepPayment_bank-name_3JDgD","helper-text":"StepPayment_helper-text_1CuGy","radio-label":"StepPayment_radio-label_oah9L","label-helper":"StepPayment_label-helper_1fsxE"}}});