webpackJsonp([70],{1432:function(e,t,n){"use strict";function r(){return function(e,t){e(f()),(0,o.asyncXhrAuthedPost)("/ajax/get_coupon.json",{},t()).then(function(t){e(l(t))})}}Object.defineProperty(t,"__esModule",{value:!0}),t.reset=t.RESET=t.FETCHING=t.FETCHED=void 0,t.fetchCoupon=r;var o=n(8),u=function(e){return"MY.COUPON."+e},i=t.FETCHED=u("FETCHED"),a=t.FETCHING=u("FETCHING"),c=t.RESET=u("RESET"),l=function(e){return{type:i,records:e}},f=function(){return{type:a}},s=(t.reset=function(){return{type:c}},{isFetching:!1,records:[]});t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case a:return Object.assign({},e,{isFetching:!0});case i:return Object.assign({},e,{isFetching:!1,records:t.records});case c:return s;default:return e}}},1458:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),o=n(2151),u=function(e){return e&&e.__esModule?e:{default:e}}(o),i=n(1432),a=function(e){return{environment:e.environment,myCoupon:e.myCoupon}},c=function(e){return{dispatch:e,dispatchFetchItem:function(){return e((0,i.fetchCoupon)())},dispatchReset:function(){return e((0,i.reset)())}}};t.default=(0,r.connect)(a,c)(u.default)},1550:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),f=n(3),s=r(f),p=n(11),d=r(p),y=n(155),h=r(y),_=n(5),b=r(_),m=n(1551),E=r(m),v=function(e){function t(){return o(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"renderContent",value:function(){var e=this.props,t=e.isInitialFetching,n=e.noDataText,r=e.children;return t?l.default.createElement(h.default,null):n?l.default.createElement("div",{styleName:"no-data"},n):r}},{key:"render",value:function(){var e=this.props.minHeight;return l.default.createElement("div",{styleName:"container",style:{minHeight:e}},this.renderContent())}}]),t}(l.default.Component);v.defaultProps={minHeight:400,noDataText:null},v.propTypes={children:d.default.children.isRequired,noDataText:s.default.string,minHeight:s.default.number,isInitialFetching:s.default.bool.isRequired},t.default=(0,b.default)(v,E.default)},1551:function(e,t){e.exports={container:"ListContainer_container_2ZP1q","no-data":"ListContainer_no-data_2O1SC"}},1563:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),f=n(3),s=r(f),p=n(5),d=r(p),y=n(1565),h=r(y),_=n(11),b=r(_),m=function(e){function t(){return o(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.titleText,r=e.children;return l.default.createElement("div",{styleName:"container"},l.default.createElement("div",{styleName:"header"},l.default.createElement("h1",{styleName:"title"},t&&t({size:48,style:{verticalAlign:"top"}}),l.default.createElement("span",{styleName:"text"},n))),l.default.createElement("div",{styleName:"body"},r))}}]),t}(l.default.Component);m.defaultProps={icon:null},m.propTypes={icon:s.default.func,titleText:s.default.string.isRequired,children:b.default.children.isRequired},t.default=(0,d.default)(m,h.default)},1565:function(e,t){e.exports={container:"Container_container_1jgWb",header:"Container_header_2w5kE",title:"Container_title_2jnjz",text:"Container_text_3f4tb",body:"Container_body_12gU_"}},2150:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),f=n(3),s=r(f),p=n(18),d=n(132),y=n(5),h=r(y),_=n(2287),b=r(_),m=function(e){function t(){return o(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"render",value:function(){var e=this.props,n=e.couponNo,r=e.discount,o=e.title,u=e.expireAt;return l.default.createElement("table",{styleName:"container"},l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",{styleName:"price-container",rowSpan:"4"},l.default.createElement("span",{styleName:"price"},(0,d.formatCurrency)(r,""))),l.default.createElement("td",{styleName:"title"},o)),l.default.createElement("tr",null,l.default.createElement("td",{styleName:"due-date"},n)),l.default.createElement("tr",null,l.default.createElement("td",{styleName:"due-date"},"使用期限：～ ",(0,p.formatDate)(u))),l.default.createElement("tr",null,l.default.createElement("td",{styleName:"expire-notice"},t.calculateExpiration(u)))))}}],[{key:"calculateExpiration",value:function(e){var t=(0,p.rangeDiff)((0,p.today)(),e,!1);return t>4?"":t>0?"再過"+t+"天即將逾期，逾期後自動失效":0===t?"只到今天喔～逾期後自動失效":"已過期不可使用"}}]),t}(l.default.Component);m.propTypes={couponNo:s.default.string.isRequired,discount:s.default.number.isRequired,title:s.default.string.isRequired,expireAt:s.default.number.isRequired},t.default=(0,h.default)(m,b.default)},2151:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),f=n(3),s=r(f),p=n(5),d=r(p),y=n(1550),h=r(y),_=n(518),b=r(_),m=n(2288),E=r(m),v=n(2150),C=r(v),O=n(1563),g=r(O),j=b.default.coupon.text,w=function(e){function t(){return o(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"componentDidMount",value:function(){this.props.dispatchReset(),this.props.dispatchFetchItem()}},{key:"componentWillUnmount",value:function(){this.props.dispatchReset()}},{key:"render",value:function(){var e=this.props.myCoupon,t=e.records,n=!1===e.isFetching&&0===t.length;return l.default.createElement(g.default,{titleText:j},l.default.createElement(h.default,{minHeight:500,noDataText:n?"目前沒有優惠券":null,isInitialFetching:e.isFetching},t.map(function(e){return l.default.createElement(C.default,{key:e.coupon_no,couponNo:e.coupon_no,title:e.name,discount:e.amount,expireAt:e.expiration_time})})))}}]),t}(l.default.Component);w.propTypes={myCoupon:s.default.shape({records:s.default.array.isRequired}).isRequired,dispatchFetchItem:s.default.func.isRequired,dispatchReset:s.default.func.isRequired},t.default=(0,d.default)(w,E.default)},2287:function(e,t){e.exports={container:"CouponCard_container_2mSHE","price-container":"CouponCard_price-container_2Qzuw",price:"CouponCard_price_2G6pF",title:"CouponCard_title_3MqKZ","due-date":"CouponCard_due-date_27DjA","expire-notice":"CouponCard_expire-notice_lCIOQ"}},2288:function(e,t){}});